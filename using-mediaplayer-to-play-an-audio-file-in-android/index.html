<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>
   Using MediaPlayer to play an Audio File in Android
  </title>
  <meta charset="utf-8"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="minimum-scale=1,initial-scale=1,width=device-width,shrink-to-fit=no" name="viewport"/>
  <link href="https://blog.mindorks.com/using-mediaplayer-to-play-an-audio-file-in-android" rel="canonical"/>
  <meta content="986249072156-dabps0lf90smluddrk5rkqsdjghk3hd3.apps.googleusercontent.com" name="google-signin-client_id"/>
  <meta content="android, learn android app development, android app development courses, android blogs, android tutorial" name="keywords"/>
  <meta content="Using MediaPlayer to play an Audio File in Android" property="og:title"/>
  <meta content="website" property="og:type"/>
  <meta content="https://blog.mindorks.com/using-mediaplayer-to-play-an-audio-file-in-android" property="og:url"/>
  <meta content="/images/using-mediaplayer-to-play-an-audio-file-in-android-banner.png" property="og:image"/>
  <meta content="In this blog, we will learn how to use MediaPlayer to play an audio file in Android. We will learn about different states present in the MediaPlayer and will also implement it. So, feel the music." property="og:description"/>
  <meta content="Using MediaPlayer to play an Audio File in Android" property="twitter:title"/>
  <meta content="In this blog, we will learn how to use MediaPlayer to play an audio file in Android. We will learn about different states present in the MediaPlayer and will also implement it. So, feel the music." name="twitter:description"/>
  <meta content="/images/using-mediaplayer-to-play-an-audio-file-in-android-banner.png" name="twitter:image:src"/>
  <meta content="summary_large_image" name="twitter:card"/>
  <meta content="@MindorksNextGen" name="twitter:site"/>
  <meta content="In this blog, we will learn how to use MediaPlayer to play an audio file in Android. We will learn about different states present in the MediaPlayer and will also implement it. So, feel the music." name="description"/>
  <meta content="1620001391374687" property="fb:app_id"/>
  <link href="/styles/vendor-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link href="/styles/app-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link as="style" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" onload='this.onload=null,this.rel="stylesheet"' rel="preload"/>
  <noscript>
   <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
  </noscript>
  <script type="text/javascript">
     </script>
  <script async="" src="https://www.google-analytics.com/analytics.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-91686131-1","auto"),ga("require","cleanUrlTracker"),ga("require","eventTracker"),ga("require","impressionTracker"),ga("require","outboundLinkTracker"),ga("require","urlChangeTracker"),ga("require","maxScrollTracker"),ga("require","mediaQueryTracker"),ga("require","outboundFormTracker"),ga("require","outboundLinkTracker"),ga("require","pageVisibilityTracker"),ga("require","socialWidgetTracker"),ga("require","urlChangeTracker"),ga("send","pageview")
  </script>
  <script defer="defer" src="/assets/autotrack.js" type="text/javascript">
  </script>
  <script src="/assets/highlight.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/vendor-bundle-1.8.6.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/app-bundle-1.8.6.js" type="text/javascript">
  </script>
 </head>
 <body>
  <div id="root">
   <div class="screen app-load-content" data-reactroot="">
    <div class="ui centered grid">
     <div class="row" style="padding:0">
      <div class="ui fixed menu navbar huge borderless grid" style="background-color:#fff;height:60px">
      </div>
     </div>
     <div class="centered computer only row" style="padding:0">
      <div class="ui fixed top menu navbar huge borderless grid header-container" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="right menu">
        <a class="item" href="https://janisharali.com" target="_blank">
         Mentor Ali
        </a>
        <a class="item" href="https://amitshekhar.me" target="_blank">
         Mentor Amit
        </a>
       </div>
      </div>
     </div>
     <div class="tablet only mobile only row" style="padding:0">
      <div class="ui fixed top navbar huge menu borderless" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="item">
       </div>
      </div>
     </div>
    </div>
    <div class="header-height">
    </div>
    <div aria-live="assertive" class="redux-toastr">
     <div>
      <div class="top-left">
      </div>
      <div class="top-right">
      </div>
      <div class="top-center">
      </div>
      <div class="bottom-left">
      </div>
      <div class="bottom-right">
      </div>
      <div class="bottom-center">
      </div>
     </div>
    </div>
    <div class="content-container theme">
     <div class="ui centered one column grid" style="padding-bottom:80px;background-color:#fff">
      <div class="ten wide computer fifteen wide mobile fifteen wide tablet column" style="margin-top:50px">
       <div>
        <div class="blog-page-author">
         <div class="ui small header">
          <img alt="Sumit Mishra" class="ui circular image" src="https://lh3.googleusercontent.com/a-/AOh14GiHP4JrkmlLjuz_uG1g4E0MhTUClSNytqB8o-pxCA=s96-c?sz=300"/>
          <div class="content">
           Sumit Mishra
           <div class="sub header" style="margin-top:5px">
            10th October 2019
           </div>
          </div>
         </div>
        </div>
        <div id="content">
         <article class="template">
          <div class="postContent">
           <div class="notesSource">
            <div class="postField postField--body" id="editor">
             <section class="section--first section--last">
              <div class="section-divider layoutSingleColumn-template">
               <hr class="section-divider"/>
              </div>
              <div class="section-content">
               <div class="section-inner layoutSingleColumn-template">
                <div>
                 <h1 class="graf--h1">
                  Using MediaPlayer to play an Audio File in Android
                 </h1>
                 <div class="graf-image graf-caption">
                  <img alt="Using MediaPlayer to play an Audio File in Android" class="graf-image" src="/images/using-mediaplayer-to-play-an-audio-file-in-android-banner.png"/>
                 </div>
                 <p class="graf--p">
                  In this blog, we will learn how to play an audio file in Android.
                 </p>
                 <blockquote class="graf--blockquote">
                  When words fail, music speaks.
                 </blockquote>
                 <p class="graf--p">
                  There are various ways of adding Audio Files in Android applications. For example, you can use ExoPlayer or MediaPlayer to Play Audio Files in Android applications.
                 </p>
                 <p class="graf--p">
                  In this blog, you will learn how to play an audio file in Android using
                  <b class="graf--bold">
                   MediaPlayer
                  </b>
                  . Here is what you will be learning in this blog:
                 </p>
                 <ul>
                  <li>
                   MediaPlayer Introduction
                  </li>
                  <li>
                   State Diagram of MediaPlayer
                  </li>
                  <li>
                   prepare() vs prepareAsync()
                  </li>
                  <li>
                   Release MediaPlayer after use
                  </li>
                  <li>
                   Two-liner MediaPlayer example
                  </li>
                  <li>
                   More advanced example
                  </li>
                  <li>
                   Closing notes
                  </li>
                 </ul>
                 <p class="graf--p">
                  Let's get started.
                 </p>
                 <h4 class="graf--h3">
                  MediaPlayer Introduction
                 </h4>
                 <p class="graf--p">
                  To play audio or video files in Android, the Android multimedia framework includes the support of MediaPlayer APIs. So, by using MediaPlayer APIs, you can play audio/video files from your Android filesystem or play files from your Application's resource file or even you can stream audio/video files just like Spotify.
                 </p>
                 <p class="graf--p">
                  Following are the operations that can be performed using MediaPlayer:
                 </p>
                 <ul>
                  <li>
                   <b class="graf--bold">
                    Prepare media file:
                   </b>
                   To play a media file, you need to first prepare it i.e. you need to load the file for playback. Methods used for doing this are
                   <i class="graf--italic">
                    prepare()
                   </i>
                   ,
                   <i class="graf--italic">
                    prepareAsync()
                   </i>
                   , and
                   <i class="graf--italic">
                    setDataSource()
                   </i>
                   .
                  </li>
                  <li>
                   <b class="graf--bold">
                    Start/Pause the playback:
                   </b>
                   After loading the media file, you can start playing the media file by using the
                   <i class="graf--italic">
                    start()
                   </i>
                   method. Similarly, you can pause the playing media file by using the
                   <i class="graf--italic">
                    pause()
                   </i>
                   method.
                  </li>
                  <li>
                   <b class="graf--bold">
                    Stop the playback:
                   </b>
                   You can stop playback by using the
                   <i class="graf--italic">
                    reset()
                   </i>
                   method. This method is used when we want to stop playback and then prepare another playback for playing.
                  </li>
                  <li>
                   <b class="graf--bold">
                    Seek to a position:
                   </b>
                   You can directly skip to a particular position(in ms) in a media file by using the
                   <i class="graf--italic">
                    seekTo(position)
                   </i>
                   method.
                  </li>
                  <li>
                   <b class="graf--bold">
                    Length of song:
                   </b>
                   You can find the length of a particular song(in ms) by using the
                   <i class="graf--italic">
                    getDuration()
                   </i>
                   method.
                  </li>
                  <li>
                   <b class="graf--bold">
                    The current position of a song:
                   </b>
                   You can get the current position of playback by using the
                   <i class="graf--italic">
                    getCurrentPosition()
                   </i>
                   method.
                  </li>
                  <li>
                   <b class="graf--bold">
                    Resource deallocation:
                   </b>
                   You can deallocate the memory and resources used by the media player by using the
                   <i class="graf--italic">
                    release()
                   </i>
                   method.
                  </li>
                 </ul>
                 <p class="graf--p">
                  These are some of the operations that can be performed by using the MediaPlayer APIs. So, should we start writing code for the MediaPlayer? No, a big no. Before getting into the code, let's see the state diagram of MediaPlayer because it is very important to understand the state diagram, otherwise, your application may lead to some unwanted crashes.
                 </p>
                 <h4 class="graf--h3">
                  State Diagram of MediaPlayer
                 </h4>
                 <p class="graf--p">
                  In this section, we will learn about the different states that are present from starting playback to stopping the playback. These states are:
                 </p>
                 <ul>
                  <li>
                   <b class="graf--bold">
                    Idle state:
                   </b>
                   When you create a MediaPlayer object by using the
                   <i class="graf--italic">
                    new
                   </i>
                   keyword then that object is present in the
                   <i class="graf--italic">
                    idle state
                   </i>
                   . Also, when you are calling the
                   <i class="graf--italic">
                    reset()
                   </i>
                   method then the object will go into the
                   <i class="graf--italic">
                    idle state
                   </i>
                   . In the
                   <i class="graf--italic">
                    idle state
                   </i>
                   , there is nothing going on with the MediaPlayer object. It only indicates that the object is ready to be prepared for playing some media files. So, in the
                   <i class="graf--italic">
                    idle state
                   </i>
                   , if you are trying to get the current position of a song by using
                   <i class="graf--italic">
                    getCurrentPosition()
                   </i>
                   method or if you are trying to use the
                   <i class="graf--italic">
                    pause()
                   </i>
                   ,
                   <i class="graf--italic">
                    start()
                   </i>
                   ,
                   <i class="graf--italic">
                    stop()
                   </i>
                   ,
                   <i class="graf--italic">
                    setVolume()
                   </i>
                   ,
                   <i class="graf--italic">
                    getDuration
                   </i>
                   ,
                   <i class="graf--italic">
                    etc
                   </i>
                   , methods then you will encounter some unwanted app crashes.
                  </li>
                  <li>
                   <b class="graf--bold">
                    Error state:
                   </b>
                   If you use the above methods mentioned in the
                   <i class="graf--italic">
                    idle state
                   </i>
                   just after using the
                   <i class="graf--italic">
                    reset()
                   </i>
                   method, then the
                   <i class="graf--italic">
                    OnErrorListener.onError()
                   </i>
                   will be invoked and your object will be transferred to the
                   <i class="graf--italic">
                    error state
                   </i>
                   .
                   <b class="graf--bold">
                    But if you are using the "
                    <i class="graf--italic">
                     new'
                    </i>
                    keyword then the OnErrorListener.onError() will not be called and the state will remain unchanged.
                   </b>
                   To reuse the object that is present in the
                   <i class="graf--italic">
                    error state
                   </i>
                   , you need to call the
                   <i class="graf--italic">
                    reset()
                   </i>
                   method.
                  </li>
                  <li>
                   <b class="graf--bold">
                    End state:
                   </b>
                   When you call the
                   <i class="graf--italic">
                    release()
                   </i>
                   method then all the resources taken by the MediaPlayer object will be released and the object will go into the
                   <i class="graf--italic">
                    end state
                   </i>
                   .
                   <b class="graf--bold">
                    If an object is in the
                    <i class="graf--italic">
                     end state
                    </i>
                    , then there is no way of calling back the object to other states.
                   </b>
                  </li>
                  <li>
                   <b class="graf--bold">
                    Initialized state:
                   </b>
                   The whole lifecycle of a MediaPlayer object lies between the
                   <i class="graf--italic">
                    idle
                   </i>
                   and
                   <i class="graf--italic">
                    end
                   </i>
                   state. After the
                   <i class="graf--italic">
                    idle state
                   </i>
                   , you need to provide the data source you are going to use i.e. the media source. So,
                   <i class="graf--italic">
                    setDataSource()
                   </i>
                   method is used for the same purpose and after that, the object will be placed into the
                   <i class="graf--italic">
                    initialized state
                   </i>
                   .
                   <b class="graf--bold">
                    setDataSource() should always be used when the application is in the idle state otherwise it will through IllegalStateException.
                   </b>
                  </li>
                  <li>
                   <b class="graf--bold">
                    Prepared state:
                   </b>
                   Before starting the music, you need to put the MediaPlayer object into the
                   <i class="graf--italic">
                    prepared state
                   </i>
                   . In the
                   <i class="graf--italic">
                    prepared state,
                   </i>
                   you can adjust the looping of the video/audio or you can set the volume. So, to bring an object from the
                   <i class="graf--italic">
                    initialized state
                   </i>
                   to the
                   <i class="graf--italic">
                    prepared state
                   </i>
                   , you can either use the
                   <i class="graf--italic">
                    prepare()
                   </i>
                   method to directly transfer the object to the
                   <i class="graf--italic">
                    prepared state
                   </i>
                   or you can use one intermediate state called
                   <b class="graf--bold">
                    <i class="graf--italic">
                     preparing state
                    </i>
                   </b>
                   . To go to the
                   <i class="graf--italic">
                    preparing state
                   </i>
                   from
                   <i class="graf--italic">
                    initialized state
                   </i>
                   , you can call the
                   <i class="graf--italic">
                    prepareAsync()
                   </i>
                   method which transfers the object to
                   <i class="graf--italic">
                    preparing state
                   </i>
                   and when the preparation is done then the
                   <i class="graf--italic">
                    onPrepared()
                   </i>
                   method of the
                   <i class="graf--italic">
                    OnPreparedListener
                   </i>
                   interface is called and the object is transferred to the
                   <i class="graf--italic">
                    prepared state
                   </i>
                   .
                   <b class="graf--bold">
                    <i class="graf--italic">
                     prepare()
                    </i>
                    and
                    <i class="graf--italic">
                     prepareAsync()
                    </i>
                    must be called in this state only otherwise it will through IllegalStateException.
                   </b>
                  </li>
                  <li>
                   <b class="graf--bold">
                    Started state:
                   </b>
                   After the
                   <i class="graf--italic">
                    prepared state
                   </i>
                   , if you use the
                   <i class="graf--italic">
                    start()
                   </i>
                   method to play any audio/video file, then the object comes into the
                   <i class="graf--italic">
                    started state
                   </i>
                   and here you can apply some methods like
                   <i class="graf--italic">
                    seekTo()
                   </i>
                   or
                   <i class="graf--italic">
                    start()
                   </i>
                   .
                   <b class="graf--bold">
                    If you are using
                    <i class="graf--italic">
                     start()
                    </i>
                    in the
                    <i class="graf--italic">
                     start state
                    </i>
                    , then it is fine, nothing will happen.
                   </b>
                  </li>
                  <li>
                   <b class="graf--bold">
                    Paused state:
                   </b>
                   While playing an audio or video file if you pause the media then it goes into the
                   <i class="graf--italic">
                    paused state
                   </i>
                   . You can use the
                   <i class="graf--italic">
                    pause()
                   </i>
                   method to put the media into the
                   <i class="graf--italic">
                    pause state
                   </i>
                   . In order to resume the media, you can use the
                   <i class="graf--italic">
                    start()
                   </i>
                   method. The resumed playback position is the same as where it was paused and after using the
                   <i class="graf--italic">
                    start()
                   </i>
                   method the playback will be resumed and the object will move to the
                   <i class="graf--italic">
                    started state
                   </i>
                   .
                   <b class="graf--bold">
                    There is no effect of calling the
                    <i class="graf--italic">
                     pause()
                    </i>
                    method in the
                    <i class="graf--italic">
                     pause state
                    </i>
                    .
                   </b>
                  </li>
                  <li>
                   <b class="graf--bold">
                    Stopped state:
                   </b>
                   When you use the
                   <i class="graf--italic">
                    stop()
                   </i>
                   method from the
                   <i class="graf--italic">
                    prepared
                   </i>
                   ,
                   <i class="graf--italic">
                    started
                   </i>
                   ,
                   <i class="graf--italic">
                    paused
                   </i>
                   or
                   <i class="graf--italic">
                    playback completed state
                   </i>
                   then the MediaPlayer object will go into the
                   <i class="graf--italic">
                    stopped state
                   </i>
                   and in order to play the audio/video again, you need to send the object in the
                   <i class="graf--italic">
                    prepared state
                   </i>
                   by calling the
                   <i class="graf--italic">
                    prepare()
                   </i>
                   or
                   <i class="graf--italic">
                    prepareAsync()
                   </i>
                   method.
                   <b class="graf--bold">
                    There is no effect of calling the
                    <i class="graf--italic">
                     stop()
                    </i>
                    method in the
                    <i class="graf--italic">
                     stopped state
                    </i>
                    .
                   </b>
                  </li>
                  <li>
                   <b class="graf--bold">
                    PlaybackCompleted state:
                   </b>
                   If the
                   <i class="graf--italic">
                    looping
                   </i>
                   is set to
                   <i class="graf--italic">
                    true
                   </i>
                   i.e. you want to play the media file again and again, then the object shall remain in the
                   <i class="graf--italic">
                    started state
                   </i>
                   . If the
                   <i class="graf--italic">
                    looping
                   </i>
                   is set to
                   <i class="graf--italic">
                    false
                   </i>
                   , then
                   <i class="graf--italic">
                    OnCompletion.onCompletion()
                   </i>
                   will be called after the completion of the media file and the object will move to the
                   <i class="graf--italic">
                    PlaybackCompleted
                   </i>
                   state. In order to start the playback again, you can call the
                   <i class="graf--italic">
                    start()
                   </i>
                   method.
                  </li>
                 </ul>
                 <p class="graf--p">
                  The following figure is a summary of what we have discussed in the above section of this blog. It is very important to learn the state of a MediaPlayer before using it because there are some methods that must be called in a particular state only, otherwise, it will through some exception. So, it is better to have an idea of all the states.
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Using MediaPlayer to play an Audio File in Android" class="graf-image" src="/images/using-mediaplayer-to-play-an-audio-file-in-android-mediaplayer-states.jpg"/>
                 </div>
                 <h4 class="graf--h3">
                  prepare() vs prepareAsync()
                 </h4>
                 <p class="graf--p">
                  In the above section, we have seen that to bring the MediaPlayer object from the initialized state to the
                  <i class="graf--italic">
                   prepared state
                  </i>
                  , we have two options i.e. either we can use the
                  <i class="graf--italic">
                   prepare()
                  </i>
                  method and the object will directly come into the
                  <i class="graf--italic">
                   prepared state
                  </i>
                  or we can use an intermediate state i.e. the
                  <i class="graf--italic">
                   preparing state
                  </i>
                  to send the object to the
                  <i class="graf--italic">
                   prepared state
                  </i>
                  . To go to the
                  <i class="graf--italic">
                   preparing state
                  </i>
                  from the
                  <i class="graf--italic">
                   initialized state
                  </i>
                  , we can use the
                  <i class="graf--italic">
                   prepareAsync()
                  </i>
                  method. So, what is the difference between the
                  <i class="graf--italic">
                   prepare()
                  </i>
                  and
                  <i class="graf--italic">
                   prepareAsync()
                  </i>
                  methods?
                 </p>
                 <p class="graf--p">
                  If you are calling the
                  <i class="graf--italic">
                   prepare()
                  </i>
                  method then it will fetch and decode your media data and this process may take time. So, if you are calling this
                  <i class="graf--italic">
                   prepare()
                  </i>
                  method from the application's UI thread, then this may result in a delay in your application and you will end up loosing your users. So, instead of running the
                  <i class="graf--italic">
                   prepare()
                  </i>
                  method on the UI thread, you can run it onto some other thread and when the fetching and decoding of your media data is done then that thread should notify the main thread and the main thread will do the rest. So, this process is done with the help of
                  <i class="graf--italic">
                   prepareAsync()
                  </i>
                  method.
                 </p>
                 <h4 class="graf--h3">
                  Release MediaPlayer
                 </h4>
                 <p class="graf--p">
                  In the previous section, we have seen all the states of a MediaPlayer. Before moving forward, I want to mention one important point that we all should follow i.e. releasing the MediaPlayer object after using it.
                 </p>
                 <p class="graf--p">
                  Whenever we are using MediaPlayer then there are various system resources that are acquired by the MediaPlayer. So, when you are done with the MediaPlayer then you should release all the resources acquired by the MediaPlayer by calling the
                  <i class="graf--italic">
                   release()
                  </i>
                  method. Also, if you are not running your media application in the background then you should release all the resource when the application is in
                  <i class="graf--italic">
                   onPause()
                  </i>
                  state. Releasing the resources is an important step because if you are not performing this then your app can lead to bad user experience.
                 </p>
                 <h4 class="graf--h3">
                  Two-liner MediaPlayer example
                 </h4>
                 <p class="graf--p">
                  In this section of the blog, I will discuss a basic example of MediaPlayer i.e. how to play a media file just by opening an activity. Here, I will not be dealing with any states of MediaPlayer or will not be using any advanced methods associated with MediaPlayer i.e. seekTo(), getCurrentPosition(), getDuration(), etc. So, let's see the two-liner example of MediaPlayer.
                 </p>
                 <p class="graf--p">
                  Create a new project in Android Studio by using the EmptyActivity template. Here, in this example, we will be having one audio file and we will use this file in our application. So, in the
                  <b class="graf--bold">
                   <i class="graf--italic">
                    app/res
                   </i>
                  </b>
                  directory, create a
                  <b class="graf--bold">
                   <i class="graf--italic">
                    raw
                   </i>
                  </b>
                  directory by right-clicking on the
                  <b class="graf--bold">
                   <i class="graf--italic">
                    res
                   </i>
                  </b>
                  directory and then click on
                  <i class="graf--italic">
                   new
                  </i>
                  and then on
                  <i class="graf--italic">
                   Android Resource Directory
                  </i>
                  . Select the Resource Type as
                  <b class="graf--bold">
                   <i class="graf--italic">
                    raw
                   </i>
                  </b>
                  and then click on
                  <b class="graf--bold">
                   OK
                  </b>
                  . In the
                  <b class="graf--bold">
                   <i class="graf--italic">
                    raw
                   </i>
                  </b>
                  directory that you have created, put your audio files and we will use this audio file later.
                 </p>
                 <p class="graf--p">
                  If you want to stream an audio file then you have to allow internet permission in the
                  <b class="graf--bold">
                   <i class="graf--italic">
                    AndroidManifest.xml
                   </i>
                  </b>
                  file.
                 </p>
                 <pre><code class="language-java graf graf--code">&lt;uses-permission android:name="android.permission.INTERNET" /&gt;</code></pre>
                 <p class="graf--p">
                  Now, to play an audio file from your resource directory(
                  <i class="graf--italic">
                   raw
                  </i>
                  ), just add the below two lines of code and you are good to go with your two-liner music app.
                 </p>
                 <pre><code class="language-java graf graf--code">var mediaPlayer: MediaPlayer? = MediaPlayer.create(context, R.raw.sample_media)
mediaPlayer?.start() // no need to call prepare(); create() does that for you</code></pre>
                 <p class="graf--p">
                  Run your application and enjoy the music:)
                 </p>
                 <p class="graf--p">
                  In the case of playing music from the file system, you can use the
                  <i class="graf--italic">
                   getDataSource()
                  </i>
                  method and pass your URI as a parameter to it.
                 </p>
                 <pre><code class="language-java graf graf--code">val sampleUri: Uri = .... // your uri here
val mediaPlayer: MediaPlayer? = MediaPlayer().apply {
    setAudioStreamType(AudioManager.STREAM_MUSIC)
    setDataSource(applicationContext, sampleUri) //to set media source and send the object to the initialized state
    prepare() //to send the object to prepared state
    start() //to start the music and send the object to the started state
}</code></pre>
                 <p class="graf--p">
                  Also, to play some media file from an URL, you can do so by using the above procedure of URI and in the place of URI you can put the URL of the audio file.
                 </p>
                 <pre><code class="language-java graf graf--code">val sampleUrl = "http://........" // your URL here
val mediaPlayer: MediaPlayer? = MediaPlayer().apply {
    setAudioStreamType(AudioManager.STREAM_MUSIC) //to send the object to the initialized state
    setDataSource(sampleUrl) //to set media source and send the object to the initialized state
    prepare() //to send the object to the prepared state, this may take time for fetching and decoding
    start() //to start the music and send the object to started state
}</code></pre>
                 <p class="graf--p">
                  In the above example, we are lacking some of the recommended steps i.e. we are not releasing the object after using it. Also, we are not taking care of all the states of the MediaPlayer. So, let's look at some advanced example of MediaPlayer by using all the functionalities.
                 </p>
                 <h4 class="graf--h3">
                  More advanced example
                 </h4>
                 <p class="graf--p">
                  In this example, we will be building one media player and in that media player, we can play, pause, and stop the media file. Also, we can move the seek bar to a certain position to play music from that position. In this example, I will be focusing on the logic part only. So, let's get started.
                 </p>
                 <p class="graf--p">
                  In your
                  <b class="graf--bold">
                   <i class="graf--italic">
                    app/res/raw
                   </i>
                  </b>
                  directory, paste your audio file.
                 </p>
                 <p class="graf--p">
                  Now, make three buttons for Play, Pause, and Stop. At the same time, you can add one seek bar to show the timer of the audio file(this is an optional step).
                 </p>
                 <p class="graf--p">
                  Now, in the
                  <i class="graf--italic">
                   MainActivity.kt
                  </i>
                  file, you need to make the object of the MediaPlayer.
                 </p>
                 <pre><code class="language-java graf graf--code">private lateinit var mediaPlayer: MediaPlayer</code></pre>
                 <p class="graf--p">
                  Now, for the play button, there are two cases:
                 </p>
                 <ol>
                  <li>
                   <b class="graf--bold">
                    The audio is in the
                    <i class="graf--italic">
                     paused state
                    </i>
                    :
                   </b>
                   When the audio is in the
                   <i class="graf--italic">
                    paused state
                   </i>
                   , then you have to find the current position of the audio by using the getC
                   <i class="graf--italic">
                    urrentPosition
                   </i>
                   and then start the media player.
                  </li>
                  <li>
                   <b class="graf--bold">
                    The audio is in the prepared state:
                   </b>
                   When the audio is in the
                   <i class="graf--italic">
                    prepared state,
                   </i>
                   then you can start the audio by using the start() method.
                  </li>
                 </ol>
                 <p class="graf--p">
                  Following is the code for the same:
                 </p>
                 <pre><code class="language-java graf graf--code">// Start the media player
playBtn.setOnClickListener{
    if(pause){ //initially, pause is set to false
        mediaPlayer.seekTo(mediaPlayer.currentPosition)
        mediaPlayer.start()
        pause = false
        //playing audio when in paused state
    }else{
        mediaPlayer = MediaPlayer.create(applicationContext,R.raw.demo)
        mediaPlayer.start()
        //playing audio when in prepared state
    }
}</code></pre>
                 <p class="graf--p">
                  For the pause button, there is only one case i.e. if the audio is playing, then you just have to pause the audio by using the
                  <i class="graf--italic">
                   pause()
                  </i>
                  method. Following is the code for the same:
                 </p>
                 <pre><code class="language-java graf graf--code">if(mediaPlayer.isPlaying){
    mediaPlayer.pause()
    pause = true
    //audio is paused here
}</code></pre>
                 <p class="graf--p">
                  For the stop button, you have to check if the audio is still playing or in the paused state because before going to the stopped state the audio might be in the
                  <i class="graf--italic">
                   started
                  </i>
                  or in the
                  <i class="graf--italic">
                   paused state
                  </i>
                  . If it is so, then
                  <i class="graf--italic">
                   stop()
                  </i>
                  ,
                  <i class="graf--italic">
                   reset()
                  </i>
                  , and finally
                  <i class="graf--italic">
                   release()
                  </i>
                  the player. Following is the code for the same:
                 </p>
                 <pre><code class="language-java graf graf--code">if(mediaPlayer.isPlaying || pause.equals(true)){
    pause = false
    mediaPlayer.stop()
    mediaPlayer.reset()
    mediaPlayer.release()
    //audio is stopped here
}</code></pre>
                 <p class="graf--p">
                  That's it. You are good to go with MediaPlayer.
                 </p>
                 <h4 class="graf--h3">
                  Closing note
                 </h4>
                 <p class="graf--p">
                  In this blog, we learned about MediaPlayer and how to use it. We saw the lifecycle of a MediaPlayer object. We saw the difference between prepare() and prepareAsync(). At last, we saw some examples of MediaPlayer.
                 </p>
                 <p class="graf--p">
                  Hope you learned something new today.
                 </p>
                 <p class="graf--p">
                  Have a look at our Android tutorials
                  <b class="graf--bold">
                   <span class="">
                    <a class="markup--anchor" href="https://mindorks.com/android-tutorial" target="_blank">
                     here
                    </a>
                   </span>
                  </b>
                  .
                 </p>
                 <p class="graf--p">
                  Do share this blog with your fellow developers to spread the knowledge. You can read more blogs on Android on our
                  <span class="">
                   <a class="markup--anchor" href="https://blog.mindorks.com/" target="_blank">
                    blogging website
                   </a>
                  </span>
                  .
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   <a class="markup--anchor" href="https://bootcamp.mindorks.com/" target="_blank">
                    Apply Now: MindOrks Android Online Course and Learn Advanced Android
                   </a>
                  </b>
                 </p>
                 <p class="graf--p">
                  Happy Learning :)
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Team MindOrks!
                  </b>
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Also, Letâ€™s connect on
                  </b>
                  <b class="graf--bold">
                   <span class="">
                    <a class="markup--anchor" href="https://twitter.com/hiii_sumit" target="_blank">
                     Twitter
                    </a>
                   </span>
                   ,
                  </b>
                  <b class="graf--bold">
                   <span class="">
                    <a class="markup--anchor" href="https://www.linkedin.com/in/mishra3452/" target="_blank">
                     Linkedin
                    </a>
                   </span>
                   ,
                  </b>
                  <b class="graf--bold">
                   <span class="">
                    <a class="markup--anchor" href="https://github.com/mishra3452" target="_blank">
                     Github
                    </a>
                   </span>
                   , and
                  </b>
                  <b class="graf--bold">
                   <span class="">
                    <a class="markup--anchor" href="https://www.facebook.com/mishra3452" target="_blank">
                     Facebook
                    </a>
                   </span>
                  </b>
                 </p>
                </div>
               </div>
              </div>
             </section>
            </div>
           </div>
          </div>
         </article>
        </div>
       </div>
       <div class="ui divider">
       </div>
      </div>
      <div class="stretched fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui large center aligned header" style="padding-top:20px">
        Recommended for You
       </div>
      </div>
      <div class="fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui centered grid">
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/using-exoplayer-to-play-video-and-audio-in-android-like-a-pro/">
          <img alt="Using Exoplayer to play Video and Audio in Android like a Pro" class="ui centered image" src="/images/using-exoplayer-to-play-video-and-audio-in-android-like-a-pro-banner-1596b1f74d8d8382.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Using Exoplayer to play Video and Audio in Android like a Pro
           </div>
           <div class="meta">
            24th May 2019
           </div>
           <div class="description">
            In this blog, we will learn how to use ExoPlayer like a pro. ExoPlayer is a library used to play audio and video in Android apps. You can customize the ExoPlayer according to your needs. So, let's learn how to use ExoPlayer.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/how-to-convert-a-kotlin-source-file-to-a-java-source-file/">
          <img alt="How to convert a Kotlin source file to a Java source file?" class="ui centered image" src="/images/how-to-convert-a-kotlin-source-file-to-a-java-source-file-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            How to convert a Kotlin source file to a Java source file?
           </div>
           <div class="meta">
            21st September 2019
           </div>
           <div class="description">
            In this blog, we will learn how to convert a Kotlin source file to a Java source file. We will do the file conversion by two methods. So, let's see how.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/play-with-flexbox-layout-for-android/">
          <img alt="Play with Flexbox-Layout for Android" class="ui centered image" src="/images/flexbox_feature_image.jpg" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Play with Flexbox-Layout for Android
           </div>
           <div class="meta">
            26th January 2019
           </div>
           <div class="description">
            Learn about Google's library Flexbox layout for Android. FlexboxLayout is a library project which brings the similar capabilities of CSS Flexible Box Layout Module to Android.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/how-to-deobfuscate-an-android-stacktrace-using-mapping-file/">
          <img alt="How to deobfuscate an Android stacktrace using mapping file ?" class="ui centered image" src="/images/how-to-deobfuscate-an-android-stack-trace-using-a-mapping-file-banner.jpg" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            How to deobfuscate an Android stacktrace using mapping file ?
           </div>
           <div class="meta">
            30th December 2019
           </div>
           <div class="description">
            In this blog, we are going to learn how to retrace your stacktrace using the mapping file with detailed steps.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/using-local-properties-file-to-avoid-api-keys-check-in-into-version-control-system/">
          <img alt="Using local.properties file to avoid API Keys check-in into Version ControlÂ System" class="ui centered image" src="/images/using-localproperties-banner-image.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Using local.properties file to avoid API Keys check-in into Version ControlÂ System
           </div>
           <div class="meta">
            3rd April 2020
           </div>
           <div class="description">
            This blog describes how to use the local.properties file in the Android Gradle system to avoid local or user-specific information such as API keys to be checked into the Version Control System.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/how-to-open-a-pdf-file-in-android-programmatically/">
          <img alt="How to open a PDF file in Android programmatically?" class="ui centered image" src="/images/how-to-open-a-pdf-file-in-android-programmatically-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            How to open a PDF file in Android programmatically?
           </div>
           <div class="meta">
            17th June 2019
           </div>
           <div class="description">
            In this blog, we will learn how to open a PDF file i.e. Portable Document Format file in Android programmatically. Since PDF files are the most used document file format, so, using a PDF file in our application can be a good way of displaying some documents in our application. Let's find, how to open a PDF file in Android programmatically.
           </div>
          </div>
         </a>
        </div>
       </div>
      </div>
     </div>
    </div>
    <div style="background:#fff">
     <footer class="content-container">
      <div class="ui centered padded grid" style="padding-top:40px;background:linear-gradient(to right,#c4e0e0,#e5f1f1)">
       <h2 class="ui huge icon center aligned header">
        <div class="content">
         Connect With Your Mentors
        </div>
       </h2>
       <div class="centered row">
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Janishar Ali" class="ui medium circular image" src="/assets/ali.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://janisharali.com" target="_blank">
             Janishar Ali
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://janisharali.com" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/janisharali" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Amit Shekhar" class="ui medium circular image" src="/assets/amit.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://amitshekhar.me" target="_blank">
             Amit Shekhar
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://amitshekhar.me" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/amitiitbhu" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
      <div class="ui divider" style="margin:unset">
      </div>
      <h5 class="ui header" style="padding:16px;margin:unset;color:#555">
       <i aria-hidden="true" class="copyright icon">
       </i>
       <div class="content">
        Copyright 2022, MindOrks Nextgen Private Limited
       </div>
      </h5>
     </footer>
    </div>
   </div>
  </div>
  <script type="text/javascript">
   window.hljs.initHighlightingOnLoad()
  </script>
 </body>
</html>