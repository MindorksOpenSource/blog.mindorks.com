<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>
   Understanding Canvas API in Android
  </title>
  <meta charset="utf-8"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="minimum-scale=1,initial-scale=1,width=device-width,shrink-to-fit=no" name="viewport"/>
  <link href="https://blog.mindorks.com/understanding-canvas-api-in-android" rel="canonical"/>
  <meta content="986249072156-dabps0lf90smluddrk5rkqsdjghk3hd3.apps.googleusercontent.com" name="google-signin-client_id"/>
  <meta content="android, learn android app development, android app development courses, android blogs, android tutorial" name="keywords"/>
  <meta content="Understanding Canvas API in Android" property="og:title"/>
  <meta content="website" property="og:type"/>
  <meta content="https://blog.mindorks.com/understanding-canvas-api-in-android" property="og:url"/>
  <meta content="/images/canvas-api-banner.png" property="og:image"/>
  <meta content="In this blog, we will see how we can use canvas to draw our own custom shape and drawings ." property="og:description"/>
  <meta content="Understanding Canvas API in Android" property="twitter:title"/>
  <meta content="In this blog, we will see how we can use canvas to draw our own custom shape and drawings ." name="twitter:description"/>
  <meta content="/images/canvas-api-banner.png" name="twitter:image:src"/>
  <meta content="summary_large_image" name="twitter:card"/>
  <meta content="@MindorksNextGen" name="twitter:site"/>
  <meta content="In this blog, we will see how we can use canvas to draw our own custom shape and drawings ." name="description"/>
  <meta content="1620001391374687" property="fb:app_id"/>
  <link href="/styles/vendor-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link href="/styles/app-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link as="style" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" onload='this.onload=null,this.rel="stylesheet"' rel="preload"/>
  <noscript>
   <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
  </noscript>
  <script type="text/javascript">
     </script>
  <script async="" src="https://www.google-analytics.com/analytics.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-91686131-1","auto"),ga("require","cleanUrlTracker"),ga("require","eventTracker"),ga("require","impressionTracker"),ga("require","outboundLinkTracker"),ga("require","urlChangeTracker"),ga("require","maxScrollTracker"),ga("require","mediaQueryTracker"),ga("require","outboundFormTracker"),ga("require","outboundLinkTracker"),ga("require","pageVisibilityTracker"),ga("require","socialWidgetTracker"),ga("require","urlChangeTracker"),ga("send","pageview")
  </script>
  <script defer="defer" src="/assets/autotrack.js" type="text/javascript">
  </script>
  <script src="/assets/highlight.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/vendor-bundle-1.8.6.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/app-bundle-1.8.6.js" type="text/javascript">
  </script>
 </head>
 <body>
  <div id="root">
   <div class="screen app-load-content" data-reactroot="">
    <div class="ui centered grid">
     <div class="row" style="padding:0">
      <div class="ui fixed menu navbar huge borderless grid" style="background-color:#fff;height:60px">
      </div>
     </div>
     <div class="centered computer only row" style="padding:0">
      <div class="ui fixed top menu navbar huge borderless grid header-container" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="right menu">
        <a class="item" href="https://janisharali.com" target="_blank">
         Mentor Ali
        </a>
        <a class="item" href="https://amitshekhar.me" target="_blank">
         Mentor Amit
        </a>
       </div>
      </div>
     </div>
     <div class="tablet only mobile only row" style="padding:0">
      <div class="ui fixed top navbar huge menu borderless" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="item">
       </div>
      </div>
     </div>
    </div>
    <div class="header-height">
    </div>
    <div aria-live="assertive" class="redux-toastr">
     <div>
      <div class="top-left">
      </div>
      <div class="top-right">
      </div>
      <div class="top-center">
      </div>
      <div class="bottom-left">
      </div>
      <div class="bottom-right">
      </div>
      <div class="bottom-center">
      </div>
     </div>
    </div>
    <div class="content-container theme">
     <div class="ui centered one column grid" style="padding-bottom:80px;background-color:#fff">
      <div class="ten wide computer fifteen wide mobile fifteen wide tablet column" style="margin-top:50px">
       <div>
        <div class="blog-page-author">
         <div class="ui small header">
          <img alt="Himanshu Singh" class="ui circular image" src="https://lh3.googleusercontent.com/a-/AOh14Ghy8H-FJrgWB2TcxHCOKWxWEQB4AiklYADGTydu4nE=s96-c?sz=300"/>
          <div class="content">
           Himanshu Singh
           <div class="sub header" style="margin-top:5px">
            17th February 2020
           </div>
          </div>
         </div>
        </div>
        <div id="content">
         <article class="template">
          <div class="postContent">
           <div class="notesSource">
            <div class="postField postField--body" id="editor">
             <section class="section--first section--last">
              <div class="section-divider layoutSingleColumn-template">
               <hr class="section-divider"/>
              </div>
              <div class="section-content">
               <div class="section-inner layoutSingleColumn-template">
                <div>
                 <h1 class="graf--h1">
                  Understanding Canvas API in Android
                 </h1>
                 <div class="graf-image graf-caption">
                  <img alt="Understanding Canvas API in Android" class="graf-image" src="/images/canvas-api-banner.png"/>
                 </div>
                 <p class="graf--p">
                  Worked with Custom UI elements that are not present in the Android Widget group and wondered how was it made?
                 </p>
                 <p class="graf--p">
                  It's the magic of Canvas API which is present in Android. I think the name canvas itself defines that its a playground for artists and you have to show your best art.
                 </p>
                 <p class="graf--p">
                  In this blog, we are going to learn about how we are going to learn about,
                 </p>
                 <ul>
                  <li>
                   What is Canvas API in Android?
                  </li>
                  <li>
                   Understanding the canvas implementation.
                  </li>
                  <li>
                   How we can make out own UI element using canvas API?
                  </li>
                 </ul>
                 <h4 class="graf--h3">
                  What are Canvas API?
                 </h4>
                 <p class="graf--p">
                  Canvas API in Android is a drawing framework which helps us to draw custom design like line, circle or even a rectangle. Using these we can make any shape whichever we want according to design.
                 </p>
                 <p class="graf--p">
                  The drawing of canvas happens in Bitmap, where we draw the outline and then the Paint API helps to fill color and whatever style we need.
                 </p>
                 <blockquote class="graf--blockquote">
                  Canvas helps to create the skeleton and Paint helps in beautifying the design.
                 </blockquote>
                 <h4 class="graf--h3">
                  Understanding the canvas implementation
                 </h4>
                 <p class="graf--p">
                  So, since we know Canvas helps in designing views, let's understand the way the view gets rendered. There are layout methods that get called, they are
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Understanding Canvas API in Android" class="graf-image" src="/images/view-layout-image.png"/>
                 </div>
                 <p class="graf--p">
                  Here, onMeasure() - measures the size of the view and the children present there, onLayout() - helps in setting the size and onDraw() is the one which helps in drawing on the view.
                 </p>
                 <p class="graf--p">
                  So, in onDraw() the canvas is used to draw using its pre-contained methods, like drawLine, drawArc, etc. But, how does canvas actually draws itself on the screen?
                 </p>
                 <p class="graf--p">
                  Canvas follows the coordinate system to draw itself on the screen. It considers the phone screen as its own coordinate system.
                 </p>
                 <p class="graf--p">
                  Check the image below to get the feel of it,
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Understanding Canvas API in Android" class="graf-image" src="/images/phone-co-ordinate.png"/>
                 </div>
                 <p class="graf--p">
                  So, here
                 </p>
                 <ul>
                  <li>
                   The top left corner represents the (0,0) point in the coordinate system.
                  </li>
                  <li>
                   and bottom right is then (x,y) point in the coordinate system.
                  </li>
                  <li>
                   so, in that way, the center of the screen is represented by (x/2,y/2) point.
                  </li>
                 </ul>
                 <p class="graf--p">
                  Till now, we learnt how we can use Canvas and what factors do we need to take care of while drawing on canvas. Now, let's see how we can actually draw using canvas.
                 </p>
                 <p class="graf--p">
                  To draw our own custom drawing , we can do it in own view classes. Here I will create my own CanvasView,
                 </p>
                 <pre><code class="language-java graf graf--code">class CanvasView @JvmOverloads constructor(
    context: Context,
    attrs: AttributeSet? = null,
    defStyleAttr: Int = 0
) : View(context, attrs, defStyleAttr) {


   
    override fun onDraw(canvas: Canvas?) {
        super.onDraw(canvas)
        //here we have to use the canvas API to draw
    }
}</code></pre>
                 <p class="graf--p">
                  As you can see, in onDraw() we will be drawing my own design.
                 </p>
                 <p class="graf--p">
                  Now, to draw on Canvas we need the
                  <b class="graf--bold">
                   Paint
                  </b>
                  object in the view class. So to define paint,
                 </p>
                 <p class="graf--p">
                  to define paint, I will use
                 </p>
                 <pre><code class="language-java graf graf--code">private val myViewPaint =
    Paint().apply {
        isAntiAlias = true
        color = Color.BLACK
        style = Paint.Style.STROKE
    }</code></pre>
                 <p class="graf--p">
                  Here, I have initialized the paint object and set a custom property to it like color and style to store the information to draw on the canvas.
                 </p>
                 <blockquote class="graf--blockquote">
                  isAntiAlias - is used to make the edges smooth while drawing.
                 </blockquote>
                 <p class="graf--p">
                  Now, let's start by drawing a line on canvas. In, onDraw() i will write,
                 </p>
                 <pre><code class="language-java graf graf--code">canvas?.drawLine(0f, 5f, 0f, 10f, myViewPaint)</code></pre>
                 <p class="graf--p">
                  Here, drawLine() takes two-point co-ordinate and the paint to draw itself. In the above code, 0f and 5f are x and y coordinate for the first point and 0f and 10f are the coordinate for the second point.
                 </p>
                 <p class="graf--p">
                  Similarly, in place of passing point co-ordinate we can also use
                  <b class="graf--bold">
                   Path()
                  </b>
                  to draw the custom shape.
                 </p>
                 <p class="graf--p">
                  Path is used to draw shapes by passing them what to do from point to point. To draw a line using Path we have to use,
                 </p>
                 <pre><code class="language-java graf graf--code">val path = Path().apply {
    moveTo(x1, y1)
    lineTo(x2, y2)
    close()
}
canvas?.drawPath(path, myViewPaint) </code></pre>
                 <p class="graf--p">
                  Here, in the above code, we have used a path to draw a line. let me break it down line by line to make you understand.
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   moveTo
                  </b>
                  - this is used to move the drawing tip from one point to another. So here the drawing tip has moved to (x1, y1).
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   lineTo
                  </b>
                  - this is used to draw a line to (x2, y2) from (x1,y1). As we have moved to (x1, y1), it would be our starting point to draw the line.
                 </p>
                 <p class="graf--p">
                  PS. Using Path you can draw any type of shape you desire.
                 </p>
                 <p class="graf--p">
                  and now, just to draw the line using the path, we need to use canvas.drawPath and not canvas.drawLine as we used in earlier code.
                 </p>
                 <p class="graf--p">
                  Similarly, to draw a circle, we use
                 </p>
                 <pre><code class="language-java graf graf--code">canvas?.drawCircle(x,y,radius,myViewPaint)</code></pre>
                 <p class="graf--p">
                  where x and y are the coordinate of the point and we pass the radius of the circle.
                 </p>
                 <p class="graf--p">
                  Now, to draw this finally on screen, we call invalidate() in onDraw of the view.
                 </p>
                 <p class="graf--p">
                  To use the above View class in Activity we just use following in the XML file,
                 </p>
                 <pre><code class="language-java graf graf--code">&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"&gt;

    &lt;app.himanshu.playground.CanvasView
            android:layout_width="match_parent"
            android:layout_height="match_parent" /&gt;
&lt;/LinearLayout&gt;</code></pre>
                 <pre><code class="language-java graf graf--code"></code></pre>
                 <p class="graf--p">
                  Points to remember,
                 </p>
                 <ul>
                  <li>
                   As the drawing happens on the main UI thread, avoid re-drawing in the same section for too long.
                  </li>
                  <li>
                   Don't do a lot of calculations in onDraw()
                  </li>
                  <li>
                   Canvas works on pixels and not dp.
                  </li>
                 </ul>
                 <p class="graf--p">
                  Happy learning.
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Team MindOrks :)
                  </b>
                 </p>
                </div>
               </div>
              </div>
             </section>
            </div>
           </div>
          </div>
         </article>
        </div>
       </div>
       <div class="ui divider">
       </div>
      </div>
      <div class="stretched fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui large center aligned header" style="padding-top:20px">
        Recommended for You
       </div>
      </div>
      <div class="fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui centered grid">
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/imagedecoder-in-android/">
          <img alt="Understanding ImageDecoder API in Android" class="ui centered image" src="/images/image-decoder-banner-e9cba586f624d6a6.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Understanding ImageDecoder API in Android
           </div>
           <div class="meta">
            24th June 2020
           </div>
           <div class="description">
            In this blog, we are going to see how we can use ImageDecoder API in Android with its use-case. We will also see how to handle errors and transformations.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/color-palette-in-android/">
          <img alt="Color Palette API in Android" class="ui centered image" src="/images/color-pallete-api.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Color Palette API in Android
           </div>
           <div class="meta">
            24th July 2019
           </div>
           <div class="description">
            In this blog, we will learn about the Color Palette API in Android. Here we will see how can we generate dynamic colors based on an image.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/easy-sms-verification-in-android-sms-user-consent-api/">
          <img alt="Easy SMS Verification in Android: SMS User Consent API" class="ui centered image" src="/images/easy-sms-verification-android-sms-user-consent-api-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Easy SMS Verification in Android: SMS User Consent API
           </div>
           <div class="meta">
            9th August 2019
           </div>
           <div class="description">
            In this blog, we will learn how to implement SMS verification using the SMS User Consent API in Android. This API is used to read only the message containing the verification code and will automatically extract the code from the message by taking permission from the user with the help of a prompt.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/securing-api-keys-using-android-ndk/">
          <img alt="Securing API Keys using Android NDK (Native Development Kit)" class="ui centered image" src="/images/securing-api-keys-using-android-ndk-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Securing API Keys using Android NDK (Native Development Kit)
           </div>
           <div class="meta">
            2nd October 2019
           </div>
           <div class="description">
            In this blog, we will learn how to secure our API Keys that are used in Android applications using the Android NDK (Native Development Kit). We have created a detailed blog of securing the API Keys.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/android-auto-backup-api/">
          <img alt="Auto Backup API in Android" class="ui centered image" src="/images/android-auto-backup-banner-70b0b8fb204b0731.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Auto Backup API in Android
           </div>
           <div class="meta">
            3rd June 2020
           </div>
           <div class="description">
            Android provides a very handy API to deal with user's local data backups. We'll learn how to enable, customize, use and test Android's Auto Backup API.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/using-gps-location-manager-in-android-android-tutorial/">
          <img alt="Using Fused Location API To Fetch Current Location" class="ui centered image" src="/images/using-gps-location-manager-in-android-android-tutorial-banner.jpg" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Using Fused Location API To Fetch Current Location
           </div>
           <div class="meta">
            7th June 2019
           </div>
           <div class="description">
            In this blog, we will learn how to update the location using the GPS of a mobile device. We will perform an example to check the current location of the user.
           </div>
          </div>
         </a>
        </div>
       </div>
      </div>
     </div>
    </div>
    <div style="background:#fff">
     <footer class="content-container">
      <div class="ui centered padded grid" style="padding-top:40px;background:linear-gradient(to right,#c4e0e0,#e5f1f1)">
       <h2 class="ui huge icon center aligned header">
        <div class="content">
         Connect With Your Mentors
        </div>
       </h2>
       <div class="centered row">
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Janishar Ali" class="ui medium circular image" src="/assets/ali.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://janisharali.com" target="_blank">
             Janishar Ali
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://janisharali.com" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/janisharali" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Amit Shekhar" class="ui medium circular image" src="/assets/amit.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://amitshekhar.me" target="_blank">
             Amit Shekhar
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://amitshekhar.me" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/amitiitbhu" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
      <div class="ui divider" style="margin:unset">
      </div>
      <h5 class="ui header" style="padding:16px;margin:unset;color:#555">
       <i aria-hidden="true" class="copyright icon">
       </i>
       <div class="content">
        Copyright 2022, MindOrks Nextgen Private Limited
       </div>
      </h5>
     </footer>
    </div>
   </div>
  </div>
  <script type="text/javascript">
   window.hljs.initHighlightingOnLoad()
  </script>
 </body>
</html>