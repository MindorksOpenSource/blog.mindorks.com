<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>
   Gradle Tips and Tricks for Android
  </title>
  <meta charset="utf-8"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="minimum-scale=1,initial-scale=1,width=device-width,shrink-to-fit=no" name="viewport"/>
  <link href="https://blog.mindorks.com/gradle-tips-and-tricks-for-android" rel="canonical"/>
  <meta content="986249072156-dabps0lf90smluddrk5rkqsdjghk3hd3.apps.googleusercontent.com" name="google-signin-client_id"/>
  <meta content="android, learn android app development, android app development courses, android blogs, android tutorial" name="keywords"/>
  <meta content="Gradle Tips and Tricks for Android" property="og:title"/>
  <meta content="website" property="og:type"/>
  <meta content="https://blog.mindorks.com/gradle-tips-and-tricks-for-android" property="og:url"/>
  <meta content="/images/gradle-tips-tricks-banner-image.png" property="og:image"/>
  <meta content="In this blog, we will learn some Gradle tips and tricks for Android. After reading this blog, you will be able to use various features of Gradle that will help you in developing an Android App faster than before." property="og:description"/>
  <meta content="Gradle Tips and Tricks for Android" property="twitter:title"/>
  <meta content="In this blog, we will learn some Gradle tips and tricks for Android. After reading this blog, you will be able to use various features of Gradle that will help you in developing an Android App faster than before." name="twitter:description"/>
  <meta content="/images/gradle-tips-tricks-banner-image.png" name="twitter:image:src"/>
  <meta content="summary_large_image" name="twitter:card"/>
  <meta content="@MindorksNextGen" name="twitter:site"/>
  <meta content="In this blog, we will learn some Gradle tips and tricks for Android. After reading this blog, you will be able to use various features of Gradle that will help you in developing an Android App faster than before." name="description"/>
  <meta content="1620001391374687" property="fb:app_id"/>
  <link href="/styles/vendor-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link href="/styles/app-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link as="style" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" onload='this.onload=null,this.rel="stylesheet"' rel="preload"/>
  <noscript>
   <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
  </noscript>
  <script type="text/javascript">
   window.__PRELOADED_STATE__={toastr:{toastrs:[],confirm:null},blogData:{data:{},latestBlogs:null,isFetching:!0,isFetchingLatestBlogs:!1,currentCategory:"",categories:[]},contactData:{formData:{email:"",name:"",phone:"",message:"",isWriting:!1,isNameError:!1,isEmailError:!1,isPhoneError:!1,isMessageError:!1,dismissMsg:!1},successMessage:null,errorMessage:null,isSending:!1},communityData:{formData:{email:"",isEmailError:!1,isWriting:!1,isSending:!1,dismissMsg:!1},successMessage:null,errorMessage:null},blogPageData:{blogId:241,data:{id:241,title:"Gradle Tips and Tricks for Android",description:"In this blog, we will learn some Gradle tips and tricks for Android. After reading this blog, you will be able to use various features of Gradle that will help you in developing an Android App faster than before.",text:'<h1 class="graf--h1">Gradle Tips and Tricks for Android</h1> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/gradle-tips-tricks-banner-image.png class=\'graf-image\' alt=\'Gradle Tips and Tricks for Android\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">Gone are the days when you will be watching some cool videos and enjoying the coffee just after you have started the build process of your Android Project because it takes ages to complete. The current state of build automation tools handles several aspects of building project more efficiently than in past and <b class="graf--bold">Gradle </b>is one of those modern build automation tools. </p><p class="graf--p">But at the same time, if you are using Gradle then you will encounter a number of Gradle error and to be honest, this is very common for a new Android Developer.  So, in this blog, we will look upon some of the <b class="graf--bold">Gradle Tips and Tricks</b> that can be used to utilize the functionalities of <b class="graf--bold">Gradle</b> in Android App Development. We will understand Gradle in such a way that whenever there is a Gradle related error in your project, then you will remove the error by yourselves and not by searching for answers on StackOverflow.</p><h4 class="graf--h3">What is Gradle?</h4><p class="graf--p">Before moving towards the Gradle tips and tricks, let&#x27;s understand what Gradle is? Android Studio uses <b class="graf--bold"><a class="markup--anchor" target="_blank" href="http://www.gradle.org/">Gradle</a></b>, <b class="graf--bold">an advanced build toolkit, to automate and manage the build process while allowing you to define flexible custom build configurations</b>. So, with the help of Gradle, you can do the building, testing and deployment of your application and the files which are responsible for this type of automation is the  “<b class="graf--bold">Build.gradle</b>” file. For example, the simple task to copy some images from one place/directory to another can be performed by Gradle build script before the actual build process happens. </p><p class="graf--p">Android projects need Gradle for putting source code and resources together. The build process of an Android app summarized in the figure below :</p><p class="graf--p">Picture courtesy : Android Developer website</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/gradle-tips-tricks-build-process-image.png class=\'graf-image\' alt=\'Gradle Tips and Tricks for Android\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">Following steps are performed:  </p><ol><li>Firstly, your source code is converted into DEX(Dalvik Executable) files. These DEX files include the bytecode that is required to run your app on Android. Dex file is something like the <b class="graf--bold"><i class="graf--italic">.class</i></b> file.</li><li>There can be more than one DEX files, and these DEX files are combined with the resources with the help of APK Packager.   </li><li>After that, the APK Packager signs your APK using either the debug or release keystore.     </li><li>If you are building an app for testing and profiling, then the packager signs your app with the debug keystore.       </li><li>If you are building an app for the release version, then the packager signs your app with the release keystore.      </li><li>Before generating your final APK, the packager optimize your app to remove the useless code.   </li></ol><p class="graf--p">When the build process is finished, you will get the APK of the project.</p><h4 class="graf--h3">Build Configuration Files</h4><p class="graf--p">When you start a new project on Android Studio, then it will create some files for you. Let&#x27;s understand the scope and purpose of these files. Following is the project view of a typical Android project: </p><p class="graf--p">Picture courtesy : Android Developer website</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/gradle-tips-tricks-project-structure-image.png class=\'graf-image\' alt=\'Gradle Tips and Tricks for Android\' />\n\t\t\t\t\t\t\t\t</div ><ul><li><b class="graf--bold">The Gradle settings file: </b>The <b class="graf--bold"><i class="graf--italic">settings.gradle </i></b>file is located in the root directory. It consists of all the modules that are present in the app.</li><li><b class="graf--bold">The top-level build file: </b>The top-level <b class="graf--bold"><i class="graf--italic">build.gradle</i></b> file, located in the root directory. If you want to apply the same configuration to all modules of your project then you should define these in this file..</li><li><b class="graf--bold">The module-level build file: </b>The module-level <b class="graf--bold"><i class="graf--italic">build.gradle </i></b>file, located in each <b class="graf--bold"><i class="graf--italic">project/module/ </i></b>directory, allows us to configure build settings for the specific module it is located in. </li><li><b class="graf--bold">Gradle properties file: </b>To specify settings for the Gradle toolkit, you can specify these settings in the Gradle properties file.<b class="graf--bold"><i class="graf--italic"> </i></b></li></ul><h4 class="graf--h3">Gradle Tips and Tricks  </h4><p class="graf--p">Now, we are done with the introduction of Gradle. Let&#x27;s focus on some cool tips and trick of Gradle for Android. Some of them are listed below:</p><h4 class="graf--h3"><b class="graf--bold">1. Add build dependencies: </b></h4><p class="graf--p">An Android project can have more than one module and it is possible that each module may have some dependency or it uses some library. To add more and more functionalities to your app, you must include some dependencies.  </p><p class="graf--p">To add a dependency to your project, you can add the dependency in the <b class="graf--bold"><i class="graf--italic">dependencies </i></b>section of your <b class="graf--bold"><i class="graf--italic">build.gradle</i></b> file. </p><p class="graf--p">For example, to add dependencies in your file add the dependency in the <code class="graf--code-inline"><b class="graf--bold"><i class="graf--italic">build.gradle:</i></b></code></p><pre><code class="language-java graf graf--code">apply plugin: \'com.android.application\'\n\nandroid { ... }\n\ndependencies {\n    // Dependency on a local library module\n    implementation project(":mylibrary")\n\n    // Dependency on local binaries\n    implementation fileTree(dir: \'libs\', include: [\'*.jar\'])\n\n    // Dependency on a remote binary\n    implementation \'com.example.android:app-magic:12.3\'\n}</code></pre><h4 class="graf--h3"><b class="graf--bold">2. Manage dependencies version : </b></h4><p class="graf--p">In a multi-module project, there are a number of dependencies used and due to this, the<b class="graf--bold"> </b>biggest problem that arises is the conflict in the version of the dependencies i.e you should have the dependencies with the same version. Let&#x27;s say our module level <b class="graf--bold"><i class="graf--italic">build.gradle </i></b>file looks like :</p><pre><code class="language-java graf graf--code">apply plugin:\'com.android.application\'\nandroid{\n\n    defaultConfig{...}\n    buildTypes{...}\n    ProductFlavours{...}\n}\n\ndependencies{\n\n    //android supported libraries\n    implementation\'com.android.support:appcompat-v7:28.0.0\'\n    implementation\'com.android.support:design:28.0.0\'\n    implementation\'com.android.support:cardview-v7:28.0.0\'\n        \n    //google play service\n    implementation\'com.google.android.gms:play-services:16.0.1\'\n    implementation\'com.google.android.gms:play-services-fitness:16.0.1\'\n        \n    //other dependencies\n}</code></pre><p class="graf--p">It is very difficult to manage the versions of these dependencies but <b class="graf--bold">Gradle </b>provides <b class="graf--bold"><i class="graf--italic">ext </i></b>block where we can define our common property values and use them in dependencies.</p><pre><code class="language-java graf graf--code">apply plugin: \'com.android.application\'\n        \nandroid {\n    defaultConfig{...}\n    buildTypes{...}\n    ProductFlavours{...}\n}\n\next {\n    supportLibraryVersion = \'28.0.0\'\n    playServiceVersion = \'16.0.1\'\n\n}\n\ndependencies {\n    //android supported libraries\n    implementation "com.android.support:appcompat-v7:$supportLibraryVersion"\n    implementation "com.android.support:design:$supportLibraryVersion"\n    implementation "com.android.support:cardview-v7:$supportLibraryVersion"\n\n    //google play service\n    implementation "com.google.android.gms:play-services:$playServiceVersion"\n    implementation "com.google.android.gms:play-services-fitness:$playServiceVersion"\n\n    //other dependencies\n}</code></pre><p class="graf--p">You can see that in above code, the <b class="graf--bold"><i class="graf--italic">ext </i></b>block contains <b class="graf--bold">playServiceVersion</b> and <b class="graf--bold">supportLibraryVersion</b>. </p><p class="graf--p">Notice that instead of a version number, we added <b class="graf--bold"><i class="graf--italic">$</i></b>  with its version property and also changed single quotes to <b class="graf--bold">double quotes</b>.</p><p class="graf--p">For a multiple module project, you can set the same version by moving the <b class="graf--bold"><i class="graf--italic">ext </i></b>block from module-level <b class="graf--bold"><i class="graf--italic">build.gradle </i></b>to the root-level <b class="graf--bold"><i class="graf--italic">build.gradle</i></b>.</p><pre><code class="language-java graf graf--code">buildscript {\n\n}\n\nallprojects {\n\n}\n\next {\n\n    supportLibraryVersion = \'28.0.0\'\n\n    playServiceVersion = \'16.0.1\'\n\n}</code></pre><p class="graf--p">Now in the <b class="graf--bold"><i class="graf--italic">build.gradle </i></b>file of the different module, use this <b class="graf--bold">supportLibraryVersion</b> and <b class="graf--bold">playServiceVersion</b>.</p><pre><code class="language-java graf graf--code">com.android.support:appcompatv7:$rootProject.supportLibraryVersion</code></pre><h4 class="graf--h3"><b class="graf--bold">3. Optimize your build speed : </b></h4><p class="graf--p">Whenever you build a project, then it takes some time and long build times slow down the development process. The build process is also dependent on the processor speed but if we ignore the hardware part then in order to have a very fast build we can use any of the following techniques : </p><ul><li>Always have an updated Android Studio. This will keep your Android tools up to date and this is done because on every update Android tools receive some build optimization.</li><li>Always avoid compiling and packaging the resources that you aren&#x27;t testing. There may be various packages that can be avoided during package and you should not compile those packages. To do so, you can specify one language resource and screen density for your &quot;<b class="graf--bold"><i class="graf--italic">dev</i></b>&quot; flavor, as shown in the following sample:  </li></ul><pre><code class="language-java graf graf--code">android {\n  ...\n  productFlavors {\n    dev {\n      ...\n      // The following configuration limits the "dev" flavor to using\n      // English stringresources and xxhdpi screen-density resources.\n      resConfigs "en", "xxhdpi"\n    }\n    ...\n  }\n}\n</code></pre><ul><li>If you don&#x27;t need to run a <a class="markup--anchor" target="_blank" href="https://docs.fabric.io/android/crashlytics/overview.html">Crashlytics report</a>, then disable the plugin and speed the build process as follows:  </li></ul><pre><code class="language-java graf graf--code">android {\n    ...\n\n    buildTypes {\n        debug {\n            ext.enableCrashlytics = false\n        }\n     }\n}</code></pre><ul><li>Avoid using a dynamic version of the dependencies in your <b class="graf--bold"><i class="graf--italic">build.gradle </i></b>file. So, don&#x27;t use something like this: <b class="graf--bold"><i class="graf--italic"><code class="graf--code-inline">&#x27;com.android.tools.build:gradle:2.+&#x27;</code></i></b>. Using dynamic version numbers can cause unexpected version updates or difficulty in resolving version differences and this will finally slow down your build process. Always use <b class="graf--bold">static/hard-coded</b> version numbers instead.  </li><li>If your network connection is slow, then build times may suffer when <b class="graf--bold">Gradle</b> attempts to use network resources to resolve dependencies. So, in a weak or slow network connection, use offline mode. To use offline mode, follow the below steps: </li></ul><ol><li>Click on<b class="graf--bold"> File &gt; Settings &gt; Preferences</b>     </li><li>Click on <b class="graf--bold">Build, Execution, Deployment &gt; Gradle</b>.     </li><li>Check the <b class="graf--bold">Offline work</b> checkbox.     </li><li>Click <b class="graf--bold">Apply</b> or <b class="graf--bold">OK</b>.     </li></ol><p class="graf--p">If you&#x27;re building from the command line, pass the <code class="graf--code-inline"><b class="graf--bold"><i class="graf--italic">--offline</i></b></code> option.  </p><h4 class="graf--h3">4. Shrink and Optimize your App </h4><p class="graf--p">To make your app as small as possible, you should enable <b class="graf--bold">shrinking </b>in your project. By using this, you will remove the unused code and resources. Many times you import a lot of libraries and you need only a few of them. So, instead of keeping all those libraries, you should keep only those libraries that are in use. This will reduce the app size to a large extent(a 42 MB app can be reduced to 10 MB by using this process). </p><p class="graf--p">When you build your project using <a class="markup--anchor" target="_blank" href="https://developer.android.com/studio/releases/gradle-plugin#3-4-0">Android Gradle plugin 3.4.0</a> or higher, the plugin no longer uses <b class="graf--bold">ProGuard</b> to perform compile-time code optimization. With the help of <b class="graf--bold"><i class="graf--italic">R8 compiler, </i></b>the following tasks are handled:</p><ul><li><b class="graf--bold">Code shrinking (or tree-shaking):</b> scans for unused classes, fields, methods, and attributes and safely removes these from your app.</li><li><b class="graf--bold">Resource shrinking:</b> by using this, you remove the unused resources from your app.</li><li><b class="graf--bold">Obfuscation:</b> shortens the name of classes and members, which results in reduced DEX file sizes.</li><li><b class="graf--bold">Optimization:</b> inspects and rewrites your code to further reduce the size of your app’s DEX files. The R8 removes the unreachable statements i.e. the statements that are never reached.</li></ul><p class="graf--p">When building the release version of your app, by default, R8 automatically performs the compile-time tasks described above for us.</p><p class="graf--p">When we create a new project in Android Studio, shrinking, obfuscation and optimization are not enabled by default because these compile-time optimizations increase the build time and might introduce some bugs. </p><p class="graf--p">So, it’s best to enable these compile-time tasks when building the final version of our app. Include the following in project-level <b class="graf--bold"><i class="graf--italic">build.gradle </i></b>file.</p><pre><code class="language-java graf graf--code">android {\n    buildTypes {\n        release {\n            // Enables code shrinking, obfuscation, and optimization for only\n            // your project\'s release build type.\n            minifyEnabled true\n\n            // Enables resource shrinking, which is performed by the\n            // Android Gradle plugin.\n            shrinkResources true\n\n            // Includes the default ProGuard rules files that are packaged with\n            // the Android Gradle plugin. To learn more, go to the section about\n            // R8 configuration files.\n            proguardFiles getDefaultProguardFile(\n                    \'proguard-android-optimize.txt\'),\n                    \'proguard-rules.pro\'\n        }\n    }\n    ...\n}</code></pre><h4 class="graf--h3">5. Configure dynamic version codes</h4><p class="graf--p">By default, when Gradle generates APKs for our project, each APK has the same version information, as specified in the module-level <code class="graf--code-inline"><b class="graf--bold"><i class="graf--italic">build.gradle</i></b></code> file.   </p><p class="graf--p">But when you place or upload your app on the Google Play Store, then it doesn&#x27;t allow you to publish the app with the same version number. So, every APK must have some unique <b class="graf--bold">versionCode.</b></p><p class="graf--p">We can do this with custom build logic that assigns a different version code to each APK at build time.  </p><pre><code class="language-java graf graf--code">android {\n  ...\n  defaultConfig {\n    ...\n    versionCode 4\n  }\n  splits {\n    ...\n  }\n}\n\n// Map for the version code that gives each ABI a value.\next.abiCodes = [\'armeabi-v7a\':1, mips:2, x86:3]\n\n// For per-density APKs, create a similar map like this:\n// ext.densityCodes = [\'hdpi\': 1, \'xhdpi\': 2, \'xxhdpi\': 3, \'xxxhdpi\': 4]\n\nimport com.android.build.OutputFile\n\n// For each APK output variant, override versionCode with a combination of\n// ext.abiCodes * 1000 + variant.versionCode. In this example, variant.versionCode\n// is equal to defaultConfig.versionCode. If you configure product flavors that\n// define their own versionCode, variant.versionCode uses that value instead.\nandroid.applicationVariants.all { variant -&gt;\n\n  // Assigns a different version code for each output APK\n  // other than the universal APK.\n  variant.outputs.each { output -&gt;\n\n    // Stores the value of ext.abiCodes that is associated with the ABI for this variant.\n    def baseAbiVersionCode =\n            // Determines the ABI for this variant and returns the mapped value.\n            project.ext.abiCodes.get(output.getFilter(OutputFile.ABI))\n\n    // Because abiCodes.get() returns null for ABIs that are not mapped by ext.abiCodes,\n    // the following code does not override the version code for universal APKs.\n    // However, because we want universal APKs to have the lowest version code,\n    // this outcome is desirable.\n    if (baseAbiVersionCode != null) {\n\n      // Assigns the new version code to versionCodeOverride, which changes the version code\n      // for only the output APK, not for the variant itself. Skipping this step simply\n      // causes Gradle to use the value of variant.versionCode for the APK.\n      output.versionCodeOverride =\n              baseAbiVersionCode * 1000 + variant.versionCode\n    }\n  }\n}</code></pre><h4 class="graf--h3">Conclusion</h4><p class="graf--p">Phew, that was a lot of stuff about Gradle. Now, you are a master in the art of Gradle. </p><p class="graf--p">Gradle is a solid and very customizable build automation system. It makes the life of developers so much better by handling a lot of the nuances around the build system in a graceful manner — making the build system a joy to work with.</p><p class="graf--p">Hopefully, after finishing this blog, you have a solid understanding of how you can use the powerful features of Gradle. </p><p class="graf--p">If you want to learn some more Gradle tips or you want to know more about the build process in Android, then you can find the <a class="markup--anchor" target="_blank" href="https://developer.android.com/studio/build">Google Official Documentation on Gradle</a>.</p><p class="graf--p">Happy Learning :)</p><p class="graf--p"><b class="graf--bold">Team MindOrks</b></p>',author:14897,img_url:"/images/gradle-tips-tricks-banner-image.png",blog_url:"gradle-tips-and-tricks-for-android",likes:0,rank:0,category:1,published_at:"18th May 2019"},author:{id:14897,name:"Admin MindOrks",google_profile_pic:"https://s3.ap-south-1.amazonaws.com/mindorks/website/mindorks-admin.png",fb_profile_pic:null,profile_tagline:"Mindorks is an online software learning platform. It is a community of great programmers.",fb_profile_url:"https://www.facebook.com/mindorks.nextgen/",google_plus_profile_url:"https://mindorks.com",twitter_profile_url:"https://twitter.com/mindorksnextgen",github_profile_url:"https://github.com/mindorksopensource",linkedin_profile_url:"https://in.linkedin.com/company/mindorks"},isFetching:!1,similarBlogs:[{id:275,title:"Tips and Tricks of Android Studio",description:"In this blog, we will learn about some of the Tips and Tricks of Android Studio. This is very important because a machine can do a lot of things if the operator, operating the machine knows how to use it efficiently. Same is with Android Studio. Using some shortcuts will help us in making projects in a lesser time than ever.",author:14897,img_url:"/images/tips-and-tricks-of-android-studio-banner-f7dd407c545f5b2b.png",blog_url:"tips-and-tricks-of-android-studio",likes:0,rank:0,category:1,published_at:"16th June 2019",score:7.360347270965576},{id:281,title:"Building Android applications with Gradle — Tutorial",description:"In this blog, we will learn how to use Gradle in Android to build some applications. We will learn some Gradle commands that can be used to perform various Gradle functions using the command line and not the Android Studio. Also, we will learn gradlew tasks and build variants. ",author:14897,img_url:"/images/building-android-applications-with-gradle-banner.png",blog_url:"building-android-applications-with-gradle-tutorial",likes:0,rank:0,category:1,published_at:"20th June 2019",score:2.805088996887207},{id:310,title:"Speed up Gradle build for Android to save your time",description:"In this blog, we will talk about how can we speed up your gradle build to run it quickly and save your time",author:9959,img_url:"/images/banner-speed-up-gradle.png",blog_url:"speed-up-gradle-build-for-android-to-save-your-time",likes:0,rank:0,category:1,published_at:"6th August 2019",score:2.805088996887207},{id:408,title:"Gradle for Android Developers - Getting the most of it",description:"In this blog, we are going to understand what Gradle actually is and how important a role it plays in Android Development. How can we get the most of it?",author:3003,img_url:"/images/gradle-for-android-banner-image.png",blog_url:"gradle-for-android-developers-getting-the-most-of-it",likes:0,rank:0,category:1,published_at:"22nd March 2020",score:2.805088996887207},{id:507,title:"Migrate to Gradle Kotlin DSL",description:"In this blog, we are going to learn how to migrate from Groovy-based Gradle to Kotlin DSL Gradle in Android. We will learn what are the basic steps that can be followed for easy migration to Gradle Kotlin DSL.",author:14897,img_url:"/images/migrate-to-gradle-kotlin-dsl-banner-5cbe58700d2abbeb.png",blog_url:"migrate-to-gradle-kotlin-dsl",likes:0,rank:0,category:1,published_at:"15th October 2020",score:2.7959113121032715},{id:84,title:"Detecting and fixing memory leaks in android",description:"Many a time we see ANR dialog while using android apps, lags in our apps, we also see OutOfMemoryError in Android Studio while building apps. All these kinds of stuff happen due to memory leaks.",author:30,img_url:"https://s3.ap-south-1.amazonaws.com/mindorks/blogs/detecting-and-fixing-memory-leaks-in-android.jpg",blog_url:"detecting-and-fixing-memory-leaks-in-android",likes:1,rank:0,category:1,published_at:"27th August 2017",score:.2793795168399811}],isSimilarBlogsFetching:!1},loginData:{data:null,isLoggingIn:!1,isLoggingOut:!1,loginState:!1,isForcedLogout:!1,isTokenRefreshed:!1,isRedirectHome:!1,message:""},updatesData:{news:null,inspirations:null,isNewsFetching:!0,isInspirationsFetching:!0},blogEditorData:{blogId:null,blogDetailsFormData:{title:"",description:"",imgUrl:"",blogUrl:"",category:"",categories:[],isWriting:!1,isTitleError:!1,isDescriptionError:!1,isImgUrlError:!1,isBlogUrlError:!1,isCategoryError:!1,isUploadingImage:!1,uploadedImageUrl:null},editorState:null,editorText:null,successMessage:null,errorMessage:null,isSending:!1,isMsgToShow:!1,isPublished:!1,isSubmitted:!1,isDraft:!0,isEditOfExistingBlog:!1,isFetchingBlogCategories:!1,isUploadingImage:!1,uploadedImageUrl:null},myBlogsData:{data:null,isSubmittedBlogsFetching:!0,isDraftBlogsFetching:!0,isPublishedBlogsFetching:!0,successMessage:null,errorMessage:null,isMsgToShow:!1,tabNames:["drafts","submissions","published"],selectedTab:"drafts",isFetchingBlog:!1,isDeletingBlog:!1,openEditorPage:!1},profilePreviewData:{profile:null,blogs:null,isFetchingProfile:!1,isFetchingAuthorBlogs:!1,successMessage:null,errorMessage:null,isMsgToShow:!1,isUserNotRegistered:!1,redirectToMyProfileEdit:!1},profileEditableData:{userId:null,name:null,fbProfilePicUrl:null,googleProfilePicUrl:null,profileFormData:{tagline:"",fbProfileUrl:"",googlePlusProfileUrl:"",twitterProfileUrl:"",githubProfileUrl:"",linkedinProfileUrl:"",isWriting:!1,isTaglineError:!1,isFbProfileUrlError:!1,isGooglePlusProfileUrlError:!1,isTwitterProfileUrlError:!1,isGithubProfileUrlError:!1,isLinkedinProfileUrlError:!1},isSavingProfile:!1,successMessage:null,errorMessage:null,isMsgToShow:!1,redirectToProfilePreview:!1},submitBlogData:{formData:{email:"",name:"",link:"",isWriting:!1,isNameError:!1,isEmailError:!1,isLinkError:!1,dismissMsg:!1},successMessage:null,errorMessage:null,isSubmitting:!1},advertisementsData:{data:{},isLoading:!1},recaptchaData:{verified:!1,successMessage:null,errorMessage:null},blogSearchData:{searches:null,isSearching:!1}}
  </script>
  <script async="" src="https://www.google-analytics.com/analytics.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-91686131-1","auto"),ga("require","cleanUrlTracker"),ga("require","eventTracker"),ga("require","impressionTracker"),ga("require","outboundLinkTracker"),ga("require","urlChangeTracker"),ga("require","maxScrollTracker"),ga("require","mediaQueryTracker"),ga("require","outboundFormTracker"),ga("require","outboundLinkTracker"),ga("require","pageVisibilityTracker"),ga("require","socialWidgetTracker"),ga("require","urlChangeTracker"),ga("send","pageview")
  </script>
  <script defer="defer" src="/assets/autotrack.js" type="text/javascript">
  </script>
  <script src="/assets/highlight.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/vendor-bundle-1.8.6.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/app-bundle-1.8.6.js" type="text/javascript">
  </script>
 </head>
 <body>
  <div id="root">
   <div class="screen app-load-content" data-reactroot="">
    <div class="ui centered grid">
     <div class="row" style="padding:0">
      <div class="ui fixed menu navbar huge borderless grid" style="background-color:#fff;height:60px">
      </div>
     </div>
     <div class="centered computer only row" style="padding:0">
      <div class="ui fixed top menu navbar huge borderless grid header-container" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="right menu">
        <a class="item" href="https://janisharali.com" target="_blank">
         Mentor Ali
        </a>
        <a class="item" href="https://amitshekhar.me" target="_blank">
         Mentor Amit
        </a>
       </div>
      </div>
     </div>
     <div class="tablet only mobile only row" style="padding:0">
      <div class="ui fixed top navbar huge menu borderless" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="item">
       </div>
      </div>
     </div>
    </div>
    <div class="header-height">
    </div>
    <div aria-live="assertive" class="redux-toastr">
     <div>
      <div class="top-left">
      </div>
      <div class="top-right">
      </div>
      <div class="top-center">
      </div>
      <div class="bottom-left">
      </div>
      <div class="bottom-right">
      </div>
      <div class="bottom-center">
      </div>
     </div>
    </div>
    <div class="content-container theme">
     <div class="ui centered one column grid" style="padding-bottom:80px;background-color:#fff">
      <div class="ten wide computer fifteen wide mobile fifteen wide tablet column" style="margin-top:50px">
       <div>
        <div class="blog-page-author">
         <div class="ui small header">
          <img alt="Admin MindOrks" class="ui circular image" src="https://s3.ap-south-1.amazonaws.com/mindorks/website/mindorks-admin.png"/>
          <div class="content">
           Admin MindOrks
           <div class="sub header" style="margin-top:5px">
            18th May 2019
           </div>
          </div>
         </div>
        </div>
        <div id="content">
         <article class="template">
          <div class="postContent">
           <div class="notesSource">
            <div class="postField postField--body" id="editor">
             <section class="section--first section--last">
              <div class="section-divider layoutSingleColumn-template">
               <hr class="section-divider"/>
              </div>
              <div class="section-content">
               <div class="section-inner layoutSingleColumn-template">
                <div>
                 <h1 class="graf--h1">
                  Gradle Tips and Tricks for Android
                 </h1>
                 <div class="graf-image graf-caption">
                  <img alt="Gradle Tips and Tricks for Android" class="graf-image" src="/images/gradle-tips-tricks-banner-image.png"/>
                 </div>
                 <p class="graf--p">
                  Gone are the days when you will be watching some cool videos and enjoying the coffee just after you have started the build process of your Android Project because it takes ages to complete. The current state of build automation tools handles several aspects of building project more efficiently than in past and
                  <b class="graf--bold">
                   Gradle
                  </b>
                  is one of those modern build automation tools.
                 </p>
                 <p class="graf--p">
                  But at the same time, if you are using Gradle then you will encounter a number of Gradle error and to be honest, this is very common for a new Android Developer.  So, in this blog, we will look upon some of the
                  <b class="graf--bold">
                   Gradle Tips and Tricks
                  </b>
                  that can be used to utilize the functionalities of
                  <b class="graf--bold">
                   Gradle
                  </b>
                  in Android App Development. We will understand Gradle in such a way that whenever there is a Gradle related error in your project, then you will remove the error by yourselves and not by searching for answers on StackOverflow.
                 </p>
                 <h4 class="graf--h3">
                  What is Gradle?
                 </h4>
                 <p class="graf--p">
                  Before moving towards the Gradle tips and tricks, let's understand what Gradle is? Android Studio uses
                  <b class="graf--bold">
                   <a class="markup--anchor" href="http://www.gradle.org/" target="_blank">
                    Gradle
                   </a>
                  </b>
                  ,
                  <b class="graf--bold">
                   an advanced build toolkit, to automate and manage the build process while allowing you to define flexible custom build configurations
                  </b>
                  . So, with the help of Gradle, you can do the building, testing and deployment of your application and the files which are responsible for this type of automation is the  “
                  <b class="graf--bold">
                   Build.gradle
                  </b>
                  ” file. For example, the simple task to copy some images from one place/directory to another can be performed by Gradle build script before the actual build process happens.
                 </p>
                 <p class="graf--p">
                  Android projects need Gradle for putting source code and resources together. The build process of an Android app summarized in the figure below :
                 </p>
                 <p class="graf--p">
                  Picture courtesy : Android Developer website
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Gradle Tips and Tricks for Android" class="graf-image" src="/images/gradle-tips-tricks-build-process-image.png"/>
                 </div>
                 <p class="graf--p">
                  Following steps are performed:
                 </p>
                 <ol>
                  <li>
                   Firstly, your source code is converted into DEX(Dalvik Executable) files. These DEX files include the bytecode that is required to run your app on Android. Dex file is something like the
                   <b class="graf--bold">
                    <i class="graf--italic">
                     .class
                    </i>
                   </b>
                   file.
                  </li>
                  <li>
                   There can be more than one DEX files, and these DEX files are combined with the resources with the help of APK Packager.
                  </li>
                  <li>
                   After that, the APK Packager signs your APK using either the debug or release keystore.
                  </li>
                  <li>
                   If you are building an app for testing and profiling, then the packager signs your app with the debug keystore.
                  </li>
                  <li>
                   If you are building an app for the release version, then the packager signs your app with the release keystore.
                  </li>
                  <li>
                   Before generating your final APK, the packager optimize your app to remove the useless code.
                  </li>
                 </ol>
                 <p class="graf--p">
                  When the build process is finished, you will get the APK of the project.
                 </p>
                 <h4 class="graf--h3">
                  Build Configuration Files
                 </h4>
                 <p class="graf--p">
                  When you start a new project on Android Studio, then it will create some files for you. Let's understand the scope and purpose of these files. Following is the project view of a typical Android project:
                 </p>
                 <p class="graf--p">
                  Picture courtesy : Android Developer website
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Gradle Tips and Tricks for Android" class="graf-image" src="/images/gradle-tips-tricks-project-structure-image.png"/>
                 </div>
                 <ul>
                  <li>
                   <b class="graf--bold">
                    The Gradle settings file:
                   </b>
                   The
                   <b class="graf--bold">
                    <i class="graf--italic">
                     settings.gradle
                    </i>
                   </b>
                   file is located in the root directory. It consists of all the modules that are present in the app.
                  </li>
                  <li>
                   <b class="graf--bold">
                    The top-level build file:
                   </b>
                   The top-level
                   <b class="graf--bold">
                    <i class="graf--italic">
                     build.gradle
                    </i>
                   </b>
                   file, located in the root directory. If you want to apply the same configuration to all modules of your project then you should define these in this file..
                  </li>
                  <li>
                   <b class="graf--bold">
                    The module-level build file:
                   </b>
                   The module-level
                   <b class="graf--bold">
                    <i class="graf--italic">
                     build.gradle
                    </i>
                   </b>
                   file, located in each
                   <b class="graf--bold">
                    <i class="graf--italic">
                     project/module/
                    </i>
                   </b>
                   directory, allows us to configure build settings for the specific module it is located in.
                  </li>
                  <li>
                   <b class="graf--bold">
                    Gradle properties file:
                   </b>
                   To specify settings for the Gradle toolkit, you can specify these settings in the Gradle properties file.
                   <b class="graf--bold">
                    <i class="graf--italic">
                    </i>
                   </b>
                  </li>
                 </ul>
                 <h4 class="graf--h3">
                  Gradle Tips and Tricks
                 </h4>
                 <p class="graf--p">
                  Now, we are done with the introduction of Gradle. Let's focus on some cool tips and trick of Gradle for Android. Some of them are listed below:
                 </p>
                 <h4 class="graf--h3">
                  <b class="graf--bold">
                   1. Add build dependencies:
                  </b>
                 </h4>
                 <p class="graf--p">
                  An Android project can have more than one module and it is possible that each module may have some dependency or it uses some library. To add more and more functionalities to your app, you must include some dependencies.
                 </p>
                 <p class="graf--p">
                  To add a dependency to your project, you can add the dependency in the
                  <b class="graf--bold">
                   <i class="graf--italic">
                    dependencies
                   </i>
                  </b>
                  section of your
                  <b class="graf--bold">
                   <i class="graf--italic">
                    build.gradle
                   </i>
                  </b>
                  file.
                 </p>
                 <p class="graf--p">
                  For example, to add dependencies in your file add the dependency in the
                  <code class="graf--code-inline">
                   <b class="graf--bold">
                    <i class="graf--italic">
                     build.gradle:
                    </i>
                   </b>
                  </code>
                 </p>
                 <pre><code class="language-java graf graf--code">apply plugin: 'com.android.application'

android { ... }

dependencies {
    // Dependency on a local library module
    implementation project(":mylibrary")

    // Dependency on local binaries
    implementation fileTree(dir: 'libs', include: ['*.jar'])

    // Dependency on a remote binary
    implementation 'com.example.android:app-magic:12.3'
}</code></pre>
                 <h4 class="graf--h3">
                  <b class="graf--bold">
                   2. Manage dependencies version :
                  </b>
                 </h4>
                 <p class="graf--p">
                  In a multi-module project, there are a number of dependencies used and due to this, the
                  <b class="graf--bold">
                  </b>
                  biggest problem that arises is the conflict in the version of the dependencies i.e you should have the dependencies with the same version. Let's say our module level
                  <b class="graf--bold">
                   <i class="graf--italic">
                    build.gradle
                   </i>
                  </b>
                  file looks like :
                 </p>
                 <pre><code class="language-java graf graf--code">apply plugin:'com.android.application'
android{

    defaultConfig{...}
    buildTypes{...}
    ProductFlavours{...}
}

dependencies{

    //android supported libraries
    implementation'com.android.support:appcompat-v7:28.0.0'
    implementation'com.android.support:design:28.0.0'
    implementation'com.android.support:cardview-v7:28.0.0'
        
    //google play service
    implementation'com.google.android.gms:play-services:16.0.1'
    implementation'com.google.android.gms:play-services-fitness:16.0.1'
        
    //other dependencies
}</code></pre>
                 <p class="graf--p">
                  It is very difficult to manage the versions of these dependencies but
                  <b class="graf--bold">
                   Gradle
                  </b>
                  provides
                  <b class="graf--bold">
                   <i class="graf--italic">
                    ext
                   </i>
                  </b>
                  block where we can define our common property values and use them in dependencies.
                 </p>
                 <pre><code class="language-java graf graf--code">apply plugin: 'com.android.application'
        
android {
    defaultConfig{...}
    buildTypes{...}
    ProductFlavours{...}
}

ext {
    supportLibraryVersion = '28.0.0'
    playServiceVersion = '16.0.1'

}

dependencies {
    //android supported libraries
    implementation "com.android.support:appcompat-v7:$supportLibraryVersion"
    implementation "com.android.support:design:$supportLibraryVersion"
    implementation "com.android.support:cardview-v7:$supportLibraryVersion"

    //google play service
    implementation "com.google.android.gms:play-services:$playServiceVersion"
    implementation "com.google.android.gms:play-services-fitness:$playServiceVersion"

    //other dependencies
}</code></pre>
                 <p class="graf--p">
                  You can see that in above code, the
                  <b class="graf--bold">
                   <i class="graf--italic">
                    ext
                   </i>
                  </b>
                  block contains
                  <b class="graf--bold">
                   playServiceVersion
                  </b>
                  and
                  <b class="graf--bold">
                   supportLibraryVersion
                  </b>
                  .
                 </p>
                 <p class="graf--p">
                  Notice that instead of a version number, we added
                  <b class="graf--bold">
                   <i class="graf--italic">
                    $
                   </i>
                  </b>
                  with its version property and also changed single quotes to
                  <b class="graf--bold">
                   double quotes
                  </b>
                  .
                 </p>
                 <p class="graf--p">
                  For a multiple module project, you can set the same version by moving the
                  <b class="graf--bold">
                   <i class="graf--italic">
                    ext
                   </i>
                  </b>
                  block from module-level
                  <b class="graf--bold">
                   <i class="graf--italic">
                    build.gradle
                   </i>
                  </b>
                  to the root-level
                  <b class="graf--bold">
                   <i class="graf--italic">
                    build.gradle
                   </i>
                  </b>
                  .
                 </p>
                 <pre><code class="language-java graf graf--code">buildscript {

}

allprojects {

}

ext {

    supportLibraryVersion = '28.0.0'

    playServiceVersion = '16.0.1'

}</code></pre>
                 <p class="graf--p">
                  Now in the
                  <b class="graf--bold">
                   <i class="graf--italic">
                    build.gradle
                   </i>
                  </b>
                  file of the different module, use this
                  <b class="graf--bold">
                   supportLibraryVersion
                  </b>
                  and
                  <b class="graf--bold">
                   playServiceVersion
                  </b>
                  .
                 </p>
                 <pre><code class="language-java graf graf--code">com.android.support:appcompatv7:$rootProject.supportLibraryVersion</code></pre>
                 <h4 class="graf--h3">
                  <b class="graf--bold">
                   3. Optimize your build speed :
                  </b>
                 </h4>
                 <p class="graf--p">
                  Whenever you build a project, then it takes some time and long build times slow down the development process. The build process is also dependent on the processor speed but if we ignore the hardware part then in order to have a very fast build we can use any of the following techniques :
                 </p>
                 <ul>
                  <li>
                   Always have an updated Android Studio. This will keep your Android tools up to date and this is done because on every update Android tools receive some build optimization.
                  </li>
                  <li>
                   Always avoid compiling and packaging the resources that you aren't testing. There may be various packages that can be avoided during package and you should not compile those packages. To do so, you can specify one language resource and screen density for your "
                   <b class="graf--bold">
                    <i class="graf--italic">
                     dev
                    </i>
                   </b>
                   " flavor, as shown in the following sample:
                  </li>
                 </ul>
                 <pre><code class="language-java graf graf--code">android {
  ...
  productFlavors {
    dev {
      ...
      // The following configuration limits the "dev" flavor to using
      // English stringresources and xxhdpi screen-density resources.
      resConfigs "en", "xxhdpi"
    }
    ...
  }
}
</code></pre>
                 <ul>
                  <li>
                   If you don't need to run a
                   <a class="markup--anchor" href="https://docs.fabric.io/android/crashlytics/overview.html" target="_blank">
                    Crashlytics report
                   </a>
                   , then disable the plugin and speed the build process as follows:
                  </li>
                 </ul>
                 <pre><code class="language-java graf graf--code">android {
    ...

    buildTypes {
        debug {
            ext.enableCrashlytics = false
        }
     }
}</code></pre>
                 <ul>
                  <li>
                   Avoid using a dynamic version of the dependencies in your
                   <b class="graf--bold">
                    <i class="graf--italic">
                     build.gradle
                    </i>
                   </b>
                   file. So, don't use something like this:
                   <b class="graf--bold">
                    <i class="graf--italic">
                     <code class="graf--code-inline">
                      'com.android.tools.build:gradle:2.+'
                     </code>
                    </i>
                   </b>
                   . Using dynamic version numbers can cause unexpected version updates or difficulty in resolving version differences and this will finally slow down your build process. Always use
                   <b class="graf--bold">
                    static/hard-coded
                   </b>
                   version numbers instead.
                  </li>
                  <li>
                   If your network connection is slow, then build times may suffer when
                   <b class="graf--bold">
                    Gradle
                   </b>
                   attempts to use network resources to resolve dependencies. So, in a weak or slow network connection, use offline mode. To use offline mode, follow the below steps:
                  </li>
                 </ul>
                 <ol>
                  <li>
                   Click on
                   <b class="graf--bold">
                    File &gt; Settings &gt; Preferences
                   </b>
                  </li>
                  <li>
                   Click on
                   <b class="graf--bold">
                    Build, Execution, Deployment &gt; Gradle
                   </b>
                   .
                  </li>
                  <li>
                   Check the
                   <b class="graf--bold">
                    Offline work
                   </b>
                   checkbox.
                  </li>
                  <li>
                   Click
                   <b class="graf--bold">
                    Apply
                   </b>
                   or
                   <b class="graf--bold">
                    OK
                   </b>
                   .
                  </li>
                 </ol>
                 <p class="graf--p">
                  If you're building from the command line, pass the
                  <code class="graf--code-inline">
                   <b class="graf--bold">
                    <i class="graf--italic">
                     --offline
                    </i>
                   </b>
                  </code>
                  option.
                 </p>
                 <h4 class="graf--h3">
                  4. Shrink and Optimize your App
                 </h4>
                 <p class="graf--p">
                  To make your app as small as possible, you should enable
                  <b class="graf--bold">
                   shrinking
                  </b>
                  in your project. By using this, you will remove the unused code and resources. Many times you import a lot of libraries and you need only a few of them. So, instead of keeping all those libraries, you should keep only those libraries that are in use. This will reduce the app size to a large extent(a 42 MB app can be reduced to 10 MB by using this process).
                 </p>
                 <p class="graf--p">
                  When you build your project using
                  <a class="markup--anchor" href="https://developer.android.com/studio/releases/gradle-plugin#3-4-0" target="_blank">
                   Android Gradle plugin 3.4.0
                  </a>
                  or higher, the plugin no longer uses
                  <b class="graf--bold">
                   ProGuard
                  </b>
                  to perform compile-time code optimization. With the help of
                  <b class="graf--bold">
                   <i class="graf--italic">
                    R8 compiler,
                   </i>
                  </b>
                  the following tasks are handled:
                 </p>
                 <ul>
                  <li>
                   <b class="graf--bold">
                    Code shrinking (or tree-shaking):
                   </b>
                   scans for unused classes, fields, methods, and attributes and safely removes these from your app.
                  </li>
                  <li>
                   <b class="graf--bold">
                    Resource shrinking:
                   </b>
                   by using this, you remove the unused resources from your app.
                  </li>
                  <li>
                   <b class="graf--bold">
                    Obfuscation:
                   </b>
                   shortens the name of classes and members, which results in reduced DEX file sizes.
                  </li>
                  <li>
                   <b class="graf--bold">
                    Optimization:
                   </b>
                   inspects and rewrites your code to further reduce the size of your app’s DEX files. The R8 removes the unreachable statements i.e. the statements that are never reached.
                  </li>
                 </ul>
                 <p class="graf--p">
                  When building the release version of your app, by default, R8 automatically performs the compile-time tasks described above for us.
                 </p>
                 <p class="graf--p">
                  When we create a new project in Android Studio, shrinking, obfuscation and optimization are not enabled by default because these compile-time optimizations increase the build time and might introduce some bugs.
                 </p>
                 <p class="graf--p">
                  So, it’s best to enable these compile-time tasks when building the final version of our app. Include the following in project-level
                  <b class="graf--bold">
                   <i class="graf--italic">
                    build.gradle
                   </i>
                  </b>
                  file.
                 </p>
                 <pre><code class="language-java graf graf--code">android {
    buildTypes {
        release {
            // Enables code shrinking, obfuscation, and optimization for only
            // your project's release build type.
            minifyEnabled true

            // Enables resource shrinking, which is performed by the
            // Android Gradle plugin.
            shrinkResources true

            // Includes the default ProGuard rules files that are packaged with
            // the Android Gradle plugin. To learn more, go to the section about
            // R8 configuration files.
            proguardFiles getDefaultProguardFile(
                    'proguard-android-optimize.txt'),
                    'proguard-rules.pro'
        }
    }
    ...
}</code></pre>
                 <h4 class="graf--h3">
                  5. Configure dynamic version codes
                 </h4>
                 <p class="graf--p">
                  By default, when Gradle generates APKs for our project, each APK has the same version information, as specified in the module-level
                  <code class="graf--code-inline">
                   <b class="graf--bold">
                    <i class="graf--italic">
                     build.gradle
                    </i>
                   </b>
                  </code>
                  file.
                 </p>
                 <p class="graf--p">
                  But when you place or upload your app on the Google Play Store, then it doesn't allow you to publish the app with the same version number. So, every APK must have some unique
                  <b class="graf--bold">
                   versionCode.
                  </b>
                 </p>
                 <p class="graf--p">
                  We can do this with custom build logic that assigns a different version code to each APK at build time.
                 </p>
                 <pre><code class="language-java graf graf--code">android {
  ...
  defaultConfig {
    ...
    versionCode 4
  }
  splits {
    ...
  }
}

// Map for the version code that gives each ABI a value.
ext.abiCodes = ['armeabi-v7a':1, mips:2, x86:3]

// For per-density APKs, create a similar map like this:
// ext.densityCodes = ['hdpi': 1, 'xhdpi': 2, 'xxhdpi': 3, 'xxxhdpi': 4]

import com.android.build.OutputFile

// For each APK output variant, override versionCode with a combination of
// ext.abiCodes * 1000 + variant.versionCode. In this example, variant.versionCode
// is equal to defaultConfig.versionCode. If you configure product flavors that
// define their own versionCode, variant.versionCode uses that value instead.
android.applicationVariants.all { variant -&gt;

  // Assigns a different version code for each output APK
  // other than the universal APK.
  variant.outputs.each { output -&gt;

    // Stores the value of ext.abiCodes that is associated with the ABI for this variant.
    def baseAbiVersionCode =
            // Determines the ABI for this variant and returns the mapped value.
            project.ext.abiCodes.get(output.getFilter(OutputFile.ABI))

    // Because abiCodes.get() returns null for ABIs that are not mapped by ext.abiCodes,
    // the following code does not override the version code for universal APKs.
    // However, because we want universal APKs to have the lowest version code,
    // this outcome is desirable.
    if (baseAbiVersionCode != null) {

      // Assigns the new version code to versionCodeOverride, which changes the version code
      // for only the output APK, not for the variant itself. Skipping this step simply
      // causes Gradle to use the value of variant.versionCode for the APK.
      output.versionCodeOverride =
              baseAbiVersionCode * 1000 + variant.versionCode
    }
  }
}</code></pre>
                 <h4 class="graf--h3">
                  Conclusion
                 </h4>
                 <p class="graf--p">
                  Phew, that was a lot of stuff about Gradle. Now, you are a master in the art of Gradle.
                 </p>
                 <p class="graf--p">
                  Gradle is a solid and very customizable build automation system. It makes the life of developers so much better by handling a lot of the nuances around the build system in a graceful manner — making the build system a joy to work with.
                 </p>
                 <p class="graf--p">
                  Hopefully, after finishing this blog, you have a solid understanding of how you can use the powerful features of Gradle.
                 </p>
                 <p class="graf--p">
                  If you want to learn some more Gradle tips or you want to know more about the build process in Android, then you can find the
                  <a class="markup--anchor" href="https://developer.android.com/studio/build" target="_blank">
                   Google Official Documentation on Gradle
                  </a>
                  .
                 </p>
                 <p class="graf--p">
                  Happy Learning :)
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Team MindOrks
                  </b>
                 </p>
                </div>
               </div>
              </div>
             </section>
            </div>
           </div>
          </div>
         </article>
        </div>
       </div>
       <div class="ui divider">
       </div>
      </div>
      <div class="stretched fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui large center aligned header" style="padding-top:20px">
        Recommended for You
       </div>
      </div>
      <div class="fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui centered grid">
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/tips-and-tricks-of-android-studio/">
          <img alt="Tips and Tricks of Android Studio" class="ui centered image" src="/images/tips-and-tricks-of-android-studio-banner-f7dd407c545f5b2b.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Tips and Tricks of Android Studio
           </div>
           <div class="meta">
            16th June 2019
           </div>
           <div class="description">
            In this blog, we will learn about some of the Tips and Tricks of Android Studio. This is very important because a machine can do a lot of things if the operator, operating the machine knows how to use it efficiently. Same is with Android Studio. Using some shortcuts will help us in making projects in a lesser time than ever.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/building-android-applications-with-gradle-tutorial/">
          <img alt="Building Android applications with Gradle — Tutorial" class="ui centered image" src="/images/building-android-applications-with-gradle-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Building Android applications with Gradle — Tutorial
           </div>
           <div class="meta">
            20th June 2019
           </div>
           <div class="description">
            In this blog, we will learn how to use Gradle in Android to build some applications. We will learn some Gradle commands that can be used to perform various Gradle functions using the command line and not the Android Studio. Also, we will learn gradlew tasks and build variants.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/speed-up-gradle-build-for-android-to-save-your-time/">
          <img alt="Speed up Gradle build for Android to save your time" class="ui centered image" src="/images/banner-speed-up-gradle.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Speed up Gradle build for Android to save your time
           </div>
           <div class="meta">
            6th August 2019
           </div>
           <div class="description">
            In this blog, we will talk about how can we speed up your gradle build to run it quickly and save your time
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/gradle-for-android-developers-getting-the-most-of-it/">
          <img alt="Gradle for Android Developers - Getting the most of it" class="ui centered image" src="/images/gradle-for-android-banner-image.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Gradle for Android Developers - Getting the most of it
           </div>
           <div class="meta">
            22nd March 2020
           </div>
           <div class="description">
            In this blog, we are going to understand what Gradle actually is and how important a role it plays in Android Development. How can we get the most of it?
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/migrate-to-gradle-kotlin-dsl/">
          <img alt="Migrate to Gradle Kotlin DSL" class="ui centered image" src="/images/migrate-to-gradle-kotlin-dsl-banner-5cbe58700d2abbeb.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Migrate to Gradle Kotlin DSL
           </div>
           <div class="meta">
            15th October 2020
           </div>
           <div class="description">
            In this blog, we are going to learn how to migrate from Groovy-based Gradle to Kotlin DSL Gradle in Android. We will learn what are the basic steps that can be followed for easy migration to Gradle Kotlin DSL.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/detecting-and-fixing-memory-leaks-in-android/">
          <img alt="Detecting and fixing memory leaks in android" class="ui centered image" src="https://s3.ap-south-1.amazonaws.com/mindorks/blogs/detecting-and-fixing-memory-leaks-in-android.jpg" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Detecting and fixing memory leaks in android
           </div>
           <div class="meta">
            27th August 2017
           </div>
           <div class="description">
            Many a time we see ANR dialog while using android apps, lags in our apps, we also see OutOfMemoryError in Android Studio while building apps. All these kinds of stuff happen due to memory leaks.
           </div>
          </div>
         </a>
        </div>
       </div>
      </div>
     </div>
    </div>
    <div style="background:#fff">
     <footer class="content-container">
      <div class="ui centered padded grid" style="padding-top:40px;background:linear-gradient(to right,#c4e0e0,#e5f1f1)">
       <h2 class="ui huge icon center aligned header">
        <div class="content">
         Connect With Your Mentors
        </div>
       </h2>
       <div class="centered row">
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Janishar Ali" class="ui medium circular image" src="/assets/ali.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://janisharali.com" target="_blank">
             Janishar Ali
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://janisharali.com" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/janisharali" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Amit Shekhar" class="ui medium circular image" src="/assets/amit.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://amitshekhar.me" target="_blank">
             Amit Shekhar
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://amitshekhar.me" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/amitiitbhu" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
      <div class="ui divider" style="margin:unset">
      </div>
      <h5 class="ui header" style="padding:16px;margin:unset;color:#555">
       <i aria-hidden="true" class="copyright icon">
       </i>
       <div class="content">
        Copyright 2022, MindOrks Nextgen Private Limited
       </div>
      </h5>
     </footer>
    </div>
   </div>
  </div>
  <script type="text/javascript">
   window.hljs.initHighlightingOnLoad()
  </script>
 </body>
</html>