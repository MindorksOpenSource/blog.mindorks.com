<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>
   How to use Memory Heap Dumps data?
  </title>
  <meta charset="utf-8"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="minimum-scale=1,initial-scale=1,width=device-width,shrink-to-fit=no" name="viewport"/>
  <link href="https://blog.mindorks.com/how-to-use-memory-heap-dumps-data" rel="canonical"/>
  <meta content="986249072156-dabps0lf90smluddrk5rkqsdjghk3hd3.apps.googleusercontent.com" name="google-signin-client_id"/>
  <meta content="android, learn android app development, android app development courses, android blogs, android tutorial" name="keywords"/>
  <meta content="How to use Memory Heap Dumps data?" property="og:title"/>
  <meta content="website" property="og:type"/>
  <meta content="https://blog.mindorks.com/how-to-use-memory-heap-dumps-data" property="og:url"/>
  <meta content="/images/how-to-use-memory-heap-dumps-data-banner.png" property="og:image"/>
  <meta content="In this blog, we will learn how to use memory heap dump data to identify memory leaks in our application. A memory leak occurs when an object is present in the memory and that object is not being used in the program." property="og:description"/>
  <meta content="How to use Memory Heap Dumps data?" property="twitter:title"/>
  <meta content="In this blog, we will learn how to use memory heap dump data to identify memory leaks in our application. A memory leak occurs when an object is present in the memory and that object is not being used in the program." name="twitter:description"/>
  <meta content="/images/how-to-use-memory-heap-dumps-data-banner.png" name="twitter:image:src"/>
  <meta content="summary_large_image" name="twitter:card"/>
  <meta content="@MindorksNextGen" name="twitter:site"/>
  <meta content="In this blog, we will learn how to use memory heap dump data to identify memory leaks in our application. A memory leak occurs when an object is present in the memory and that object is not being used in the program." name="description"/>
  <meta content="1620001391374687" property="fb:app_id"/>
  <link href="/styles/vendor-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link href="/styles/app-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link as="style" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" onload='this.onload=null,this.rel="stylesheet"' rel="preload"/>
  <noscript>
   <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
  </noscript>
  <script type="text/javascript">
   window.__PRELOADED_STATE__={toastr:{toastrs:[],confirm:null},blogData:{data:{},latestBlogs:null,isFetching:!0,isFetchingLatestBlogs:!1,currentCategory:"",categories:[]},contactData:{formData:{email:"",name:"",phone:"",message:"",isWriting:!1,isNameError:!1,isEmailError:!1,isPhoneError:!1,isMessageError:!1,dismissMsg:!1},successMessage:null,errorMessage:null,isSending:!1},communityData:{formData:{email:"",isEmailError:!1,isWriting:!1,isSending:!1,dismissMsg:!1},successMessage:null,errorMessage:null},blogPageData:{blogId:370,data:{id:370,title:"How to use Memory Heap Dumps data?",description:"In this blog, we will learn how to use memory heap dump data to identify memory leaks in our application. A memory leak occurs when an object is present in the memory and that object is not being used in the program.",text:'<h1 class="graf--h1">How to use Memory Heap Dumps data?</h1> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/how-to-use-memory-heap-dumps-data-banner.png class=\'graf-image\' alt=\'How to use Memory Heap Dumps data?\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">Whenever we develop some Android application then the most common thing that all the developers are worried about is the usage of memory by the application. This is because if your application is using large memory then you may lose your users as the majority of the population use low memory devices. The developers try to find each and every memory leak present in the application so that they can optimize their app to be leaner and faster. Also, if you get to know which objects are using memory at a particular instant of time then it becomes an easier task for you to remove memory leaks in your application.</p><p class="graf--p">In this blog, we will be learning how to use memory heap dumps data to identify memory leaks. So, let&#x27;s get started.</p><h4 class="graf--h3">About Profiler</h4><p class="graf--p">In Android Studio, we have something called Profiler that provides the CPU, memory, network, and energy usage information of our application. This shows a graphical representation of the usage of CPU, memory, network, and energy by our application. With the help of this data, we can optimize our code. But out of these four i.e. CPU, memory, network, and energy, the one that is mostly used by every developer is Memory Profiler. So, let&#x27;s see what this Memory Profiler is and before that, we will learn the reason for memory leaks and then try to identify that with the help of Memory Profiler.</p><h4 class="graf--h3">The Problem</h4><p class="graf--p">Memory Profiler helps us in finding memory leaks and memory churn. </p><blockquote class="graf--blockquote">A memory leak is an object which becomes inaccessible to the running program but still occupies memory. </blockquote><p class="graf--p">But in Java or Kotlin, we have something called Garbage Collection. When your app is no longer using some objects, the garbage collector releases the unused memory back to the heap. For the process of garbage collection, the JVM will first identify the Garbage Collection Root(GC Root) which is an object that is accessible from outside the heap like running thread and local variables. Then all the objects that are accessible from the Garbage Collection Root are identified and these objects are retained. And finally, the rest of the objects that are not accessible from the Garbage Collection Root are considered as garbage and they are recycled.</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/how-to-use-memory-heap-dumps-data-garbage-collector-working.png class=\'graf-image\' alt=\'How to use Memory Heap Dumps data?\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">So, where does the concept of Memory Leak come?</p><blockquote class="graf--blockquote"><i class="graf--italic">Life was good till we were not introduced with memory leaks.</i></blockquote><p class="graf--p">Memory Leaks come into play when your object is not yet destroyed but at the same time, you are not in a position to use that object. So, your object will hold the memory and you will not be able to use that memory. </p><blockquote class="graf--blockquote">In other words, we can say that memory leaks come into play due to abandoned objects that can never be used in the program but it is accessible.</blockquote><h4 class="graf--h3">The Solution</h4><p class="graf--p">To find memory leaks in our application we can use the memory profiler. To open memory profiler in our application, follow the below steps:</p><ol><li>Click on <b class="graf--bold">View &gt; Tool Window &gt; Profiler</b>.</li><li>Run your application on the target device.</li><li>You will see the graph of CPU, memory, network, and energy usage. Click anywhere on the memory timeline to open Memory Profiler. The following screen will be opened:</li></ol> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/how-to-use-memory-heap-dumps-data-memory-profiler.jpg class=\'graf-image\' alt=\'How to use Memory Heap Dumps data?\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">From here, you can avoid memory leak for two types of objects(mainly) i.e. Activity and Fragment. We are concerned about these because they often consume a lot of memory. The best thing is that you need not detect the leaks manually, from Android Studio version 3.6 or higher, the memory leaks of activities and fragments are detected by Memory Profiler. Since these two classes have a real defined behaviour. So, how can a profiler tell that these classes have a leak? For Activity, if it has been destroyed but is still referenced then there is a leak. For Fragments, if we don&#x27;t see a FragmentManager associated with it and it is still referenced, then it is the case of leak.</p><p class="graf--p">So, to identify a leak, due to some activities or fragments, the very first thing we need to do is capture the heap dump. Let&#x27;s see how.</p><h4 class="graf--h3">Memory Heap Dump</h4><p class="graf--p">A heap dump is used to find which object in our app is using memory at the time of capturing the heap dump. A heap dump can help us in identifying memory leaks by showing objects that are still in memory and that is not going to be used by the program. By capturing the heap dump, you can get the following information:</p><ol><li>Memory used by each object.</li><li>Reference of each object that is being held in the code.</li><li>Type of object that is allocated by our app.</li><li>The call stack for where an object was allocated.</li></ol><p class="graf--p">To capture a heap dump, you have one option called &quot;Dump Java heap&quot; in the Memory Profiler. Click on it.</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/how-to-use-memory-heap-dumps-data-dump-java-heap-start.png class=\'graf-image\' alt=\'How to use Memory Heap Dumps data?\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">The following screen will be displayed to you:</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/how-to-use-memory-heap-dumps-data-dump-java-heap.png class=\'graf-image\' alt=\'How to use Memory Heap Dumps data?\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">We have lots of data with us. There are four classes that are made available to us. They are:</p><ol><li><b class="graf--bold">Allocations:</b> It shows the number of allocations or instances in the heap.</li><li><b class="graf--bold">Native Size:</b> It is the total amount of native memory(in bytes) that is used by this object type (only visible for Android 7.0 or higher).</li><li><b class="graf--bold">Shallow Size:</b> It is the memory(in bytes) consumed by the object itself.</li><li><b class="graf--bold">Retained Size:</b> It is the memory(in bytes) that is used due to all the instances of this class.</li></ol> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/how-to-use-memory-heap-dumps-data-memory-dump-data.png class=\'graf-image\' alt=\'How to use Memory Heap Dumps data?\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">So, by using this data, you can identify the classes that are worth attention. If you click on any of the class names, then the Memory Profiler will open an Instance View showing a list of the instance of this class.</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/how-to-use-memory-heap-dumps-data-memory-leak-example.jpg class=\'graf-image\' alt=\'How to use Memory Heap Dumps data?\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">Here, you will find one new data i.e. the depth. The depth is the shortest number of hops from any Garbage Collection Root to the selected instance. The closer an object is to the Garbage Collection Root, higher chances are there for having multiple paths from the GC Root to this object and a lower chance to be garbage collected.</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/how-to-use-memory-heap-dumps-data-memory-dump-example.png class=\'graf-image\' alt=\'How to use Memory Heap Dumps data?\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">In the above example, for the red node, if any of the references to the left is broken, the red node will be inaccessible and it will be garbage collected. But for the blue node, if you want garbage collection, then you have to break the path from the left as well as right.</p><h4 class="graf--h3">Example</h4><p class="graf--p">While using any listener, we should always unregister the listener when not in use because if we are not doing this then the listener will be there in the GC Root and it will never be garbage collected. So, always try to unregister the listener in <b class="graf--bold"><i class="graf--italic">onPause()</i></b> or <b class="graf--bold"><i class="graf--italic">onStop()</i></b> or <b class="graf--bold"><i class="graf--italic">onDestroy()</i></b> method. Following is an example of LocationListener:</p><pre><code class="language-java graf graf--code">public class LocationListenerActivity extends Activity implements LocationUpdate{\n\n  @Override\n  public void onLocationChange(Location location){\n    \n  }\n  \n  @Override\n  public void onStart(){\n   LocationListener.get().register(this);\n  }\n  \n  @Override\n  public void onStop(){\n   LocationListener.get().unregister(this);\n  }\n\n}</code></pre><p class="graf--p">If you are not unregistering the listener then in the dump java heap, you will see a status that says that we are having a memory leak due to the LocationListener.</p><p class="graf--p">That&#x27;s how you can use the data from the heap dump of the Memory Profiler to find leaks and then optimize and correct the code for better results.</p><p class="graf--p">Hope you learned something new today.</p><p class="graf--p">Have a look at our Android tutorials <b class="graf--bold"><a class="markup--anchor" target="_blank" href="https://mindorks.com/android-tutorial">here</a></b>.</p><p class="graf--p">Do share this blog with your fellow developers to spread the knowledge. You can read more blogs on Android on our <a class="markup--anchor" target="_blank" href="https://blog.mindorks.com/">blogging website</a>.</p><p class="graf--p"><b class="graf--bold"><a class="markup--anchor" target="_blank" href="https://bootcamp.mindorks.com/">Apply Now: MindOrks Android Online Course and Learn Advanced Android</a></b></p><p class="graf--p">Happy Learning :)</p><p class="graf--p"><b class="graf--bold">Team MindOrks!</b></p><p class="graf--p"><b class="graf--bold">Also, Let’s connect on</b> <b class="graf--bold"><a class="markup--anchor" target="_blank" href="https://twitter.com/hiii_sumit">Twitter</a>,</b> <b class="graf--bold"><a class="markup--anchor" target="_blank" href="https://www.linkedin.com/in/mishra3452/">Linkedin</a>,</b> <b class="graf--bold"><a class="markup--anchor" target="_blank" href="https://github.com/mishra3452">Github</a>, and</b> <b class="graf--bold"><a class="markup--anchor" target="_blank" href="https://www.facebook.com/mishra3452">Facebook</a></b></p>',author:17146,img_url:"/images/how-to-use-memory-heap-dumps-data-banner.png",blog_url:"how-to-use-memory-heap-dumps-data",likes:0,rank:0,category:1,published_at:"28th October 2019"},author:{id:17146,name:"Sumit Mishra",google_profile_pic:"https://lh3.googleusercontent.com/a-/AOh14GiHP4JrkmlLjuz_uG1g4E0MhTUClSNytqB8o-pxCA=s96-c?sz=300",fb_profile_pic:null,profile_tagline:"Software Development Engineer at MindOrks",fb_profile_url:"https://www.facebook.com/mishra3452",google_plus_profile_url:null,twitter_profile_url:"https://twitter.com/hiii_sumit",github_profile_url:"https://github.com/mishra3452",linkedin_profile_url:"https://www.linkedin.com/in/sumit-mishra-a15499135/"},isFetching:!1,similarBlogs:[{id:371,title:"How to encrypt data safely on device and use the AndroidKeystore?",description:"In this blog, we will learn how to encrypt data safely in Android device and how to use Androidkeystore. We will learn about key encryption, file encryption, and how to encrypt SharedPreferences.",author:14897,img_url:"/images/how-to-encrypt-data-safely-on-a-device-and-use-the-androidkeystore-banner.png",blog_url:"how-to-encrypt-data-safely-on-device-and-use-the-androidkeystore",likes:0,rank:0,category:1,published_at:"28th October 2019",score:4.20841121673584},{id:84,title:"Detecting and fixing memory leaks in android",description:"Many a time we see ANR dialog while using android apps, lags in our apps, we also see OutOfMemoryError in Android Studio while building apps. All these kinds of stuff happen due to memory leaks.",author:30,img_url:"https://s3.ap-south-1.amazonaws.com/mindorks/blogs/detecting-and-fixing-memory-leaks-in-android.jpg",blog_url:"detecting-and-fixing-memory-leaks-in-android",likes:1,rank:0,category:1,published_at:"27th August 2017",score:2.7959113121032715},{id:329,title:"Understanding Memory Usage In Android",description:"In this blog, we will understand the Android memory usage. We will see how the memory usage of your application can increase or decrease your users. The blog contains detailed information about memory usage in Android.",author:14897,img_url:"/images/understaing-android-memory-usage-banner.png",blog_url:"understanding-memory-usage-in-android",likes:0,rank:0,category:1,published_at:"17th September 2019",score:2.7959113121032715},{id:24,title:"Learn Kotlin - Data Class",description:"We frequently create a class to do nothing but hold data. In such a class some standard functionality is often mechanically derivable from the data. In Kotlin, this is called a data class and is marked as data.",author:14897,img_url:"https://s3.ap-south-1.amazonaws.com/mindorks/blogs/learn-kotlin-data-class.png",blog_url:"learn-kotlin-data-class",likes:1,rank:0,category:1,published_at:"22nd May 2017",score:2.3285839557647705},{id:380,title:"Understanding Storage System To Store Data In Android",description:"In this blog, we will understand about the Android Storage System. We will learn about the Internal Storage, External Storage, Shared Preference, Database, and Shared Storage. We will also learn when to use which storage system in Android.",author:17146,img_url:"/images/understanding-storage-system-to-store-data-in-android-banner.png",blog_url:"understanding-storage-system-to-store-data-in-android",likes:0,rank:0,category:1,published_at:"17th December 2019",score:2.3285839557647705},{id:448,title:"Data Access Objects - DAO in Room",description:"In this blog, we are going to learn about Data Access Objects or DAO in Room Persistent Library.",author:14040,img_url:"/images/data-access-objects-dao-in-room-banner-509915bdcce194cb.png",blog_url:"data-access-objects-dao-in-room",likes:0,rank:0,category:1,published_at:"18th May 2020",score:2.3285839557647705}],isSimilarBlogsFetching:!1},loginData:{data:null,isLoggingIn:!1,isLoggingOut:!1,loginState:!1,isForcedLogout:!1,isTokenRefreshed:!1,isRedirectHome:!1,message:""},updatesData:{news:null,inspirations:null,isNewsFetching:!0,isInspirationsFetching:!0},blogEditorData:{blogId:null,blogDetailsFormData:{title:"",description:"",imgUrl:"",blogUrl:"",category:"",categories:[],isWriting:!1,isTitleError:!1,isDescriptionError:!1,isImgUrlError:!1,isBlogUrlError:!1,isCategoryError:!1,isUploadingImage:!1,uploadedImageUrl:null},editorState:null,editorText:null,successMessage:null,errorMessage:null,isSending:!1,isMsgToShow:!1,isPublished:!1,isSubmitted:!1,isDraft:!0,isEditOfExistingBlog:!1,isFetchingBlogCategories:!1,isUploadingImage:!1,uploadedImageUrl:null},myBlogsData:{data:null,isSubmittedBlogsFetching:!0,isDraftBlogsFetching:!0,isPublishedBlogsFetching:!0,successMessage:null,errorMessage:null,isMsgToShow:!1,tabNames:["drafts","submissions","published"],selectedTab:"drafts",isFetchingBlog:!1,isDeletingBlog:!1,openEditorPage:!1},profilePreviewData:{profile:null,blogs:null,isFetchingProfile:!1,isFetchingAuthorBlogs:!1,successMessage:null,errorMessage:null,isMsgToShow:!1,isUserNotRegistered:!1,redirectToMyProfileEdit:!1},profileEditableData:{userId:null,name:null,fbProfilePicUrl:null,googleProfilePicUrl:null,profileFormData:{tagline:"",fbProfileUrl:"",googlePlusProfileUrl:"",twitterProfileUrl:"",githubProfileUrl:"",linkedinProfileUrl:"",isWriting:!1,isTaglineError:!1,isFbProfileUrlError:!1,isGooglePlusProfileUrlError:!1,isTwitterProfileUrlError:!1,isGithubProfileUrlError:!1,isLinkedinProfileUrlError:!1},isSavingProfile:!1,successMessage:null,errorMessage:null,isMsgToShow:!1,redirectToProfilePreview:!1},submitBlogData:{formData:{email:"",name:"",link:"",isWriting:!1,isNameError:!1,isEmailError:!1,isLinkError:!1,dismissMsg:!1},successMessage:null,errorMessage:null,isSubmitting:!1},advertisementsData:{data:{},isLoading:!1},recaptchaData:{verified:!1,successMessage:null,errorMessage:null},blogSearchData:{searches:null,isSearching:!1}}
  </script>
  <script async="" src="https://www.google-analytics.com/analytics.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-91686131-1","auto"),ga("require","cleanUrlTracker"),ga("require","eventTracker"),ga("require","impressionTracker"),ga("require","outboundLinkTracker"),ga("require","urlChangeTracker"),ga("require","maxScrollTracker"),ga("require","mediaQueryTracker"),ga("require","outboundFormTracker"),ga("require","outboundLinkTracker"),ga("require","pageVisibilityTracker"),ga("require","socialWidgetTracker"),ga("require","urlChangeTracker"),ga("send","pageview")
  </script>
  <script defer="defer" src="/assets/autotrack.js" type="text/javascript">
  </script>
  <script src="/assets/highlight.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/vendor-bundle-1.8.6.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/app-bundle-1.8.6.js" type="text/javascript">
  </script>
 </head>
 <body>
  <div id="root">
   <div class="screen app-load-content" data-reactroot="">
    <div class="ui centered grid">
     <div class="row" style="padding:0">
      <div class="ui fixed menu navbar huge borderless grid" style="background-color:#fff;height:60px">
      </div>
     </div>
     <div class="centered computer only row" style="padding:0">
      <div class="ui fixed top menu navbar huge borderless grid header-container" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="right menu">
        <a class="item" href="https://janisharali.com" target="_blank">
         Mentor Ali
        </a>
        <a class="item" href="https://amitshekhar.me" target="_blank">
         Mentor Amit
        </a>
       </div>
      </div>
     </div>
     <div class="tablet only mobile only row" style="padding:0">
      <div class="ui fixed top navbar huge menu borderless" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="item">
       </div>
      </div>
     </div>
    </div>
    <div class="header-height">
    </div>
    <div aria-live="assertive" class="redux-toastr">
     <div>
      <div class="top-left">
      </div>
      <div class="top-right">
      </div>
      <div class="top-center">
      </div>
      <div class="bottom-left">
      </div>
      <div class="bottom-right">
      </div>
      <div class="bottom-center">
      </div>
     </div>
    </div>
    <div class="content-container theme">
     <div class="ui centered one column grid" style="padding-bottom:80px;background-color:#fff">
      <div class="ten wide computer fifteen wide mobile fifteen wide tablet column" style="margin-top:50px">
       <div>
        <div class="blog-page-author">
         <div class="ui small header">
          <img alt="Sumit Mishra" class="ui circular image" src="https://lh3.googleusercontent.com/a-/AOh14GiHP4JrkmlLjuz_uG1g4E0MhTUClSNytqB8o-pxCA=s96-c?sz=300"/>
          <div class="content">
           Sumit Mishra
           <div class="sub header" style="margin-top:5px">
            28th October 2019
           </div>
          </div>
         </div>
        </div>
        <div id="content">
         <article class="template">
          <div class="postContent">
           <div class="notesSource">
            <div class="postField postField--body" id="editor">
             <section class="section--first section--last">
              <div class="section-divider layoutSingleColumn-template">
               <hr class="section-divider"/>
              </div>
              <div class="section-content">
               <div class="section-inner layoutSingleColumn-template">
                <div>
                 <h1 class="graf--h1">
                  How to use Memory Heap Dumps data?
                 </h1>
                 <div class="graf-image graf-caption">
                  <img alt="How to use Memory Heap Dumps data?" class="graf-image" src="/images/how-to-use-memory-heap-dumps-data-banner.png"/>
                 </div>
                 <p class="graf--p">
                  Whenever we develop some Android application then the most common thing that all the developers are worried about is the usage of memory by the application. This is because if your application is using large memory then you may lose your users as the majority of the population use low memory devices. The developers try to find each and every memory leak present in the application so that they can optimize their app to be leaner and faster. Also, if you get to know which objects are using memory at a particular instant of time then it becomes an easier task for you to remove memory leaks in your application.
                 </p>
                 <p class="graf--p">
                  In this blog, we will be learning how to use memory heap dumps data to identify memory leaks. So, let's get started.
                 </p>
                 <h4 class="graf--h3">
                  About Profiler
                 </h4>
                 <p class="graf--p">
                  In Android Studio, we have something called Profiler that provides the CPU, memory, network, and energy usage information of our application. This shows a graphical representation of the usage of CPU, memory, network, and energy by our application. With the help of this data, we can optimize our code. But out of these four i.e. CPU, memory, network, and energy, the one that is mostly used by every developer is Memory Profiler. So, let's see what this Memory Profiler is and before that, we will learn the reason for memory leaks and then try to identify that with the help of Memory Profiler.
                 </p>
                 <h4 class="graf--h3">
                  The Problem
                 </h4>
                 <p class="graf--p">
                  Memory Profiler helps us in finding memory leaks and memory churn.
                 </p>
                 <blockquote class="graf--blockquote">
                  A memory leak is an object which becomes inaccessible to the running program but still occupies memory.
                 </blockquote>
                 <p class="graf--p">
                  But in Java or Kotlin, we have something called Garbage Collection. When your app is no longer using some objects, the garbage collector releases the unused memory back to the heap. For the process of garbage collection, the JVM will first identify the Garbage Collection Root(GC Root) which is an object that is accessible from outside the heap like running thread and local variables. Then all the objects that are accessible from the Garbage Collection Root are identified and these objects are retained. And finally, the rest of the objects that are not accessible from the Garbage Collection Root are considered as garbage and they are recycled.
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="How to use Memory Heap Dumps data?" class="graf-image" src="/images/how-to-use-memory-heap-dumps-data-garbage-collector-working.png"/>
                 </div>
                 <p class="graf--p">
                  So, where does the concept of Memory Leak come?
                 </p>
                 <blockquote class="graf--blockquote">
                  <i class="graf--italic">
                   Life was good till we were not introduced with memory leaks.
                  </i>
                 </blockquote>
                 <p class="graf--p">
                  Memory Leaks come into play when your object is not yet destroyed but at the same time, you are not in a position to use that object. So, your object will hold the memory and you will not be able to use that memory.
                 </p>
                 <blockquote class="graf--blockquote">
                  In other words, we can say that memory leaks come into play due to abandoned objects that can never be used in the program but it is accessible.
                 </blockquote>
                 <h4 class="graf--h3">
                  The Solution
                 </h4>
                 <p class="graf--p">
                  To find memory leaks in our application we can use the memory profiler. To open memory profiler in our application, follow the below steps:
                 </p>
                 <ol>
                  <li>
                   Click on
                   <b class="graf--bold">
                    View &gt; Tool Window &gt; Profiler
                   </b>
                   .
                  </li>
                  <li>
                   Run your application on the target device.
                  </li>
                  <li>
                   You will see the graph of CPU, memory, network, and energy usage. Click anywhere on the memory timeline to open Memory Profiler. The following screen will be opened:
                  </li>
                 </ol>
                 <div class="graf-image graf-caption">
                  <img alt="How to use Memory Heap Dumps data?" class="graf-image" src="/images/how-to-use-memory-heap-dumps-data-memory-profiler.jpg"/>
                 </div>
                 <p class="graf--p">
                  From here, you can avoid memory leak for two types of objects(mainly) i.e. Activity and Fragment. We are concerned about these because they often consume a lot of memory. The best thing is that you need not detect the leaks manually, from Android Studio version 3.6 or higher, the memory leaks of activities and fragments are detected by Memory Profiler. Since these two classes have a real defined behaviour. So, how can a profiler tell that these classes have a leak? For Activity, if it has been destroyed but is still referenced then there is a leak. For Fragments, if we don't see a FragmentManager associated with it and it is still referenced, then it is the case of leak.
                 </p>
                 <p class="graf--p">
                  So, to identify a leak, due to some activities or fragments, the very first thing we need to do is capture the heap dump. Let's see how.
                 </p>
                 <h4 class="graf--h3">
                  Memory Heap Dump
                 </h4>
                 <p class="graf--p">
                  A heap dump is used to find which object in our app is using memory at the time of capturing the heap dump. A heap dump can help us in identifying memory leaks by showing objects that are still in memory and that is not going to be used by the program. By capturing the heap dump, you can get the following information:
                 </p>
                 <ol>
                  <li>
                   Memory used by each object.
                  </li>
                  <li>
                   Reference of each object that is being held in the code.
                  </li>
                  <li>
                   Type of object that is allocated by our app.
                  </li>
                  <li>
                   The call stack for where an object was allocated.
                  </li>
                 </ol>
                 <p class="graf--p">
                  To capture a heap dump, you have one option called "Dump Java heap" in the Memory Profiler. Click on it.
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="How to use Memory Heap Dumps data?" class="graf-image" src="/images/how-to-use-memory-heap-dumps-data-dump-java-heap-start.png"/>
                 </div>
                 <p class="graf--p">
                  The following screen will be displayed to you:
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="How to use Memory Heap Dumps data?" class="graf-image" src="/images/how-to-use-memory-heap-dumps-data-dump-java-heap.png"/>
                 </div>
                 <p class="graf--p">
                  We have lots of data with us. There are four classes that are made available to us. They are:
                 </p>
                 <ol>
                  <li>
                   <b class="graf--bold">
                    Allocations:
                   </b>
                   It shows the number of allocations or instances in the heap.
                  </li>
                  <li>
                   <b class="graf--bold">
                    Native Size:
                   </b>
                   It is the total amount of native memory(in bytes) that is used by this object type (only visible for Android 7.0 or higher).
                  </li>
                  <li>
                   <b class="graf--bold">
                    Shallow Size:
                   </b>
                   It is the memory(in bytes) consumed by the object itself.
                  </li>
                  <li>
                   <b class="graf--bold">
                    Retained Size:
                   </b>
                   It is the memory(in bytes) that is used due to all the instances of this class.
                  </li>
                 </ol>
                 <div class="graf-image graf-caption">
                  <img alt="How to use Memory Heap Dumps data?" class="graf-image" src="/images/how-to-use-memory-heap-dumps-data-memory-dump-data.png"/>
                 </div>
                 <p class="graf--p">
                  So, by using this data, you can identify the classes that are worth attention. If you click on any of the class names, then the Memory Profiler will open an Instance View showing a list of the instance of this class.
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="How to use Memory Heap Dumps data?" class="graf-image" src="/images/how-to-use-memory-heap-dumps-data-memory-leak-example.jpg"/>
                 </div>
                 <p class="graf--p">
                  Here, you will find one new data i.e. the depth. The depth is the shortest number of hops from any Garbage Collection Root to the selected instance. The closer an object is to the Garbage Collection Root, higher chances are there for having multiple paths from the GC Root to this object and a lower chance to be garbage collected.
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="How to use Memory Heap Dumps data?" class="graf-image" src="/images/how-to-use-memory-heap-dumps-data-memory-dump-example.png"/>
                 </div>
                 <p class="graf--p">
                  In the above example, for the red node, if any of the references to the left is broken, the red node will be inaccessible and it will be garbage collected. But for the blue node, if you want garbage collection, then you have to break the path from the left as well as right.
                 </p>
                 <h4 class="graf--h3">
                  Example
                 </h4>
                 <p class="graf--p">
                  While using any listener, we should always unregister the listener when not in use because if we are not doing this then the listener will be there in the GC Root and it will never be garbage collected. So, always try to unregister the listener in
                  <b class="graf--bold">
                   <i class="graf--italic">
                    onPause()
                   </i>
                  </b>
                  or
                  <b class="graf--bold">
                   <i class="graf--italic">
                    onStop()
                   </i>
                  </b>
                  or
                  <b class="graf--bold">
                   <i class="graf--italic">
                    onDestroy()
                   </i>
                  </b>
                  method. Following is an example of LocationListener:
                 </p>
                 <pre><code class="language-java graf graf--code">public class LocationListenerActivity extends Activity implements LocationUpdate{

  @Override
  public void onLocationChange(Location location){
    
  }
  
  @Override
  public void onStart(){
   LocationListener.get().register(this);
  }
  
  @Override
  public void onStop(){
   LocationListener.get().unregister(this);
  }

}</code></pre>
                 <p class="graf--p">
                  If you are not unregistering the listener then in the dump java heap, you will see a status that says that we are having a memory leak due to the LocationListener.
                 </p>
                 <p class="graf--p">
                  That's how you can use the data from the heap dump of the Memory Profiler to find leaks and then optimize and correct the code for better results.
                 </p>
                 <p class="graf--p">
                  Hope you learned something new today.
                 </p>
                 <p class="graf--p">
                  Have a look at our Android tutorials
                  <b class="graf--bold">
                   <a class="markup--anchor" href="https://mindorks.com/android-tutorial" target="_blank">
                    here
                   </a>
                  </b>
                  .
                 </p>
                 <p class="graf--p">
                  Do share this blog with your fellow developers to spread the knowledge. You can read more blogs on Android on our
                  <a class="markup--anchor" href="https://blog.mindorks.com/" target="_blank">
                   blogging website
                  </a>
                  .
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   <a class="markup--anchor" href="https://bootcamp.mindorks.com/" target="_blank">
                    Apply Now: MindOrks Android Online Course and Learn Advanced Android
                   </a>
                  </b>
                 </p>
                 <p class="graf--p">
                  Happy Learning :)
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Team MindOrks!
                  </b>
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Also, Let’s connect on
                  </b>
                  <b class="graf--bold">
                   <a class="markup--anchor" href="https://twitter.com/hiii_sumit" target="_blank">
                    Twitter
                   </a>
                   ,
                  </b>
                  <b class="graf--bold">
                   <a class="markup--anchor" href="https://www.linkedin.com/in/mishra3452/" target="_blank">
                    Linkedin
                   </a>
                   ,
                  </b>
                  <b class="graf--bold">
                   <a class="markup--anchor" href="https://github.com/mishra3452" target="_blank">
                    Github
                   </a>
                   , and
                  </b>
                  <b class="graf--bold">
                   <a class="markup--anchor" href="https://www.facebook.com/mishra3452" target="_blank">
                    Facebook
                   </a>
                  </b>
                 </p>
                </div>
               </div>
              </div>
             </section>
            </div>
           </div>
          </div>
         </article>
        </div>
       </div>
       <div class="ui divider">
       </div>
      </div>
      <div class="stretched fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui large center aligned header" style="padding-top:20px">
        Recommended for You
       </div>
      </div>
      <div class="fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui centered grid">
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="How to encrypt data safely on device and use the AndroidKeystore?" class="ui centered image" src="/images/how-to-encrypt-data-safely-on-a-device-and-use-the-androidkeystore-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            How to encrypt data safely on device and use the AndroidKeystore?
           </div>
           <div class="meta">
            28th October 2019
           </div>
           <div class="description">
            In this blog, we will learn how to encrypt data safely in Android device and how to use Androidkeystore. We will learn about key encryption, file encryption, and how to encrypt SharedPreferences.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="Detecting and fixing memory leaks in android" class="ui centered image" src="https://s3.ap-south-1.amazonaws.com/mindorks/blogs/detecting-and-fixing-memory-leaks-in-android.jpg" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Detecting and fixing memory leaks in android
           </div>
           <div class="meta">
            27th August 2017
           </div>
           <div class="description">
            Many a time we see ANR dialog while using android apps, lags in our apps, we also see OutOfMemoryError in Android Studio while building apps. All these kinds of stuff happen due to memory leaks.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="Understanding Memory Usage In Android" class="ui centered image" src="/images/understaing-android-memory-usage-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Understanding Memory Usage In Android
           </div>
           <div class="meta">
            17th September 2019
           </div>
           <div class="description">
            In this blog, we will understand the Android memory usage. We will see how the memory usage of your application can increase or decrease your users. The blog contains detailed information about memory usage in Android.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="Learn Kotlin - Data Class" class="ui centered image" src="https://s3.ap-south-1.amazonaws.com/mindorks/blogs/learn-kotlin-data-class.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Learn Kotlin - Data Class
           </div>
           <div class="meta">
            22nd May 2017
           </div>
           <div class="description">
            We frequently create a class to do nothing but hold data. In such a class some standard functionality is often mechanically derivable from the data. In Kotlin, this is called a data class and is marked as data.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="Understanding Storage System To Store Data In Android" class="ui centered image" src="/images/understanding-storage-system-to-store-data-in-android-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Understanding Storage System To Store Data In Android
           </div>
           <div class="meta">
            17th December 2019
           </div>
           <div class="description">
            In this blog, we will understand about the Android Storage System. We will learn about the Internal Storage, External Storage, Shared Preference, Database, and Shared Storage. We will also learn when to use which storage system in Android.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="Data Access Objects - DAO in Room" class="ui centered image" src="/images/data-access-objects-dao-in-room-banner-509915bdcce194cb.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Data Access Objects - DAO in Room
           </div>
           <div class="meta">
            18th May 2020
           </div>
           <div class="description">
            In this blog, we are going to learn about Data Access Objects or DAO in Room Persistent Library.
           </div>
          </div>
         </a>
        </div>
       </div>
      </div>
     </div>
    </div>
    <div style="background:#fff">
     <footer class="content-container">
      <div class="ui centered padded grid" style="padding-top:40px;background:linear-gradient(to right,#c4e0e0,#e5f1f1)">
       <h2 class="ui huge icon center aligned header">
        <div class="content">
         Connect With Your Mentors
        </div>
       </h2>
       <div class="centered row">
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Janishar Ali" class="ui medium circular image" src="/assets/ali.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://janisharali.com" target="_blank">
             Janishar Ali
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://janisharali.com" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/janisharali" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Amit Shekhar" class="ui medium circular image" src="/assets/amit.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://amitshekhar.me" target="_blank">
             Amit Shekhar
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://amitshekhar.me" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/amitiitbhu" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
      <div class="ui divider" style="margin:unset">
      </div>
      <h5 class="ui header" style="padding:16px;margin:unset;color:#555">
       <i aria-hidden="true" class="copyright icon">
       </i>
       <div class="content">
        Copyright 2022, MindOrks Nextgen Private Limited
       </div>
      </h5>
     </footer>
    </div>
   </div>
  </div>
  <script type="text/javascript">
   window.hljs.initHighlightingOnLoad()
  </script>
 </body>
</html>