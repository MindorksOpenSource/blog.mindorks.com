<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>
   Best Practices for Using Text in Android
  </title>
  <meta charset="utf-8"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="minimum-scale=1,initial-scale=1,width=device-width,shrink-to-fit=no" name="viewport"/>
  <link href="https://blog.mindorks.com/best-practices-for-using-text-in-android" rel="canonical"/>
  <meta content="986249072156-dabps0lf90smluddrk5rkqsdjghk3hd3.apps.googleusercontent.com" name="google-signin-client_id"/>
  <meta content="android, learn android app development, android app development courses, android blogs, android tutorial" name="keywords"/>
  <meta content="Best Practices for Using Text in Android" property="og:title"/>
  <meta content="website" property="og:type"/>
  <meta content="https://blog.mindorks.com/best-practices-for-using-text-in-android" property="og:url"/>
  <meta content="/images/best-practices-for-using-texts-in-android-banner.png" property="og:image"/>
  <meta content="In this blog, we will learn some of the best practices of using texts in Android. This is very important because we know that almost 70% of the application is covered by text. So, the performance of the application majorly depends on the texts present in it. Let's learn how to do that." property="og:description"/>
  <meta content="Best Practices for Using Text in Android" property="twitter:title"/>
  <meta content="In this blog, we will learn some of the best practices of using texts in Android. This is very important because we know that almost 70% of the application is covered by text. So, the performance of the application majorly depends on the texts present in it. Let's learn how to do that." name="twitter:description"/>
  <meta content="/images/best-practices-for-using-texts-in-android-banner.png" name="twitter:image:src"/>
  <meta content="summary_large_image" name="twitter:card"/>
  <meta content="@MindorksNextGen" name="twitter:site"/>
  <meta content="In this blog, we will learn some of the best practices of using texts in Android. This is very important because we know that almost 70% of the application is covered by text. So, the performance of the application majorly depends on the texts present in it. Let's learn how to do that." name="description"/>
  <meta content="1620001391374687" property="fb:app_id"/>
  <link href="/styles/vendor-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link href="/styles/app-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link as="style" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" onload='this.onload=null,this.rel="stylesheet"' rel="preload"/>
  <noscript>
   <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
  </noscript>
  <script type="text/javascript">
   window.__PRELOADED_STATE__={toastr:{toastrs:[],confirm:null},blogData:{data:{},latestBlogs:null,isFetching:!0,isFetchingLatestBlogs:!1,currentCategory:"",categories:[]},contactData:{formData:{email:"",name:"",phone:"",message:"",isWriting:!1,isNameError:!1,isEmailError:!1,isPhoneError:!1,isMessageError:!1,dismissMsg:!1},successMessage:null,errorMessage:null,isSending:!1},communityData:{formData:{email:"",isEmailError:!1,isWriting:!1,isSending:!1,dismissMsg:!1},successMessage:null,errorMessage:null},blogPageData:{blogId:341,data:{id:341,title:"Best Practices for Using Text in Android",description:"In this blog, we will learn some of the best practices of using texts in Android. This is very important because we know that almost 70% of the application is covered by text. So, the performance of the application majorly depends on the texts present in it. Let's learn how to do that.",text:'<h1 class="graf--h1">Best Practices for Using Text in Android</h1> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/best-practices-for-using-texts-in-android-banner.png class=\'graf-image\' alt=\'Best Practices for Using Text in Android\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">The most commonly used element in Android application is Text. We use Text in the form of TextView or in the form of EditText. So, to have a better performance, we must use Text in the best possible way. In this blog, we will learn some of the best practices for using text in Android. The following is the timeline for this blog:</p><ol type="1"><li>Improving Text performance</li><li>Text Styling</li><li>Custom Fonts</li><li>System Fonts</li><li>Editable Text</li><li>Closing Notes</li></ol><h4 class="graf--h3">Improving Text performance</h4><p class="graf--p">Performance of an Android application is very important. As we know that in an Android application, almost 70% of the application area is filled with Text and due to this the performance of application majorly depends on Texts. So in order to do so, various steps were taken by Andriod Developers all over the world. In Google I/O 19, the following changes were announced:</p><p class="graf--p"><b class="graf--bold">Hyphenation:</b> Now, the hyphenation is <b class="graf--bold">off by default</b> in Android Q and in AppCompact v1.1.0. This is done because Hyphenation has a huge impact on text performance. To be more precise, 70% of the text work is done for hyphenation. If you want to turn on hyphenation, then you have to manually add the hyphenation code. You can do so by setting the hyphenation frequency to normal in <b class="graf--bold"><i class="graf--italic">style.xml</i></b> file:</p><pre><code class="language-java graf graf--code">&lt;style name="MyTextAppearnace" parent="TextAppearance.AppCompat"&gt;\n    &lt;item name="android:hyphenationFrequency"&gt;normal&lt;/item&gt;\n&lt;/style&gt;</code></pre><p class="graf--p">Or in your <b class="graf--bold"><i class="graf--italic">layout.xml</i></b> file, you can add a TextView with hyphenation frequency set to normal.</p><pre><code class="language-java graf graf--code">&lt;TextView android:hyphenationFrequency="normal"/&gt;</code></pre><p class="graf--p"><b class="graf--bold">Precomputed Text:</b> It is a tool that is used to do text work in the background thread. So, it does 90% of the TextView work. It is available from API 21 onward. At the I/O 19, new utility APIs were added for easy integration with RecyclerView prefetch. Let’s understand the RecyclerView prefetch. </p><p class="graf--p">In the below figure we have two threads i.e. the UI thread and the Render thread. The UI thread does some work and passes the rendering work to the render thread. The eye icon shows the timing of VSYNC i.e. Vertical SYNC. In normal case, there is no problem with the VSYNC. But if some work takes time and couldn’t finish until the next VSYNC then it will block the next VSYNC.  </p><p class="graf--p">One thing you might notice here is that the UI Thread is ideal for a long period of time. At a time, only one thread i.e. either the UI or the Render thread is working. So, we can use this ideal time to do some work on the UI Thread and in this way we can avoid VSYNC overlapping. This is called prefetch as we are doing the work before we come into the condition of VSYNC overlapping.</p><p class="graf--p">Image source: Google I/O 19</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/best-practices-for-using-text-in-android-vsync-problem.png class=\'graf-image\' alt=\'Best Practices for Using Text in Android\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">The problem here is that if the process still takes a very large amount of time than the VSYNC, then again the VSYNC overlapping will be seen and UI junk will take place. One solution to this problem is that we can move some work to some background thread by using <code class="graf--code-inline">PrecomputedText</code> and remove the UI junk.</p><p class="graf--p">Image source: Google I/O 19</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/best-practices-for-using-text-in-android-vsync-solution.png class=\'graf-image\' alt=\'Best Practices for Using Text in Android\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">For moving some text work to a background thread, some APIs are introduced:</p><pre><code class="language-java graf graf--code">1. PrecomputedTextCompact.getTextFuture()\n2. AppCompatTextView.setTextFuture()</code></pre><p class="graf--p">Let’s see how to implement this:</p><pre><code class="language-java graf graf--code">override fun onBindViewHolder(viewHolder: ViewHolder, pos:Int) {\n    viewHolder.textView.setTextFuture(\n        PrecomputedTextCompat.getTextFuture(\n            dataSet[pos],\n            viewHolder.textView.getTextMetricsParamsCompat(),\n            null)\n    )\n}</code></pre><blockquote class="graf--blockquote"><b class="graf--bold">Note: </b>Don’t change the text style after using the <i class="graf--italic">getTextFuture</i>. You can do it before using the <i class="graf--italic">getTextFuture</i>.</blockquote><h4 class="graf--h3">Text Styling</h4><p class="graf--p">After the Text performance, the next thing that should be taken care of is Text Styling. By styling the text, we change the look and feel of the text. There are many ways of doing this. Let&#x27;s learn one by one.</p><p class="graf--p"><b class="graf--bold">By using TextView attributes</b></p><p class="graf--p">We can style the text by using TextView attributes such as textSize, textColor, etc. The following is an example of the same:</p><pre><code class="language-java graf graf--code">&lt;TextView\n    ...\n    android:textColor="@color/colorPrimaryDark"\n    android:textSize="16sp"\n    android:textStyle="bold"\n    ...    \n/&gt;</code></pre><p class="graf--p">But the problem here is that by using the above method we can style only one TextView. What if you want to add the same text colour or the same style to all the TextViews present in your application? To do so, you can use styles.</p><p class="graf--p"><b class="graf--bold">By using styles.xml</b></p><p class="graf--p">You can define a certain style in the <code class="graf--code-inline">styles.xml</code> file for your TextViews and then use this style wherever you need a TextView. The following is an example of the same:</p><pre><code class="language-java graf graf--code">&lt;!-- adding TextView styles in styles.xml --&gt;\n&lt;style name="MyApp.Widget.Text.Body" parent="..."&gt;\n    &lt;item name="android:textSize"&gt;12sp&lt;/item&gt;\n    &lt;item name="android:textColor"&gt;?android:attr/textColorPrimary&lt;/item&gt;\n&lt;/style&gt;\n\n\n&lt;!-- using style in TextView --&gt;\n&lt;TextView\n    ...\n    style:"@style/MyApp.Widget.Text.Body"\n/&gt;</code></pre><p class="graf--p">In the above example, the style of the TextView will be similar to the styles declared in the <code class="graf--code-inline">styles.xml</code> file.</p><p class="graf--p">There may be cases where you want to change some attributes of a particular TextView and keep the rest attributes as it is like other TextViews present in the application. For example, for a particular TextView, you want to set the textSize to 16sp. How to do that? Let&#x27;s find.</p><p class="graf--p"><b class="graf--bold">Precedence Order</b></p><p class="graf--p">So, we want to change the textSize of one TextView and keep other attributes as it is. To do so, we can manually add the textSize attribute in desired TextView. For example:</p><pre><code class="language-java graf graf--code">&lt;TextView\n    ...\n    style:"@style/MyApp.Widget.Text.Body"\n    android:textSize="16sp"\n/&gt;</code></pre><p class="graf--p">Here in the above example, the size of the TextView will be 16sp and not 12 sp because the view attribute overrides the style.</p><p class="graf--p">Every view has some default style but this default style will be overridden by some other style if we add it manually. So, the precedence order will be:</p><p class="graf--p"><b class="graf--bold">View &gt; Style &gt; Default Style &gt; TextAppearance</b></p><p class="graf--p">Also, the <code class="graf--code-inline">TextAppearanceSpan</code> is updated to read and apply typeface or shadow. Two new spans are added in Android Q i.e. the <code class="graf--code-inline">LineHeightSpan</code> and <code class="graf--code-inline">LineBackgroundSpan</code>. <b class="graf--bold">The properties set by the Span will override any other property of the view</b>. So, the updated precedence order will be:</p><p class="graf--p"><b class="graf--bold">Span &gt; View &gt; Style &gt; Default Style &gt; TextAppearance</b></p><p class="graf--p">If you want to make some app-level changes i.e. if you want to change the font of the whole app at one go then you can perform this with the help of Themes. In the below example, we are changing the font-family of the text used in an application:</p><pre><code class="language-java graf graf--code">&lt;style name="Theme.MyApp"\n    parent="@style/Theme.MaterialComponents.Light"&gt;\n    ...\n    &lt;item name="android:fontFamily"&gt;@font/space_mono&lt;/item&gt;\n&lt;/style&gt;</code></pre><p class="graf--p">So, the Theme will come before the TextAppearance in the precedence list:</p><p class="graf--p"><b class="graf--bold">Span &gt; View &gt; Style &gt; Default Style &gt; Theme &gt; TextAppearance</b></p><h4 class="graf--h3">Custom Fonts</h4><p class="graf--p">There are very few fonts that are available in Android and due to this, the concept of <a class="markup--anchor" target="_blank" href="https://blog.mindorks.com/using-custom-and-downloadable-fonts-in-android">downloadable fonts</a> came into existence.</p><p class="graf--p">Let’s have a look at the below image:</p><p class="graf--p">Image source: Google I/O 19</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/best-practices-for-using-text-in-android-button-font.png class=\'graf-image\' alt=\'Best Practices for Using Text in Android\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">Here, we are having one button and on the button, there is one lock icon and texts are there on both the sides of the icon. So, for the icon, we want some other font and for the remaining text, we want to use some other font. But we will be in trouble here because for a button we can have only one typeface and this can be achieved by having only one font family. But here we need two font family(one for text and other for the icon). </p><p class="graf--p">Here, we can use a typeface span, give the icon font into it and cover the icon character and then for the whole button we can choose any font.</p><p class="graf--p">The things become worse if we are having more than one language support with more than one fonts. Here, we can’t make use of spans.</p><p class="graf--p">Image source: Google I/O 19</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/best-practices-for-using-text-in-android-different-font-language.png class=\'graf-image\' alt=\'Best Practices for Using Text in Android\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">So, in the Android Q, <code class="graf--code-inline">CustomFallbackBuilder</code> is added to the Typeface class. It enables you to create a typeface with multiple fonts or font family. The following is an example of multi-language and multi-font:</p><pre><code class="language-java graf graf--code">textView.typeface = Typeface.CustomFallbackBuilder(\n    FontFamily.Builder(\n        Font.Builder(assets, "lato.ttf").build()\n    ).build()\n).addCustomFallback(\n    FontFamily.Builder(\n        Font.Builder(assets, "kosugi.ttf").build()\n    ).build()\n).build()</code></pre><p class="graf--p">Following is an example of the icon and text using different fonts:</p><pre><code class="language-java graf graf--code">buttton.typeface = Typeface.CustomFallbackBuilder(\n    FontFamily.Builder(\n        Font.Builder(assets, "lato.ttf").build()\n    ).build()\n).addCustomFallback(\n    FontFamily.Builder(\n        Font.Builder(assets, "icon_font.ttf").build()\n    ).build()\n).build()</code></pre><p class="graf--p">When creating a typeface using this builder, you can add up to 64 font families but you can’t put those fonts together which differ conceptually. Also, you can’t put the same styled font in the same font family.</p><p class="graf--p">In general, the system performs some sequential searching for the fonts. For example, if the font is <b class="graf--bold"><i class="graf--italic">lato</i></b> then it will search for <b class="graf--bold"><i class="graf--italic">lato</i></b>. If <b class="graf--bold"><i class="graf--italic">lato</i></b> is present then that font will be assigned otherwise the system will use the system font fallback use case. Following is the code that will define the system font fallback:</p><pre><code class="language-java graf graf--code">Typeface.CustomFallbackBuilder(\n    FontFamily.Builder(\n        Font.Builder(assets, "lato.ttf").build()\n    ).build()\n).setSystemFallback("sans-serif")\n.build()</code></pre><p class="graf--p">So, in the above example, if a character is not supported by <b class="graf--bold"><i class="graf--italic">lato</i></b>, then the system will use the <b class="graf--bold"><i class="graf--italic">sans-serif</i></b> font.</p><p class="graf--p"><b class="graf--bold">Font.Builder: </b>While creating a font, you can set the weight, and slant of the font object with the help of the builder only.</p><pre><code class="language-java graf graf--code">Font.Builder(assets, "lato_bold_italic.ttf")\n    .setWeight(700)\n    .setSlant(FontStyle.FONT_SLANT_ITALIC)\n    .build()</code></pre><h4 class="graf--h3">System Fonts</h4><p class="graf--p">Android supports over more than 100 languages and all these languages may require different font files. For example, the Hindi font requires the Devanagari font. So, to support a large number of languages, Android devices have many font files. For example, in pixel 3, it has over 270 font files installed. So, these are called System Fonts.</p><p class="graf--p">Image source: Google I/O 19</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/best-practices-for-using-text-in-android-system-fonts.png class=\'graf-image\' alt=\'Best Practices for Using Text in Android\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">To draw text, the NDK applications like document viewer needs to know which system font can render the given text. So, for the same process, two APIs are added:</p><p class="graf--p"><b class="graf--bold">Font Matcher API:</b> <b class="graf--bold"><i class="graf--italic">AFontMatcher_match</i></b> is used to find which system font can render a given text. Look at the below image:</p><p class="graf--p">Image source: Google I/O 19</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/best-practices-for-using-text-in-android-afontmatcher-example.png class=\'graf-image\' alt=\'Best Practices for Using Text in Android\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">In the above image, the first line of the code will return <b class="graf--bold"><i class="graf--italic">NotoSansCJK</i></b> font and length as 3. The second line will return the <b class="graf--bold"><i class="graf--italic">Roboto</i></b> font and length as 8 and the third line of code will return <b class="graf--bold"><i class="graf--italic">NotoSansCJK</i></b> font with length as 2.</p><p class="graf--p">This API will never return a <b class="graf--bold"><i class="graf--italic">Null Pointer</i></b>. If no font is rendered then it will return a <b class="graf--bold"><i class="graf--italic">byte font object</i></b>. And this font object should be used for drawing missing symbol called <b class="graf--bold"><i class="graf--italic">Tofu</i></b>. Also, if no font is matched then the API will return a font which is closest to that required font.</p><p class="graf--p"><b class="graf--bold">Font Enumeration API:</b> If you want to know which font files are there in your Android system then you can find this with the help of Font Enumeration API. This will give access to the system-installed font files. Let’s see how to use this:</p><pre><code class="language-java graf graf--code">for(font in SystemFonts.getAvailableFonts()) {\n    //choose your font here\n}</code></pre><p class="graf--p">Here, with the help of the <code class="graf--code-inline">getAvailableFonts()</code> method, you can access all the fonts present in the System.</p><p class="graf--p">In the case of NDK, we have to create an iterator and then with the help of ASystemFontIterator, you can point the next font and then use it.</p><pre><code class="language-java graf graf--code">ASystemFontIterator* iterator = ASystemFontIterator_open();\nAFont* font;\nwhile((font = ASystemFontIterator_next(iterator)) != nullptr) {\n    AFont_close(font);\n}\nASystemFontIterator_close(iterator);</code></pre><p class="graf--p">This Font Enumeration API is not so fast. So, it is recommended to cache the result and this will be present with you until the next system update because the System fonts are read-only and are updated on System updates.</p><h4 class="graf--h3">Editable Text</h4><p class="graf--p">One of the most used subclasses of TextView is EditText. In general, almost everything applied on the TextView is by default applied to the EditText also. But apart from this, we should care about some of the other things related to the EditText. Following three processes take place while using the EditText:</p><p class="graf--p">Image source: Google I/O 19</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/best-practices-for-using-text-in-android-edittext-process.png class=\'graf-image\' alt=\'Best Practices for Using Text in Android\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">The first process is your application process, the second is the soft keyboard that is used to take input from the device and the third is the system process that orchestrates these two processes. All these communications are Inter-Process Communication. So, delay in one process can result in a delay on the other.</p><p class="graf--p">Generally, the EditText has the following six major components:</p><p class="graf--p">Image source: Google I/O 19</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/best-practices-for-using-text-in-android-edittext-components.png class=\'graf-image\' alt=\'Best Practices for Using Text in Android\' />\n\t\t\t\t\t\t\t\t</div ><ol type="1"><li><b class="graf--bold">Background:</b> This is the background of the EditText i.e. you can update the background colour by using the background attribute.</li><li><b class="graf--bold">Cursor:</b> It is the cursor that appears when you type something on the EditText. Its colour can be changed by changing the secondary colour.</li><li><b class="graf--bold">Handle:</b> This is the handle of the cursor. You can change the colour of the handle by changing the secondary colour.</li><li><b class="graf--bold">Edit Text Colour:</b> This is the colour of the text present in the EditText.</li><li><b class="graf--bold">Text Colour Hint:</b> It is the colour of the hint that is present in the EditText.</li><li><b class="graf--bold">Text Highlight Color:</b> It is the colour of the EditText that is displayed when you select some text on the EditText.</li></ol><p class="graf--p">There are many problems which may come while using the EditText. For example, while using the EditText for entering the username, the following case might happen:</p><p class="graf--p">Image source: Google I/O 19</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/best-practices-for-using-text-in-android-edittext-error.png class=\'graf-image\' alt=\'Best Practices for Using Text in Android\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">So, you have to use EditText in such a way that it should display the error message correctly and the message shouldn’t be hidden beside the soft keyboard.</p><p class="graf--p">There is a very simple solution to the above problem. All you need to do is tell the system to use the yellow box instead of using the Green box as shown below.</p><p class="graf--p">Image source: Google I/O 19</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/best-practices-for-using-text-in-android-edittext-error-solution.png class=\'graf-image\' alt=\'Best Practices for Using Text in Android\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">To do that, you have to extend from the EditText and override three functions:</p><pre><code class="language-java graf graf--code">class MyEditText : AppCompatEditText {\n\n    //find next focusable widget\n    override fun getFocusedRect(rect : Rect?) { }\n\n    //return visible view area\n    override fun getGlobalVisibleRect(r: Rect?, globalOffset: Point?): Boolean { }\n\n    //request for an area to be visible if required by scroll\n    override fun requestRectangleOnScreen(rectangle: Rect?): Boolean { }\n}</code></pre><p class="graf--p"><code class="graf--code-inline">getFocusedRect()</code> will find the next focused area available, <code class="graf--code-inline">getGlobalVisibleRect()</code> defines the visible area of a view and the <code class="graf--code-inline">requestRectangleOnScreen()</code> is used by EditText to request the System to make a certain area visible on the screen.</p><h4 class="graf--h3">Closing Notes</h4><p class="graf--p">In this blog, we learned some of the best practices for using text in Android. As 70% of an Android application is covered by the texts, so it becomes necessary to use text in such a way that it improves the performance of the application. We saw that hyphenation is by default off from Android Q. You have to turn it on if you want to use it. We saw some text styling methods and we also learned the precedence order of views. Finally, we saw some custom fonts, system fonts and properties of EditText.</p><p class="graf--p"><b class="graf--bold">Reference:</b> Google I/O 2019</p><p class="graf--p">Hope you learned something new today.</p><p class="graf--p">Do share this blog with your fellow developers to spread the knowledge. You can read more blogs on Android on our <a class="markup--anchor" target="_blank" href="https://blog.mindorks.com/">blogging website</a>.</p><p class="graf--p">Happy Learning :)</p><p class="graf--p"><b class="graf--bold">Team MindOrks!</b></p>',author:17146,img_url:"/images/best-practices-for-using-texts-in-android-banner.png",blog_url:"best-practices-for-using-text-in-android",likes:0,rank:0,category:1,published_at:"24th September 2019"},author:{id:17146,name:"Sumit Mishra",google_profile_pic:"https://lh3.googleusercontent.com/a-/AOh14GiHP4JrkmlLjuz_uG1g4E0MhTUClSNytqB8o-pxCA=s96-c?sz=300",fb_profile_pic:null,profile_tagline:"Software Development Engineer at MindOrks",fb_profile_url:"https://www.facebook.com/mishra3452",google_plus_profile_url:null,twitter_profile_url:"https://twitter.com/hiii_sumit",github_profile_url:"https://github.com/mishra3452",linkedin_profile_url:"https://www.linkedin.com/in/sumit-mishra-a15499135/"},isFetching:!1,similarBlogs:[{id:505,title:"Spannable String: Text Styling with Spans",description:"In this blog, we will learn how to style the text in an Android app with the help of Spans. There are many operations such as increase the font of some part of the text, underline some part of the text, make a bullet list, etc that can be done with the help of Spans.",author:17146,img_url:"/images/banner-spannable-string-text-styling-with-spans-09aed703960d3992.jpg",blog_url:"spannable-string-text-styling-with-spans",likes:0,rank:0,category:1,published_at:"25th September 2020",score:3.587033748626709},{id:351,title:"Using Android Sensors: Android Tutorial",description:"In this blog, we will learn how to use Android Sensors. There are various sensors present in our Android device and we can use them in our application. For example, we can use the temperature sensor in some weather app. So, let's learn about Android Sensors.",author:14897,img_url:"/images/using-android-sensors-android-tutorial-banner.png",blog_url:"using-android-sensors-android-tutorial",likes:0,rank:0,category:1,published_at:"30th September 2019",score:.3374535143375397},{id:234,title:"Push Notifications in Android Using FCM",description:"In this blog, we will learn using Push Notifications in Android Device using FCM. We will learn how to integrate the push notification feature in the app from scratch and handle the message as well.",author:14897,img_url:"/images/fcm.jpg",blog_url:"pushing-notifications-in-android-using-fcm",likes:0,rank:0,category:1,published_at:"15th May 2019",score:.3282759189605713},{id:238,title:"Using Custom and Downloadable Fonts in Android",description:"In this blog, we will learn how to use custom and downloadable fonts in android that was introduced in Android 8.0. Now there is no need of writing some piece of code for using the fonts. Also you can choose from any of the thousands of fonts on Google Fonts and use them in your app.",author:14897,img_url:"/images/downloadable-font-banner.png",blog_url:"using-custom-and-downloadable-fonts-in-android",likes:0,rank:0,category:1,published_at:"16th May 2019",score:.3282759189605713},{id:244,title:"Using Swipe-to-refresh in Android Application",description:"In this blog, we will be learning the Swipe-to-refresh gesture that is being used in various application like the Facebook app or the Instagram app, where the user of the app refreshes the app according to their need.",author:14897,img_url:"/images/swipe-to-refresh-banner.png",blog_url:"using-swipe-to-refresh-in-android-application",likes:0,rank:0,category:1,published_at:"21st May 2019",score:.3282759189605713},{id:250,title:"Using Exoplayer to play Video and Audio in Android like a Pro",description:"In this blog, we will learn how to use ExoPlayer like a pro. ExoPlayer is a library used to play audio and video in Android apps. You can customize the ExoPlayer according to your needs. So, let's learn how to use ExoPlayer.",author:14897,img_url:"/images/using-exoplayer-to-play-video-and-audio-in-android-like-a-pro-banner-1596b1f74d8d8382.png",blog_url:"using-exoplayer-to-play-video-and-audio-in-android-like-a-pro",likes:0,rank:0,category:1,published_at:"24th May 2019",score:.3282759189605713}],isSimilarBlogsFetching:!1},loginData:{data:null,isLoggingIn:!1,isLoggingOut:!1,loginState:!1,isForcedLogout:!1,isTokenRefreshed:!1,isRedirectHome:!1,message:""},updatesData:{news:null,inspirations:null,isNewsFetching:!0,isInspirationsFetching:!0},blogEditorData:{blogId:null,blogDetailsFormData:{title:"",description:"",imgUrl:"",blogUrl:"",category:"",categories:[],isWriting:!1,isTitleError:!1,isDescriptionError:!1,isImgUrlError:!1,isBlogUrlError:!1,isCategoryError:!1,isUploadingImage:!1,uploadedImageUrl:null},editorState:null,editorText:null,successMessage:null,errorMessage:null,isSending:!1,isMsgToShow:!1,isPublished:!1,isSubmitted:!1,isDraft:!0,isEditOfExistingBlog:!1,isFetchingBlogCategories:!1,isUploadingImage:!1,uploadedImageUrl:null},myBlogsData:{data:null,isSubmittedBlogsFetching:!0,isDraftBlogsFetching:!0,isPublishedBlogsFetching:!0,successMessage:null,errorMessage:null,isMsgToShow:!1,tabNames:["drafts","submissions","published"],selectedTab:"drafts",isFetchingBlog:!1,isDeletingBlog:!1,openEditorPage:!1},profilePreviewData:{profile:null,blogs:null,isFetchingProfile:!1,isFetchingAuthorBlogs:!1,successMessage:null,errorMessage:null,isMsgToShow:!1,isUserNotRegistered:!1,redirectToMyProfileEdit:!1},profileEditableData:{userId:null,name:null,fbProfilePicUrl:null,googleProfilePicUrl:null,profileFormData:{tagline:"",fbProfileUrl:"",googlePlusProfileUrl:"",twitterProfileUrl:"",githubProfileUrl:"",linkedinProfileUrl:"",isWriting:!1,isTaglineError:!1,isFbProfileUrlError:!1,isGooglePlusProfileUrlError:!1,isTwitterProfileUrlError:!1,isGithubProfileUrlError:!1,isLinkedinProfileUrlError:!1},isSavingProfile:!1,successMessage:null,errorMessage:null,isMsgToShow:!1,redirectToProfilePreview:!1},submitBlogData:{formData:{email:"",name:"",link:"",isWriting:!1,isNameError:!1,isEmailError:!1,isLinkError:!1,dismissMsg:!1},successMessage:null,errorMessage:null,isSubmitting:!1},advertisementsData:{data:{},isLoading:!1},recaptchaData:{verified:!1,successMessage:null,errorMessage:null},blogSearchData:{searches:null,isSearching:!1}}
  </script>
  <script async="" src="https://www.google-analytics.com/analytics.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-91686131-1","auto"),ga("require","cleanUrlTracker"),ga("require","eventTracker"),ga("require","impressionTracker"),ga("require","outboundLinkTracker"),ga("require","urlChangeTracker"),ga("require","maxScrollTracker"),ga("require","mediaQueryTracker"),ga("require","outboundFormTracker"),ga("require","outboundLinkTracker"),ga("require","pageVisibilityTracker"),ga("require","socialWidgetTracker"),ga("require","urlChangeTracker"),ga("send","pageview")
  </script>
  <script defer="defer" src="/assets/autotrack.js" type="text/javascript">
  </script>
  <script src="/assets/highlight.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/vendor-bundle-1.8.6.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/app-bundle-1.8.6.js" type="text/javascript">
  </script>
 </head>
 <body>
  <div id="root">
   <div class="screen app-load-content" data-reactroot="">
    <div class="ui centered grid">
     <div class="row" style="padding:0">
      <div class="ui fixed menu navbar huge borderless grid" style="background-color:#fff;height:60px">
      </div>
     </div>
     <div class="centered computer only row" style="padding:0">
      <div class="ui fixed top menu navbar huge borderless grid header-container" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="right menu">
        <a class="item" href="https://janisharali.com" target="_blank">
         Mentor Ali
        </a>
        <a class="item" href="https://amitshekhar.me" target="_blank">
         Mentor Amit
        </a>
       </div>
      </div>
     </div>
     <div class="tablet only mobile only row" style="padding:0">
      <div class="ui fixed top navbar huge menu borderless" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="item">
       </div>
      </div>
     </div>
    </div>
    <div class="header-height">
    </div>
    <div aria-live="assertive" class="redux-toastr">
     <div>
      <div class="top-left">
      </div>
      <div class="top-right">
      </div>
      <div class="top-center">
      </div>
      <div class="bottom-left">
      </div>
      <div class="bottom-right">
      </div>
      <div class="bottom-center">
      </div>
     </div>
    </div>
    <div class="content-container theme">
     <div class="ui centered one column grid" style="padding-bottom:80px;background-color:#fff">
      <div class="ten wide computer fifteen wide mobile fifteen wide tablet column" style="margin-top:50px">
       <div>
        <div class="blog-page-author">
         <div class="ui small header">
          <img alt="Sumit Mishra" class="ui circular image" src="https://lh3.googleusercontent.com/a-/AOh14GiHP4JrkmlLjuz_uG1g4E0MhTUClSNytqB8o-pxCA=s96-c?sz=300"/>
          <div class="content">
           Sumit Mishra
           <div class="sub header" style="margin-top:5px">
            24th September 2019
           </div>
          </div>
         </div>
        </div>
        <div id="content">
         <article class="template">
          <div class="postContent">
           <div class="notesSource">
            <div class="postField postField--body" id="editor">
             <section class="section--first section--last">
              <div class="section-divider layoutSingleColumn-template">
               <hr class="section-divider"/>
              </div>
              <div class="section-content">
               <div class="section-inner layoutSingleColumn-template">
                <div>
                 <h1 class="graf--h1">
                  Best Practices for Using Text in Android
                 </h1>
                 <div class="graf-image graf-caption">
                  <img alt="Best Practices for Using Text in Android" class="graf-image" src="/images/best-practices-for-using-texts-in-android-banner.png"/>
                 </div>
                 <p class="graf--p">
                  The most commonly used element in Android application is Text. We use Text in the form of TextView or in the form of EditText. So, to have a better performance, we must use Text in the best possible way. In this blog, we will learn some of the best practices for using text in Android. The following is the timeline for this blog:
                 </p>
                 <ol type="1">
                  <li>
                   Improving Text performance
                  </li>
                  <li>
                   Text Styling
                  </li>
                  <li>
                   Custom Fonts
                  </li>
                  <li>
                   System Fonts
                  </li>
                  <li>
                   Editable Text
                  </li>
                  <li>
                   Closing Notes
                  </li>
                 </ol>
                 <h4 class="graf--h3">
                  Improving Text performance
                 </h4>
                 <p class="graf--p">
                  Performance of an Android application is very important. As we know that in an Android application, almost 70% of the application area is filled with Text and due to this the performance of application majorly depends on Texts. So in order to do so, various steps were taken by Andriod Developers all over the world. In Google I/O 19, the following changes were announced:
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Hyphenation:
                  </b>
                  Now, the hyphenation is
                  <b class="graf--bold">
                   off by default
                  </b>
                  in Android Q and in AppCompact v1.1.0. This is done because Hyphenation has a huge impact on text performance. To be more precise, 70% of the text work is done for hyphenation. If you want to turn on hyphenation, then you have to manually add the hyphenation code. You can do so by setting the hyphenation frequency to normal in
                  <b class="graf--bold">
                   <i class="graf--italic">
                    style.xml
                   </i>
                  </b>
                  file:
                 </p>
                 <pre><code class="language-java graf graf--code">&lt;style name="MyTextAppearnace" parent="TextAppearance.AppCompat"&gt;
    &lt;item name="android:hyphenationFrequency"&gt;normal&lt;/item&gt;
&lt;/style&gt;</code></pre>
                 <p class="graf--p">
                  Or in your
                  <b class="graf--bold">
                   <i class="graf--italic">
                    layout.xml
                   </i>
                  </b>
                  file, you can add a TextView with hyphenation frequency set to normal.
                 </p>
                 <pre><code class="language-java graf graf--code">&lt;TextView android:hyphenationFrequency="normal"/&gt;</code></pre>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Precomputed Text:
                  </b>
                  It is a tool that is used to do text work in the background thread. So, it does 90% of the TextView work. It is available from API 21 onward. At the I/O 19, new utility APIs were added for easy integration with RecyclerView prefetch. Let’s understand the RecyclerView prefetch.
                 </p>
                 <p class="graf--p">
                  In the below figure we have two threads i.e. the UI thread and the Render thread. The UI thread does some work and passes the rendering work to the render thread. The eye icon shows the timing of VSYNC i.e. Vertical SYNC. In normal case, there is no problem with the VSYNC. But if some work takes time and couldn’t finish until the next VSYNC then it will block the next VSYNC.
                 </p>
                 <p class="graf--p">
                  One thing you might notice here is that the UI Thread is ideal for a long period of time. At a time, only one thread i.e. either the UI or the Render thread is working. So, we can use this ideal time to do some work on the UI Thread and in this way we can avoid VSYNC overlapping. This is called prefetch as we are doing the work before we come into the condition of VSYNC overlapping.
                 </p>
                 <p class="graf--p">
                  Image source: Google I/O 19
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Best Practices for Using Text in Android" class="graf-image" src="/images/best-practices-for-using-text-in-android-vsync-problem.png"/>
                 </div>
                 <p class="graf--p">
                  The problem here is that if the process still takes a very large amount of time than the VSYNC, then again the VSYNC overlapping will be seen and UI junk will take place. One solution to this problem is that we can move some work to some background thread by using
                  <code class="graf--code-inline">
                   PrecomputedText
                  </code>
                  and remove the UI junk.
                 </p>
                 <p class="graf--p">
                  Image source: Google I/O 19
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Best Practices for Using Text in Android" class="graf-image" src="/images/best-practices-for-using-text-in-android-vsync-solution.png"/>
                 </div>
                 <p class="graf--p">
                  For moving some text work to a background thread, some APIs are introduced:
                 </p>
                 <pre><code class="language-java graf graf--code">1. PrecomputedTextCompact.getTextFuture()
2. AppCompatTextView.setTextFuture()</code></pre>
                 <p class="graf--p">
                  Let’s see how to implement this:
                 </p>
                 <pre><code class="language-java graf graf--code">override fun onBindViewHolder(viewHolder: ViewHolder, pos:Int) {
    viewHolder.textView.setTextFuture(
        PrecomputedTextCompat.getTextFuture(
            dataSet[pos],
            viewHolder.textView.getTextMetricsParamsCompat(),
            null)
    )
}</code></pre>
                 <blockquote class="graf--blockquote">
                  <b class="graf--bold">
                   Note:
                  </b>
                  Don’t change the text style after using the
                  <i class="graf--italic">
                   getTextFuture
                  </i>
                  . You can do it before using the
                  <i class="graf--italic">
                   getTextFuture
                  </i>
                  .
                 </blockquote>
                 <h4 class="graf--h3">
                  Text Styling
                 </h4>
                 <p class="graf--p">
                  After the Text performance, the next thing that should be taken care of is Text Styling. By styling the text, we change the look and feel of the text. There are many ways of doing this. Let's learn one by one.
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   By using TextView attributes
                  </b>
                 </p>
                 <p class="graf--p">
                  We can style the text by using TextView attributes such as textSize, textColor, etc. The following is an example of the same:
                 </p>
                 <pre><code class="language-java graf graf--code">&lt;TextView
    ...
    android:textColor="@color/colorPrimaryDark"
    android:textSize="16sp"
    android:textStyle="bold"
    ...    
/&gt;</code></pre>
                 <p class="graf--p">
                  But the problem here is that by using the above method we can style only one TextView. What if you want to add the same text colour or the same style to all the TextViews present in your application? To do so, you can use styles.
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   By using styles.xml
                  </b>
                 </p>
                 <p class="graf--p">
                  You can define a certain style in the
                  <code class="graf--code-inline">
                   styles.xml
                  </code>
                  file for your TextViews and then use this style wherever you need a TextView. The following is an example of the same:
                 </p>
                 <pre><code class="language-java graf graf--code">&lt;!-- adding TextView styles in styles.xml --&gt;
&lt;style name="MyApp.Widget.Text.Body" parent="..."&gt;
    &lt;item name="android:textSize"&gt;12sp&lt;/item&gt;
    &lt;item name="android:textColor"&gt;?android:attr/textColorPrimary&lt;/item&gt;
&lt;/style&gt;


&lt;!-- using style in TextView --&gt;
&lt;TextView
    ...
    style:"@style/MyApp.Widget.Text.Body"
/&gt;</code></pre>
                 <p class="graf--p">
                  In the above example, the style of the TextView will be similar to the styles declared in the
                  <code class="graf--code-inline">
                   styles.xml
                  </code>
                  file.
                 </p>
                 <p class="graf--p">
                  There may be cases where you want to change some attributes of a particular TextView and keep the rest attributes as it is like other TextViews present in the application. For example, for a particular TextView, you want to set the textSize to 16sp. How to do that? Let's find.
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Precedence Order
                  </b>
                 </p>
                 <p class="graf--p">
                  So, we want to change the textSize of one TextView and keep other attributes as it is. To do so, we can manually add the textSize attribute in desired TextView. For example:
                 </p>
                 <pre><code class="language-java graf graf--code">&lt;TextView
    ...
    style:"@style/MyApp.Widget.Text.Body"
    android:textSize="16sp"
/&gt;</code></pre>
                 <p class="graf--p">
                  Here in the above example, the size of the TextView will be 16sp and not 12 sp because the view attribute overrides the style.
                 </p>
                 <p class="graf--p">
                  Every view has some default style but this default style will be overridden by some other style if we add it manually. So, the precedence order will be:
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   View &gt; Style &gt; Default Style &gt; TextAppearance
                  </b>
                 </p>
                 <p class="graf--p">
                  Also, the
                  <code class="graf--code-inline">
                   TextAppearanceSpan
                  </code>
                  is updated to read and apply typeface or shadow. Two new spans are added in Android Q i.e. the
                  <code class="graf--code-inline">
                   LineHeightSpan
                  </code>
                  and
                  <code class="graf--code-inline">
                   LineBackgroundSpan
                  </code>
                  .
                  <b class="graf--bold">
                   The properties set by the Span will override any other property of the view
                  </b>
                  . So, the updated precedence order will be:
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Span &gt; View &gt; Style &gt; Default Style &gt; TextAppearance
                  </b>
                 </p>
                 <p class="graf--p">
                  If you want to make some app-level changes i.e. if you want to change the font of the whole app at one go then you can perform this with the help of Themes. In the below example, we are changing the font-family of the text used in an application:
                 </p>
                 <pre><code class="language-java graf graf--code">&lt;style name="Theme.MyApp"
    parent="@style/Theme.MaterialComponents.Light"&gt;
    ...
    &lt;item name="android:fontFamily"&gt;@font/space_mono&lt;/item&gt;
&lt;/style&gt;</code></pre>
                 <p class="graf--p">
                  So, the Theme will come before the TextAppearance in the precedence list:
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Span &gt; View &gt; Style &gt; Default Style &gt; Theme &gt; TextAppearance
                  </b>
                 </p>
                 <h4 class="graf--h3">
                  Custom Fonts
                 </h4>
                 <p class="graf--p">
                  There are very few fonts that are available in Android and due to this, the concept of
                  <a class="markup--anchor" href="https://blog.mindorks.com/using-custom-and-downloadable-fonts-in-android" target="_blank">
                   downloadable fonts
                  </a>
                  came into existence.
                 </p>
                 <p class="graf--p">
                  Let’s have a look at the below image:
                 </p>
                 <p class="graf--p">
                  Image source: Google I/O 19
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Best Practices for Using Text in Android" class="graf-image" src="/images/best-practices-for-using-text-in-android-button-font.png"/>
                 </div>
                 <p class="graf--p">
                  Here, we are having one button and on the button, there is one lock icon and texts are there on both the sides of the icon. So, for the icon, we want some other font and for the remaining text, we want to use some other font. But we will be in trouble here because for a button we can have only one typeface and this can be achieved by having only one font family. But here we need two font family(one for text and other for the icon).
                 </p>
                 <p class="graf--p">
                  Here, we can use a typeface span, give the icon font into it and cover the icon character and then for the whole button we can choose any font.
                 </p>
                 <p class="graf--p">
                  The things become worse if we are having more than one language support with more than one fonts. Here, we can’t make use of spans.
                 </p>
                 <p class="graf--p">
                  Image source: Google I/O 19
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Best Practices for Using Text in Android" class="graf-image" src="/images/best-practices-for-using-text-in-android-different-font-language.png"/>
                 </div>
                 <p class="graf--p">
                  So, in the Android Q,
                  <code class="graf--code-inline">
                   CustomFallbackBuilder
                  </code>
                  is added to the Typeface class. It enables you to create a typeface with multiple fonts or font family. The following is an example of multi-language and multi-font:
                 </p>
                 <pre><code class="language-java graf graf--code">textView.typeface = Typeface.CustomFallbackBuilder(
    FontFamily.Builder(
        Font.Builder(assets, "lato.ttf").build()
    ).build()
).addCustomFallback(
    FontFamily.Builder(
        Font.Builder(assets, "kosugi.ttf").build()
    ).build()
).build()</code></pre>
                 <p class="graf--p">
                  Following is an example of the icon and text using different fonts:
                 </p>
                 <pre><code class="language-java graf graf--code">buttton.typeface = Typeface.CustomFallbackBuilder(
    FontFamily.Builder(
        Font.Builder(assets, "lato.ttf").build()
    ).build()
).addCustomFallback(
    FontFamily.Builder(
        Font.Builder(assets, "icon_font.ttf").build()
    ).build()
).build()</code></pre>
                 <p class="graf--p">
                  When creating a typeface using this builder, you can add up to 64 font families but you can’t put those fonts together which differ conceptually. Also, you can’t put the same styled font in the same font family.
                 </p>
                 <p class="graf--p">
                  In general, the system performs some sequential searching for the fonts. For example, if the font is
                  <b class="graf--bold">
                   <i class="graf--italic">
                    lato
                   </i>
                  </b>
                  then it will search for
                  <b class="graf--bold">
                   <i class="graf--italic">
                    lato
                   </i>
                  </b>
                  . If
                  <b class="graf--bold">
                   <i class="graf--italic">
                    lato
                   </i>
                  </b>
                  is present then that font will be assigned otherwise the system will use the system font fallback use case. Following is the code that will define the system font fallback:
                 </p>
                 <pre><code class="language-java graf graf--code">Typeface.CustomFallbackBuilder(
    FontFamily.Builder(
        Font.Builder(assets, "lato.ttf").build()
    ).build()
).setSystemFallback("sans-serif")
.build()</code></pre>
                 <p class="graf--p">
                  So, in the above example, if a character is not supported by
                  <b class="graf--bold">
                   <i class="graf--italic">
                    lato
                   </i>
                  </b>
                  , then the system will use the
                  <b class="graf--bold">
                   <i class="graf--italic">
                    sans-serif
                   </i>
                  </b>
                  font.
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Font.Builder:
                  </b>
                  While creating a font, you can set the weight, and slant of the font object with the help of the builder only.
                 </p>
                 <pre><code class="language-java graf graf--code">Font.Builder(assets, "lato_bold_italic.ttf")
    .setWeight(700)
    .setSlant(FontStyle.FONT_SLANT_ITALIC)
    .build()</code></pre>
                 <h4 class="graf--h3">
                  System Fonts
                 </h4>
                 <p class="graf--p">
                  Android supports over more than 100 languages and all these languages may require different font files. For example, the Hindi font requires the Devanagari font. So, to support a large number of languages, Android devices have many font files. For example, in pixel 3, it has over 270 font files installed. So, these are called System Fonts.
                 </p>
                 <p class="graf--p">
                  Image source: Google I/O 19
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Best Practices for Using Text in Android" class="graf-image" src="/images/best-practices-for-using-text-in-android-system-fonts.png"/>
                 </div>
                 <p class="graf--p">
                  To draw text, the NDK applications like document viewer needs to know which system font can render the given text. So, for the same process, two APIs are added:
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Font Matcher API:
                  </b>
                  <b class="graf--bold">
                   <i class="graf--italic">
                    AFontMatcher_match
                   </i>
                  </b>
                  is used to find which system font can render a given text. Look at the below image:
                 </p>
                 <p class="graf--p">
                  Image source: Google I/O 19
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Best Practices for Using Text in Android" class="graf-image" src="/images/best-practices-for-using-text-in-android-afontmatcher-example.png"/>
                 </div>
                 <p class="graf--p">
                  In the above image, the first line of the code will return
                  <b class="graf--bold">
                   <i class="graf--italic">
                    NotoSansCJK
                   </i>
                  </b>
                  font and length as 3. The second line will return the
                  <b class="graf--bold">
                   <i class="graf--italic">
                    Roboto
                   </i>
                  </b>
                  font and length as 8 and the third line of code will return
                  <b class="graf--bold">
                   <i class="graf--italic">
                    NotoSansCJK
                   </i>
                  </b>
                  font with length as 2.
                 </p>
                 <p class="graf--p">
                  This API will never return a
                  <b class="graf--bold">
                   <i class="graf--italic">
                    Null Pointer
                   </i>
                  </b>
                  . If no font is rendered then it will return a
                  <b class="graf--bold">
                   <i class="graf--italic">
                    byte font object
                   </i>
                  </b>
                  . And this font object should be used for drawing missing symbol called
                  <b class="graf--bold">
                   <i class="graf--italic">
                    Tofu
                   </i>
                  </b>
                  . Also, if no font is matched then the API will return a font which is closest to that required font.
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Font Enumeration API:
                  </b>
                  If you want to know which font files are there in your Android system then you can find this with the help of Font Enumeration API. This will give access to the system-installed font files. Let’s see how to use this:
                 </p>
                 <pre><code class="language-java graf graf--code">for(font in SystemFonts.getAvailableFonts()) {
    //choose your font here
}</code></pre>
                 <p class="graf--p">
                  Here, with the help of the
                  <code class="graf--code-inline">
                   getAvailableFonts()
                  </code>
                  method, you can access all the fonts present in the System.
                 </p>
                 <p class="graf--p">
                  In the case of NDK, we have to create an iterator and then with the help of ASystemFontIterator, you can point the next font and then use it.
                 </p>
                 <pre><code class="language-java graf graf--code">ASystemFontIterator* iterator = ASystemFontIterator_open();
AFont* font;
while((font = ASystemFontIterator_next(iterator)) != nullptr) {
    AFont_close(font);
}
ASystemFontIterator_close(iterator);</code></pre>
                 <p class="graf--p">
                  This Font Enumeration API is not so fast. So, it is recommended to cache the result and this will be present with you until the next system update because the System fonts are read-only and are updated on System updates.
                 </p>
                 <h4 class="graf--h3">
                  Editable Text
                 </h4>
                 <p class="graf--p">
                  One of the most used subclasses of TextView is EditText. In general, almost everything applied on the TextView is by default applied to the EditText also. But apart from this, we should care about some of the other things related to the EditText. Following three processes take place while using the EditText:
                 </p>
                 <p class="graf--p">
                  Image source: Google I/O 19
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Best Practices for Using Text in Android" class="graf-image" src="/images/best-practices-for-using-text-in-android-edittext-process.png"/>
                 </div>
                 <p class="graf--p">
                  The first process is your application process, the second is the soft keyboard that is used to take input from the device and the third is the system process that orchestrates these two processes. All these communications are Inter-Process Communication. So, delay in one process can result in a delay on the other.
                 </p>
                 <p class="graf--p">
                  Generally, the EditText has the following six major components:
                 </p>
                 <p class="graf--p">
                  Image source: Google I/O 19
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Best Practices for Using Text in Android" class="graf-image" src="/images/best-practices-for-using-text-in-android-edittext-components.png"/>
                 </div>
                 <ol type="1">
                  <li>
                   <b class="graf--bold">
                    Background:
                   </b>
                   This is the background of the EditText i.e. you can update the background colour by using the background attribute.
                  </li>
                  <li>
                   <b class="graf--bold">
                    Cursor:
                   </b>
                   It is the cursor that appears when you type something on the EditText. Its colour can be changed by changing the secondary colour.
                  </li>
                  <li>
                   <b class="graf--bold">
                    Handle:
                   </b>
                   This is the handle of the cursor. You can change the colour of the handle by changing the secondary colour.
                  </li>
                  <li>
                   <b class="graf--bold">
                    Edit Text Colour:
                   </b>
                   This is the colour of the text present in the EditText.
                  </li>
                  <li>
                   <b class="graf--bold">
                    Text Colour Hint:
                   </b>
                   It is the colour of the hint that is present in the EditText.
                  </li>
                  <li>
                   <b class="graf--bold">
                    Text Highlight Color:
                   </b>
                   It is the colour of the EditText that is displayed when you select some text on the EditText.
                  </li>
                 </ol>
                 <p class="graf--p">
                  There are many problems which may come while using the EditText. For example, while using the EditText for entering the username, the following case might happen:
                 </p>
                 <p class="graf--p">
                  Image source: Google I/O 19
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Best Practices for Using Text in Android" class="graf-image" src="/images/best-practices-for-using-text-in-android-edittext-error.png"/>
                 </div>
                 <p class="graf--p">
                  So, you have to use EditText in such a way that it should display the error message correctly and the message shouldn’t be hidden beside the soft keyboard.
                 </p>
                 <p class="graf--p">
                  There is a very simple solution to the above problem. All you need to do is tell the system to use the yellow box instead of using the Green box as shown below.
                 </p>
                 <p class="graf--p">
                  Image source: Google I/O 19
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Best Practices for Using Text in Android" class="graf-image" src="/images/best-practices-for-using-text-in-android-edittext-error-solution.png"/>
                 </div>
                 <p class="graf--p">
                  To do that, you have to extend from the EditText and override three functions:
                 </p>
                 <pre><code class="language-java graf graf--code">class MyEditText : AppCompatEditText {

    //find next focusable widget
    override fun getFocusedRect(rect : Rect?) { }

    //return visible view area
    override fun getGlobalVisibleRect(r: Rect?, globalOffset: Point?): Boolean { }

    //request for an area to be visible if required by scroll
    override fun requestRectangleOnScreen(rectangle: Rect?): Boolean { }
}</code></pre>
                 <p class="graf--p">
                  <code class="graf--code-inline">
                   getFocusedRect()
                  </code>
                  will find the next focused area available,
                  <code class="graf--code-inline">
                   getGlobalVisibleRect()
                  </code>
                  defines the visible area of a view and the
                  <code class="graf--code-inline">
                   requestRectangleOnScreen()
                  </code>
                  is used by EditText to request the System to make a certain area visible on the screen.
                 </p>
                 <h4 class="graf--h3">
                  Closing Notes
                 </h4>
                 <p class="graf--p">
                  In this blog, we learned some of the best practices for using text in Android. As 70% of an Android application is covered by the texts, so it becomes necessary to use text in such a way that it improves the performance of the application. We saw that hyphenation is by default off from Android Q. You have to turn it on if you want to use it. We saw some text styling methods and we also learned the precedence order of views. Finally, we saw some custom fonts, system fonts and properties of EditText.
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Reference:
                  </b>
                  Google I/O 2019
                 </p>
                 <p class="graf--p">
                  Hope you learned something new today.
                 </p>
                 <p class="graf--p">
                  Do share this blog with your fellow developers to spread the knowledge. You can read more blogs on Android on our
                  <a class="markup--anchor" href="https://blog.mindorks.com/" target="_blank">
                   blogging website
                  </a>
                  .
                 </p>
                 <p class="graf--p">
                  Happy Learning :)
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Team MindOrks!
                  </b>
                 </p>
                </div>
               </div>
              </div>
             </section>
            </div>
           </div>
          </div>
         </article>
        </div>
       </div>
       <div class="ui divider">
       </div>
      </div>
      <div class="stretched fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui large center aligned header" style="padding-top:20px">
        Recommended for You
       </div>
      </div>
      <div class="fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui centered grid">
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="Spannable String: Text Styling with Spans" class="ui centered image" src="/images/banner-spannable-string-text-styling-with-spans-09aed703960d3992.jpg" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Spannable String: Text Styling with Spans
           </div>
           <div class="meta">
            25th September 2020
           </div>
           <div class="description">
            In this blog, we will learn how to style the text in an Android app with the help of Spans. There are many operations such as increase the font of some part of the text, underline some part of the text, make a bullet list, etc that can be done with the help of Spans.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="Using Android Sensors: Android Tutorial" class="ui centered image" src="/images/using-android-sensors-android-tutorial-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Using Android Sensors: Android Tutorial
           </div>
           <div class="meta">
            30th September 2019
           </div>
           <div class="description">
            In this blog, we will learn how to use Android Sensors. There are various sensors present in our Android device and we can use them in our application. For example, we can use the temperature sensor in some weather app. So, let's learn about Android Sensors.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="Push Notifications in Android Using FCM" class="ui centered image" src="/images/fcm.jpg" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Push Notifications in Android Using FCM
           </div>
           <div class="meta">
            15th May 2019
           </div>
           <div class="description">
            In this blog, we will learn using Push Notifications in Android Device using FCM. We will learn how to integrate the push notification feature in the app from scratch and handle the message as well.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="Using Custom and Downloadable Fonts in Android" class="ui centered image" src="/images/downloadable-font-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Using Custom and Downloadable Fonts in Android
           </div>
           <div class="meta">
            16th May 2019
           </div>
           <div class="description">
            In this blog, we will learn how to use custom and downloadable fonts in android that was introduced in Android 8.0. Now there is no need of writing some piece of code for using the fonts. Also you can choose from any of the thousands of fonts on Google Fonts and use them in your app.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="Using Swipe-to-refresh in Android Application" class="ui centered image" src="/images/swipe-to-refresh-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Using Swipe-to-refresh in Android Application
           </div>
           <div class="meta">
            21st May 2019
           </div>
           <div class="description">
            In this blog, we will be learning the Swipe-to-refresh gesture that is being used in various application like the Facebook app or the Instagram app, where the user of the app refreshes the app according to their need.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="Using Exoplayer to play Video and Audio in Android like a Pro" class="ui centered image" src="/images/using-exoplayer-to-play-video-and-audio-in-android-like-a-pro-banner-1596b1f74d8d8382.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Using Exoplayer to play Video and Audio in Android like a Pro
           </div>
           <div class="meta">
            24th May 2019
           </div>
           <div class="description">
            In this blog, we will learn how to use ExoPlayer like a pro. ExoPlayer is a library used to play audio and video in Android apps. You can customize the ExoPlayer according to your needs. So, let's learn how to use ExoPlayer.
           </div>
          </div>
         </a>
        </div>
       </div>
      </div>
     </div>
    </div>
    <div style="background:#fff">
     <footer class="content-container">
      <div class="ui centered padded grid" style="padding-top:40px;background:linear-gradient(to right,#c4e0e0,#e5f1f1)">
       <h2 class="ui huge icon center aligned header">
        <div class="content">
         Connect With Your Mentors
        </div>
       </h2>
       <div class="centered row">
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Janishar Ali" class="ui medium circular image" src="/assets/ali.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://janisharali.com" target="_blank">
             Janishar Ali
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://janisharali.com" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/janisharali" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Amit Shekhar" class="ui medium circular image" src="/assets/amit.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://amitshekhar.me" target="_blank">
             Amit Shekhar
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://amitshekhar.me" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/amitiitbhu" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
      <div class="ui divider" style="margin:unset">
      </div>
      <h5 class="ui header" style="padding:16px;margin:unset;color:#555">
       <i aria-hidden="true" class="copyright icon">
       </i>
       <div class="content">
        Copyright 2022, MindOrks Nextgen Private Limited
       </div>
      </h5>
     </footer>
    </div>
   </div>
  </div>
  <script type="text/javascript">
   window.hljs.initHighlightingOnLoad()
  </script>
 </body>
</html>