<!DOCTYPE html>
<html class="scroll-smooth" lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   Jetpack DataStore Preferences
  </title>
  <meta content="follow, index" name="robots"/>
  <meta content="In this blog, we are going to see why we need Jetpack DataStore Preferences, learn how to implement Jetpack DataStore Preferences in our Android application and how can we migrate our SharedPreferences to DataStore Preferences." name="description"/>
  <meta content="https://amitshekhar.me/blog/jetpack-datastore-preferences" property="og:url"/>
  <meta content="article" property="og:type"/>
  <meta content="Amit Shekhar | Mentor" property="og:site_name"/>
  <meta content="In this blog, we are going to see why we need Jetpack DataStore Preferences, learn how to implement Jetpack DataStore Preferences in our Android application and how can we migrate our SharedPreferences to DataStore Preferences." property="og:description"/>
  <meta content="Jetpack DataStore Preferences" property="og:title"/>
  <meta content="https://amitshekhar.me/static/images/blog/jetpack-datastore-preferences.png" property="og:image"/>
  <meta content="summary_large_image" name="twitter:card"/>
  <meta content="https://twitter.com/amitiitbhu" name="twitter:site"/>
  <meta content="Jetpack DataStore Preferences" name="twitter:title"/>
  <meta content="In this blog, we are going to see why we need Jetpack DataStore Preferences, learn how to implement Jetpack DataStore Preferences in our Android application and how can we migrate our SharedPreferences to DataStore Preferences." name="twitter:description"/>
  <meta content="https://amitshekhar.me/static/images/blog/jetpack-datastore-preferences.png" name="twitter:image"/>
  <link href="https://amitshekhar.me/blog/jetpack-datastore-preferences" rel="canonical"/>
  <meta content="2020-10-05T00:00:00.000Z" property="article:published_time"/>
  <script type="application/ld+json">
   {
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://amitshekhar.me/blog/jetpack-datastore-preferences"
  },
  "headline": "Jetpack DataStore Preferences",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://amitshekhar.me/static/images/blog/jetpack-datastore-preferences.png"
    }
  ],
  "datePublished": "2020-10-05T00:00:00.000Z",
  "dateModified": "2020-10-05T00:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "Amit Shekhar"
    }
  ],
  "publisher": {
    "@type": "Organization",
    "name": "Amit Shekhar",
    "logo": {
      "@type": "ImageObject",
      "url": "https://amitshekhar.me/static/images/logo.png"
    }
  },
  "description": "In this blog, we are going to see why we need Jetpack DataStore Preferences, learn how to implement Jetpack DataStore Preferences in our Android application and how can we migrate our SharedPreferences to DataStore Preferences."
}
  </script>
  <meta content="19" name="next-head-count"/>
  <link href="/static/favicons/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"/>
  <link href="/static/favicons/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"/>
  <link href="/static/favicons/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"/>
  <link href="/static/favicons/site.webmanifest" rel="manifest"/>
  <meta content="#000000" name="msapplication-TileColor"/>
  <meta content="#ffffff" name="theme-color"/>
  <link href="/feed.xml" rel="alternate" type="application/rss+xml"/>
  <link as="style" href="/_next/static/css/913b2202d2d945a6.css" rel="preload"/>
  <link data-n-g="" href="/_next/static/css/913b2202d2d945a6.css" rel="stylesheet"/>
  <noscript data-n-css="">
  </noscript>
  <script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js">
  </script>
  <script defer="" src="/_next/static/chunks/webpack-85ccf9b9e25eea06.js">
  </script>
  <script defer="" src="/_next/static/chunks/main-80446c6fe86f961e.js">
  </script>
  <script defer="" src="/_next/static/chunks/pages/_app-2b0e7b07b791f63f.js">
  </script>
  <script defer="" src="/_next/static/chunks/335-e96b585191e0110e.js">
  </script>
  <script defer="" src="/_next/static/chunks/pages/blog/%5B...slug%5D-0a90a805218399ad.js">
  </script>
  <script defer="" src="/_next/static/Bn4QH9KFpFSLk5PMHtmFW/_buildManifest.js">
  </script>
  <script defer="" src="/_next/static/Bn4QH9KFpFSLk5PMHtmFW/_ssgManifest.js">
  </script>
  <script defer="" src="/_next/static/Bn4QH9KFpFSLk5PMHtmFW/_middlewareManifest.js">
  </script>
 </head>
 <body class="bg-white text-black antialiased">
  <div data-reactroot="" id="__next">
   <div class="flex h-screen flex-col justify-between">
    <div class="mx-auto w-full max-w-screen-xl px-4 sm:px-6 lg:px-8">
     <header class="flex items-center justify-between py-6">
      <div>
       <a aria-label="Amit Shekhar" href="/">
        <div class="flex items-center justify-between">
         <div class="h-6 text-2xl font-semibold">
          Amit Shekhar
         </div>
        </div>
       </a>
      </div>
      <div class="flex items-center text-base leading-5">
       <div class="hidden sm:block">
        <a class="p-1 font-medium text-gray-900 sm:p-4" href="/blog">
         Blog
        </a>
       </div>
       <div class="sm:hidden">
        <button aria-label="Toggle Menu" class="ml-1 mr-1 h-8 w-8 rounded py-1" type="button">
         <svg class="text-gray-900" fill="currentColor" viewbox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
          <path clip-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" fill-rule="evenodd">
          </path>
         </svg>
        </button>
        <div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out translate-x-full">
         <div class="flex justify-end">
          <button aria-label="Toggle Menu" class="mr-5 mt-11 h-8 w-8 rounded" type="button">
           <svg class="text-gray-900" fill="currentColor" viewbox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
            <path clip-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" fill-rule="evenodd">
            </path>
           </svg>
          </button>
         </div>
         <nav class="fixed mt-8 h-full">
          <div class="px-12 py-4">
           <a class="text-2xl font-bold tracking-widest text-gray-900" href="/blog">
            Blog
           </a>
          </div>
         </nav>
        </div>
       </div>
      </div>
     </header>
    </div>
    <main class="mb-auto">
     <div class="mx-auto w-full max-w-screen-xl px-4 sm:px-6 lg:px-8">
      <div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden">
       <button aria-label="Scroll To Top" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300" type="button">
        <svg class="h-5 w-5" fill="currentColor" viewbox="0 0 20 20">
         <path clip-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" fill-rule="evenodd">
         </path>
        </svg>
       </button>
      </div>
      <article>
       <div>
        <header>
         <div class="space-y-1 pb-10 pt-8 text-center">
          <div>
           <h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">
            Jetpack DataStore Preferences
           </h1>
          </div>
         </div>
        </header>
        <div class="divide-y divide-gray-200 pb-8 lg:px-24" style="grid-template-rows:auto 1fr">
         <dl class="pt-6 pb-6">
          <dt class="sr-only">
           Authors
          </dt>
          <dd>
           <ul class="space-x-8 sm:space-x-12 xl:block xl:space-x-0 xl:space-y-8">
            <li class="flex items-center space-x-2">
             <span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%">
              <span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%">
               <img alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2738%27%20height=%2738%27/%3e" style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0"/>
              </span>
              <img alt="Amit Shekhar" class="h-10 w-10 rounded-full" data-nimg="intrinsic" decoding="async" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/>
              <noscript>
               <img alt="Amit Shekhar" class="h-10 w-10 rounded-full" data-nimg="intrinsic" decoding="async" loading="lazy" src="/_next/image?url=%2Fstatic%2Fimages%2Favatar.png&amp;w=96&amp;q=75" srcset="/_next/image?url=%2Fstatic%2Fimages%2Favatar.png&amp;w=48&amp;q=75 1x, /_next/image?url=%2Fstatic%2Fimages%2Favatar.png&amp;w=96&amp;q=75 2x" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/>
              </noscript>
             </span>
             <dl class="whitespace-nowrap text-sm font-medium leading-5">
              <dt class="sr-only">
               Name
              </dt>
              <dd class="text-gray-900">
               Amit Shekhar
              </dd>
              <dt class="sr-only">
               Published on
              </dt>
              <dd class="text-sm font-medium leading-6 text-gray-400">
               <time datetime="2020-10-05T00:00:00.000Z">
                October 5, 2020
               </time>
              </dd>
             </dl>
            </li>
           </ul>
          </dd>
         </dl>
         <div class="xl:col-span-3 xl:row-span-2 xl:pb-0">
          <div class="prose max-w-none pt-10 pb-8">
           <span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%">
            <span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%">
             <img alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%271200%27%20height=%27630%27/%3e" style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0"/>
            </span>
            <img alt="Jetpack DataStore Preferences" data-nimg="intrinsic" decoding="async" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/>
            <noscript>
             <img alt="Jetpack DataStore Preferences" data-nimg="intrinsic" decoding="async" loading="lazy" src="/_next/image?url=%2Fstatic%2Fimages%2Fblog%2Fjetpack-datastore-preferences.png&amp;w=3840&amp;q=75" srcset="/_next/image?url=%2Fstatic%2Fimages%2Fblog%2Fjetpack-datastore-preferences.png&amp;w=1200&amp;q=75 1x, /_next/image?url=%2Fstatic%2Fimages%2Fblog%2Fjetpack-datastore-preferences.png&amp;w=3840&amp;q=75 2x" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/>
            </noscript>
           </span>
           <p>
            I am
            <a href="https://amitshekhar.me" rel="noopener noreferrer" target="_blank">
             <strong>
              Amit Shekhar
             </strong>
            </a>
            , a mentor helping developers in getting high-paying tech jobs.
           </p>
           <p>
            In this blog, we are going to see why we need Jetpack DataStore Preferences, learn how to implement Jetpack DataStore Preferences in our Android application and how can we migrate our SharedPreferences to DataStore Preferences.
           </p>
           <p>
            I will be sharing what I learned from the Android Official documentation and why I am recommending the new Jetpack DataStore from my practical experience.
           </p>
           <p>
            Topics to be covered in the blog:
           </p>
           <ul>
            <li>
             Why Jetpack DataStore?
            </li>
            <li>
             SharedPreferences vs DataStore Preferences
            </li>
            <li>
             Implementing Jetpack DataStore Preferences
            </li>
            <li>
             Migration from SharedPreferences to DataStore Preferences
            </li>
           </ul>
           <p>
            First things first, why this new Jetpack DataStore?
           </p>
           <h2 id="why-jetpack-datastore">
            <a aria-hidden="true" href="#why-jetpack-datastore" tabindex="-1">
             <span class="icon icon-link">
             </span>
            </a>
            Why Jetpack DataStore?
           </h2>
           <p>
            As per the official documentation:
           </p>
           <ul>
            <li>
             Jetpack DataStore is a new and improved data storage solution aimed at replacing SharedPreferences.
            </li>
            <li>
             It is built on
             <a href="https://amitshekhar.me/blog/kotlin-coroutines" rel="noopener noreferrer" target="_blank">
              Kotlin Coroutines
             </a>
             and
             <a href="https://amitshekhar.me/blog/flow-api-in-kotlin" rel="noopener noreferrer" target="_blank">
              Flow
             </a>
             .
            </li>
            <li>
             Data is stored asynchronously, consistently, and transactionally, overcoming most of the drawbacks of SharedPreferences.
            </li>
           </ul>
           <p>
            The above-mentioned improvements are great.
           </p>
           <p>
            I will tell you a reason, why I am recommending the new Jetpack DataStore from my practical experience.
           </p>
           <p>
            I was working on an Android application having more than 200 million downloads, the app is on Google Play Store for more than 7 years. In this long time period, the app went through huge development, many releases, and many bug fixes.
           </p>
           <p>
            So, at some point, the app started getting ANR(Application Not Responding).
           </p>
           <p>
            <strong>
             The reason for ANR:
            </strong>
            The app is doing a long-running task on the UI Thread. (more than 5 seconds).
           </p>
           <p>
            Why this ANR was coming?
           </p>
           <p>
            The major reason was that our shared preferences file had become too big as we kept adding new key-value one after one. We were trying to access the value for a particular key as soon as the app opens on the UI Thread. But the thing is that when you access the SharedPreferences for the first time, it reads the whole file, brings the data in memory. And for us, this was happening on UI Thread.
           </p>
           <p>
            This is an I/O operation. It can take time. For the bigger file in our case, it was leading to ANR.
           </p>
           <p>
            We built our own solution for that. This is out of the scope of this blog. I might plan a detailed blog on that solution.
           </p>
           <p>
            <strong>
             And the current implementation of Jetpack DataStore does not encourage the reading of the data on UI Thread. This is something I really liked about it.
            </strong>
           </p>
           <p>
            Now, let's talk about SharedPreferences vs DataStore Preferences.
           </p>
           <h2 id="sharedpreferences-vs-datastore-preferences">
            <a aria-hidden="true" href="#sharedpreferences-vs-datastore-preferences" tabindex="-1">
             <span class="icon icon-link">
             </span>
            </a>
            SharedPreferences vs DataStore Preferences
           </h2>
           <p>
            The following are the difference between SharedPreferences and DataStore Preferences:
           </p>
           <ul>
            <li>
             Both provide the Async API.
            </li>
            <li>
             SharedPreferences provide a simple Synchronous API but
             <strong>
              not
             </strong>
             safe to call on UI thread. DataStore Preferences do not encourage this.
            </li>
            <li>
             Consistency is guaranteed in DataStore Preferences.
            </li>
            <li>
             Error handling is supported in DataStore Preferences.
            </li>
            <li>
             DataStore Preferences support Kotlin Coroutines Flow API by default.
            </li>
           </ul>
           <p>
            This is how the DataStore Preferences is an improved solution over the SharedPreferences.
           </p>
           <p>
            Now, let's move to the implementation part.
           </p>
           <h2 id="implementing-jetpack-datastore-preferences">
            <a aria-hidden="true" href="#implementing-jetpack-datastore-preferences" tabindex="-1">
             <span class="icon icon-link">
             </span>
            </a>
            Implementing Jetpack DataStore Preferences
           </h2>
           <p>
            Add the following dependency in your app level build.gradle.
           </p>
           <div class="relative">
            <pre><code class="code-highlight language-groovy"><span class="code-line">implementation <span class="token string gstring">"androidx.datastore:datastore-preferences:1.0.0-alpha01"</span>
</span></code></pre>
           </div>
           <p>
            <em>
             Note: Make sure to use the latest version for the most stable release.
            </em>
           </p>
           <p>
            Now, similar to the SharedPreferences object, we need to create the object of DataStore Preferences.
           </p>
           <div class="relative">
            <pre><code class="language-kotlin code-highlight"><span class="code-line"><span class="token keyword">val</span> dataStore<span class="token operator">:</span> DataStore<span class="token operator">&lt;</span>Preferences<span class="token operator">&gt;</span> <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">createDataStore</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"example-data-store-prefs"</span><span class="token punctuation">)</span>
</span></code></pre>
           </div>
           <p>
            Then, we create two
            <strong>
             extension functions
            </strong>
            to use them to read and write data. This is just for convenience.
           </p>
           <div class="relative">
            <pre><code class="language-kotlin code-highlight"><span class="code-line"><span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> DataStore<span class="token operator">&lt;</span>Preferences<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">getValueFlow</span><span class="token punctuation">(</span>
</span><span class="code-line">    key<span class="token operator">:</span> Preferences<span class="token punctuation">.</span>Key<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">,</span>
</span><span class="code-line">    defaultValue<span class="token operator">:</span> T
</span><span class="code-line"><span class="token punctuation">)</span><span class="token operator">:</span> Flow<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token function">catch</span> <span class="token punctuation">{</span> exception <span class="token operator">-&gt;</span>
</span><span class="code-line">            <span class="token keyword">if</span> <span class="token punctuation">(</span>exception <span class="token keyword">is</span> IOException<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">                <span class="token function">emit</span><span class="token punctuation">(</span><span class="token function">emptyPreferences</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">                <span class="token keyword">throw</span> exception
</span><span class="code-line">            <span class="token punctuation">}</span>
</span><span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">map</span> <span class="token punctuation">{</span> preferences <span class="token operator">-&gt;</span>
</span><span class="code-line">            preferences<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">?:</span> defaultValue
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">suspend</span> <span class="token keyword">fun</span> <span class="token operator">&lt;</span>T<span class="token operator">&gt;</span> DataStore<span class="token operator">&lt;</span>Preferences<span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>key<span class="token operator">:</span> Preferences<span class="token punctuation">.</span>Key<span class="token operator">&lt;</span>T<span class="token operator">&gt;</span><span class="token punctuation">,</span> value<span class="token operator">:</span> T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">edit</span> <span class="token punctuation">{</span> preferences <span class="token operator">-&gt;</span>
</span><span class="code-line">        preferences<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
           </div>
           <p>
            Then, we create Preferences Keys like below:
           </p>
           <div class="relative">
            <pre><code class="language-kotlin code-highlight"><span class="code-line"><span class="token keyword">companion</span> <span class="token keyword">object</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">private</span> <span class="token keyword">val</span> USERNAME <span class="token operator">=</span> preferencesKey<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
           </div>
           <p>
            Now, writing the value to the DataStore Preferences:
           </p>
           <div class="relative">
            <pre><code class="language-kotlin code-highlight"><span class="code-line">viewModelScope<span class="token punctuation">.</span><span class="token function">launch</span> <span class="token punctuation">{</span>
</span><span class="code-line">    dataStore<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>USERNAME<span class="token punctuation">,</span> <span class="token string">"Amit Shekhar"</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
           </div>
           <p>
            Now, reading the data from the DataStore Preferences:
           </p>
           <div class="relative">
            <pre><code class="language-kotlin code-highlight"><span class="code-line">viewModelScope<span class="token punctuation">.</span><span class="token function">launch</span> <span class="token punctuation">{</span>
</span><span class="code-line">    dataStore<span class="token punctuation">.</span><span class="token function">getValueFlow</span><span class="token punctuation">(</span>USERNAME<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token function">collect</span> <span class="token punctuation">{</span> value <span class="token operator">-&gt;</span>
</span><span class="code-line">            <span class="token comment">// use the value</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
           </div>
           <p>
            Here, we can handle the error by using the
            <code>
             catch
            </code>
            operator on the flow.
           </p>
           <div class="relative">
            <pre><code class="language-kotlin code-highlight"><span class="code-line">viewModelScope<span class="token punctuation">.</span><span class="token function">launch</span> <span class="token punctuation">{</span>
</span><span class="code-line">    dataStore<span class="token punctuation">.</span><span class="token function">getValueFlow</span><span class="token punctuation">(</span>USERNAME<span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token function">catch</span> <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token comment">// handle error</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">        <span class="token punctuation">.</span><span class="token function">collect</span> <span class="token punctuation">{</span> value <span class="token operator">-&gt;</span>
</span><span class="code-line">            <span class="token comment">// use the value</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
           </div>
           <p>
            This is how we can easily use it in our Android Application.
           </p>
           <p>
            Now, let's talk about the migration from SharedPreferences to DataStore Preferences.
           </p>
           <h2 id="migration-from-sharedpreferences-to-datastore-preferences">
            <a aria-hidden="true" href="#migration-from-sharedpreferences-to-datastore-preferences" tabindex="-1">
             <span class="icon icon-link">
             </span>
            </a>
            Migration from SharedPreferences to DataStore Preferences
           </h2>
           <p>
            When it comes to migration, DataStore handles it for us. We just have to provide the names of the SharedPreferences. For example, if "
            <em>
             example-prefs
            </em>
            " is the name of SharedPreferences, we will have to do like below:
           </p>
           <div class="relative">
            <pre><code class="language-kotlin code-highlight"><span class="code-line"><span class="token keyword">val</span> dataStore<span class="token operator">:</span> DataStore<span class="token operator">&lt;</span>Preferences<span class="token operator">&gt;</span> <span class="token operator">=</span>
</span><span class="code-line">    context<span class="token punctuation">.</span><span class="token function">createDataStore</span><span class="token punctuation">(</span>
</span><span class="code-line">        name <span class="token operator">=</span> <span class="token string">"example-data-store-prefs"</span><span class="token punctuation">,</span>
</span><span class="code-line">        migrations <span class="token operator">=</span> <span class="token function">listOf</span><span class="token punctuation">(</span><span class="token function">SharedPreferencesMigration</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token string">"example-prefs"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">)</span>
</span></code></pre>
           </div>
           <p>
            When we check the
            <code>
             SharedPreferencesMigration
            </code>
            function:
           </p>
           <div class="relative">
            <pre><code class="language-kotlin code-highlight"><span class="code-line"><span class="token keyword">fun</span> <span class="token function">SharedPreferencesMigration</span><span class="token punctuation">(</span>
</span><span class="code-line">    context<span class="token operator">:</span> Context<span class="token punctuation">,</span>
</span><span class="code-line">    sharedPreferencesName<span class="token operator">:</span> String<span class="token punctuation">,</span>
</span><span class="code-line">    keysToMigrate<span class="token operator">:</span> Set<span class="token operator">&lt;</span>String<span class="token operator">&gt;</span><span class="token operator">?</span> <span class="token operator">=</span> MIGRATE_ALL_KEYS<span class="token punctuation">,</span>
</span><span class="code-line">    deleteEmptyPreferences<span class="token operator">:</span> Boolean <span class="token operator">=</span> <span class="token boolean">true</span>
</span><span class="code-line"><span class="token punctuation">)</span>
</span></code></pre>
           </div>
           <p>
            We can see that there are more options available, we can use them based on our use-cases.
           </p>
           <p>
            This way migrating from SharedPreferences to DataStore Preferences is very easy.
           </p>
           <p>
            I will update this blog when I find and learn more about this topic.
           </p>
           <p>
            <strong>
             Show your love by sharing this blog with your fellow developers.
            </strong>
           </p>
           <p>
            Master Kotlin Coroutines from here:
            <a href="https://amitshekhar.me/blog/kotlin-coroutines" rel="noopener noreferrer" target="_blank">
             Mastering Kotlin Coroutines
            </a>
           </p>
           <p>
            That's it for now.
           </p>
           <p>
            Thanks
           </p>
           <p>
            <a href="https://amitshekhar.me" rel="noopener noreferrer" target="_blank">
             <strong>
              Amit Shekhar
             </strong>
            </a>
           </p>
           <p>
            You can connect with me on:
           </p>
           <ul>
            <li>
             <a href="https://twitter.com/amitiitbhu" rel="noopener noreferrer" target="_blank">
              Twitter
             </a>
            </li>
            <li>
             <a href="https://www.linkedin.com/in/amit-shekhar-iitbhu" rel="noopener noreferrer" target="_blank">
              LinkedIn
             </a>
            </li>
            <li>
             <a href="https://github.com/amitshekhariitbhu" rel="noopener noreferrer" target="_blank">
              GitHub
             </a>
            </li>
            <li>
             <a href="https://www.facebook.com/amit.shekhar.iitbhu" rel="noopener noreferrer" target="_blank">
              Facebook
             </a>
            </li>
           </ul>
           <p>
            <a href="https://amitshekhar.me/blog" rel="noopener noreferrer" target="_blank">
             <strong>
              Read all of my high-quality blogs here.
             </strong>
            </a>
           </p>
          </div>
         </div>
         <div>
          <div class="py-4 xl:py-8">
           <h2 class="text-xs uppercase tracking-wide text-gray-500">
            Tags
           </h2>
           <div class="flex flex-wrap pt-3">
            <div class="font-small mb-2 mr-2 rounded-lg border border-gray-300 py-1 px-3 text-xs uppercase text-gray-400 transition duration-500 ease-in-out hover:bg-gray-300">
             <a href="/tags/kotlin">
              kotlin
             </a>
            </div>
            <div class="font-small mb-2 mr-2 rounded-lg border border-gray-300 py-1 px-3 text-xs uppercase text-gray-400 transition duration-500 ease-in-out hover:bg-gray-300">
             <a href="/tags/android">
              android
             </a>
            </div>
           </div>
          </div>
         </div>
        </div>
       </div>
      </article>
     </div>
    </main>
    <footer>
     <div class="mx-auto max-w-screen-xl px-4 pt-16 pb-6 sm:px-6 lg:px-8">
      <div>
       <div class="flex justify-center sm:justify-start">
        <a aria-label="Amit Shekhar" href="/">
         <div class="flex items-center justify-between">
          <div class="h-6 text-2xl font-semibold">
           <!-- -->
           Amit Shekhar
           <!-- -->
          </div>
         </div>
        </a>
       </div>
       <p class="mx-auto mt-6 text-center leading-relaxed text-gray-500 sm:text-left">
        <!-- -->
        My vision is to make tech education outcome-focused. My mission is to provide tech education to the students through project-based learning to achieve the outcome they aspire to.
        <!-- -->
       </p>
       <ul class="mt-8 flex justify-center gap-6 sm:justify-start md:gap-8">
        <li>
         <a class="text-sm text-gray-500 transition hover:text-gray-600" href="http://github.com/amitshekhariitbhu" rel="noopener noreferrer" target="_blank">
          <span class="sr-only">
           github
          </span>
          <svg class="fill-current text-gray-700 hover:text-blue-500 h-6 w-6" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
           <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12">
           </path>
          </svg>
         </a>
        </li>
        <li>
         <a class="text-sm text-gray-500 transition hover:text-gray-600" href="https://www.facebook.com/amit.shekhar.iitbhu" rel="noopener noreferrer" target="_blank">
          <span class="sr-only">
           facebook
          </span>
          <svg class="fill-current text-gray-700 hover:text-blue-500 h-6 w-6" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
           <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z">
           </path>
          </svg>
         </a>
        </li>
        <li>
         <a class="text-sm text-gray-500 transition hover:text-gray-600" href="https://www.linkedin.com/in/amit-shekhar-iitbhu" rel="noopener noreferrer" target="_blank">
          <span class="sr-only">
           linkedin
          </span>
          <svg class="fill-current text-gray-700 hover:text-blue-500 h-6 w-6" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
           <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z">
           </path>
          </svg>
         </a>
        </li>
        <li>
         <a class="text-sm text-gray-500 transition hover:text-gray-600" href="https://twitter.com/amitiitbhu" rel="noopener noreferrer" target="_blank">
          <span class="sr-only">
           twitter
          </span>
          <svg class="fill-current text-gray-700 hover:text-blue-500 h-6 w-6" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
           <path d="M23.953 4.57a10 10 0 0 1-2.825.775 4.958 4.958 0 0 0 2.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 0 0-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 0 0-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 0 1-2.228-.616v.06a4.923 4.923 0 0 0 3.946 4.827 4.996 4.996 0 0 1-2.212.085 4.936 4.936 0 0 0 4.604 3.417 9.867 9.867 0 0 1-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 0 0 7.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0 0 24 4.59z">
           </path>
          </svg>
         </a>
        </li>
       </ul>
      </div>
      <div class="mt-12 border-t border-gray-100 pt-6">
       <div class="text-center sm:flex sm:justify-between sm:text-left">
        <p class="mt-4 text-sm text-gray-500 sm:order-first sm:mt-0">
         © 2022
         <!-- -->
         Amit Shekhar
        </p>
        <p class="text-sm text-gray-500">
         <span class="block sm:inline">
          All rights reserved.
         </span>
        </p>
       </div>
      </div>
     </div>
    </footer>
   </div>
  </div>
  <script id="__NEXT_DATA__" type="application/json">
   {"props":{"pageProps":{"blog":{"mdxSource":"var Component=(()=\u003e{var h=Object.create;var c=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var o=a=\u003ec(a,\"__esModule\",{value:!0});var k=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),N=(a,s)=\u003e{o(a);for(var t in s)c(a,t,{get:s[t],enumerable:!0})},f=(a,s,t)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let n of p(s))!u.call(a,n)\u0026\u0026n!==\"default\"\u0026\u0026c(a,n,{get:()=\u003es[n],enumerable:!(t=d(s,n))||t.enumerable});return a},g=a=\u003ef(o(c(a!=null?h(m(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var i=k((D,l)=\u003e{l.exports=_jsx_runtime});var P={};N(P,{default:()=\u003ey,frontmatter:()=\u003ew});var e=g(i()),w={title:\"Jetpack DataStore Preferences\",date:\"2020-10-05\",tags:[\"kotlin\",\"android\"],draft:!1,summary:\"In this blog, we are going to see why we need Jetpack DataStore Preferences, learn how to implement Jetpack DataStore Preferences in our Android application and how can we migrate our SharedPreferences to DataStore Preferences.\",layout:\"BlogLayout\",images:[\"/static/images/blog/jetpack-datastore-preferences.png\"],authors:[\"amitshekhar\"]};function S(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(t,{})})):t();function t(){let n=Object.assign({p:\"p\",a:\"a\",strong:\"strong\",ul:\"ul\",li:\"li\",h2:\"h2\",span:\"span\",pre:\"pre\",code:\"code\",em:\"em\"},a.components),{Image:r}=n;return r||b(\"Image\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(r,{alt:\"Jetpack DataStore Preferences\",src:\"/static/images/blog/jetpack-datastore-preferences.png\",width:1200,height:630}),(0,e.jsxs)(n.p,{children:[\"I am \",(0,e.jsx)(n.a,{href:\"https://amitshekhar.me\",children:(0,e.jsx)(n.strong,{children:\"Amit Shekhar\"})}),\", a mentor helping developers in getting high-paying tech jobs.\"]}),(0,e.jsx)(n.p,{children:\"In this blog, we are going to see why we need Jetpack DataStore Preferences, learn how to implement Jetpack DataStore Preferences in our Android application and how can we migrate our SharedPreferences to DataStore Preferences.\"}),(0,e.jsx)(n.p,{children:\"I will be sharing what I learned from the Android Official documentation and why I am recommending the new Jetpack DataStore from my practical experience.\"}),(0,e.jsx)(n.p,{children:\"Topics to be covered in the blog:\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"Why Jetpack DataStore?\"}),(0,e.jsx)(n.li,{children:\"SharedPreferences vs DataStore Preferences\"}),(0,e.jsx)(n.li,{children:\"Implementing Jetpack DataStore Preferences\"}),(0,e.jsx)(n.li,{children:\"Migration from SharedPreferences to DataStore Preferences\"})]}),(0,e.jsx)(n.p,{children:\"First things first, why this new Jetpack DataStore?\"}),(0,e.jsxs)(n.h2,{id:\"why-jetpack-datastore\",children:[(0,e.jsx)(n.a,{href:\"#why-jetpack-datastore\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Why Jetpack DataStore?\"]}),(0,e.jsx)(n.p,{children:\"As per the official documentation:\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"Jetpack DataStore is a new and improved data storage solution aimed at replacing SharedPreferences.\"}),(0,e.jsxs)(n.li,{children:[\"It is built on \",(0,e.jsx)(n.a,{href:\"https://amitshekhar.me/blog/kotlin-coroutines\",children:\"Kotlin Coroutines\"}),\" and \",(0,e.jsx)(n.a,{href:\"https://amitshekhar.me/blog/flow-api-in-kotlin\",children:\"Flow\"}),\".\"]}),(0,e.jsx)(n.li,{children:\"Data is stored asynchronously, consistently, and transactionally, overcoming most of the drawbacks of SharedPreferences.\"})]}),(0,e.jsx)(n.p,{children:\"The above-mentioned improvements are great.\"}),(0,e.jsx)(n.p,{children:\"I will tell you a reason, why I am recommending the new Jetpack DataStore from my practical experience.\"}),(0,e.jsx)(n.p,{children:\"I was working on an Android application having more than 200 million downloads, the app is on Google Play Store for more than 7 years. In this long time period, the app went through huge development, many releases, and many bug fixes.\"}),(0,e.jsx)(n.p,{children:\"So, at some point, the app started getting ANR(Application Not Responding).\"}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"The reason for ANR:\"}),\" The app is doing a long-running task on the UI Thread. (more than 5 seconds).\"]}),(0,e.jsx)(n.p,{children:\"Why this ANR was coming?\"}),(0,e.jsx)(n.p,{children:\"The major reason was that our shared preferences file had become too big as we kept adding new key-value one after one. We were trying to access the value for a particular key as soon as the app opens on the UI Thread. But the thing is that when you access the SharedPreferences for the first time, it reads the whole file, brings the data in memory. And for us, this was happening on UI Thread.\"}),(0,e.jsx)(n.p,{children:\"This is an I/O operation. It can take time. For the bigger file in our case, it was leading to ANR.\"}),(0,e.jsx)(n.p,{children:\"We built our own solution for that. This is out of the scope of this blog. I might plan a detailed blog on that solution.\"}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"And the current implementation of Jetpack DataStore does not encourage the reading of the data on UI Thread. This is something I really liked about it.\"})}),(0,e.jsx)(n.p,{children:\"Now, let's talk about SharedPreferences vs DataStore Preferences.\"}),(0,e.jsxs)(n.h2,{id:\"sharedpreferences-vs-datastore-preferences\",children:[(0,e.jsx)(n.a,{href:\"#sharedpreferences-vs-datastore-preferences\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"SharedPreferences vs DataStore Preferences\"]}),(0,e.jsx)(n.p,{children:\"The following are the difference between SharedPreferences and DataStore Preferences:\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"Both provide the Async API.\"}),(0,e.jsxs)(n.li,{children:[\"SharedPreferences provide a simple Synchronous API but \",(0,e.jsx)(n.strong,{children:\"not\"}),\" safe to call on UI thread. DataStore Preferences do not encourage this.\"]}),(0,e.jsx)(n.li,{children:\"Consistency is guaranteed in DataStore Preferences.\"}),(0,e.jsx)(n.li,{children:\"Error handling is supported in DataStore Preferences.\"}),(0,e.jsx)(n.li,{children:\"DataStore Preferences support Kotlin Coroutines Flow API by default.\"})]}),(0,e.jsx)(n.p,{children:\"This is how the DataStore Preferences is an improved solution over the SharedPreferences.\"}),(0,e.jsx)(n.p,{children:\"Now, let's move to the implementation part.\"}),(0,e.jsxs)(n.h2,{id:\"implementing-jetpack-datastore-preferences\",children:[(0,e.jsx)(n.a,{href:\"#implementing-jetpack-datastore-preferences\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Implementing Jetpack DataStore Preferences\"]}),(0,e.jsx)(n.p,{children:\"Add the following dependency in your app level build.gradle.\"}),(0,e.jsx)(n.pre,{className:\"language-groovy\",children:(0,e.jsx)(n.code,{className:\"code-highlight language-groovy\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"implementation \",(0,e.jsx)(n.span,{className:\"token string gstring\",children:'\"androidx.datastore:datastore-preferences:1.0.0-alpha01\"'}),`\n`]})})}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.em,{children:\"Note: Make sure to use the latest version for the most stable release.\"})}),(0,e.jsx)(n.p,{children:\"Now, similar to the SharedPreferences object, we need to create the object of DataStore Preferences.\"}),(0,e.jsx)(n.pre,{className:\"language-kotlin\",children:(0,e.jsx)(n.code,{className:\"language-kotlin code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"val\"}),\" dataStore\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" DataStore\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"Preferences\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" context\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"createDataStore\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"name \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"example-data-store-prefs\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})})}),(0,e.jsxs)(n.p,{children:[\"Then, we create two \",(0,e.jsx)(n.strong,{children:\"extension functions\"}),\" to use them to read and write data. This is just for convenience.\"]}),(0,e.jsx)(n.pre,{className:\"language-kotlin\",children:(0,e.jsxs)(n.code,{className:\"language-kotlin code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fun\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"T\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" DataStore\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"Preferences\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"getValueFlow\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    key\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" Preferences\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"Key\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"T\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    defaultValue\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),` T\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" Flow\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"T\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"return\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),`data\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"catch\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" exception \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"if\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"exception \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"is\"}),\" IOException\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"                \",(0,e.jsx)(n.span,{className:\"token function\",children:\"emit\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"emptyPreferences\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"else\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"                \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"throw\"}),` exception\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"map\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" preferences \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            preferences\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"key\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"?:\"}),` defaultValue\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"suspend\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fun\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"T\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" DataStore\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"Preferences\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"setValue\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"key\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" Preferences\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),\"Key\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"T\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" value\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" T\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"this\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"edit\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" preferences \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        preferences\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"key\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),` value\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"Then, we create Preferences Keys like below:\"}),(0,e.jsx)(n.pre,{className:\"language-kotlin\",children:(0,e.jsxs)(n.code,{className:\"language-kotlin code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"companion\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"object\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"private\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"val\"}),\" USERNAME \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" preferencesKey\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"String\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:'\"username\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"Now, writing the value to the DataStore Preferences:\"}),(0,e.jsx)(n.pre,{className:\"language-kotlin\",children:(0,e.jsxs)(n.code,{className:\"language-kotlin code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"viewModelScope\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"launch\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    dataStore\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"setValue\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"USERNAME\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"Amit Shekhar\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"Now, reading the data from the DataStore Preferences:\"}),(0,e.jsx)(n.pre,{className:\"language-kotlin\",children:(0,e.jsxs)(n.code,{className:\"language-kotlin code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"viewModelScope\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"launch\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    dataStore\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"getValueFlow\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"USERNAME\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"collect\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" value \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// use the value\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"Here, we can handle the error by using the \",(0,e.jsx)(n.code,{children:\"catch\"}),\" operator on the flow.\"]}),(0,e.jsx)(n.pre,{className:\"language-kotlin\",children:(0,e.jsxs)(n.code,{className:\"language-kotlin code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"viewModelScope\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"launch\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    dataStore\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"getValueFlow\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"USERNAME\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"catch\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// handle error\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"collect\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" value \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"-\u003e\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// use the value\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"This is how we can easily use it in our Android Application.\"}),(0,e.jsx)(n.p,{children:\"Now, let's talk about the migration from SharedPreferences to DataStore Preferences.\"}),(0,e.jsxs)(n.h2,{id:\"migration-from-sharedpreferences-to-datastore-preferences\",children:[(0,e.jsx)(n.a,{href:\"#migration-from-sharedpreferences-to-datastore-preferences\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Migration from SharedPreferences to DataStore Preferences\"]}),(0,e.jsxs)(n.p,{children:['When it comes to migration, DataStore handles it for us. We just have to provide the names of the SharedPreferences. For example, if \"',(0,e.jsx)(n.em,{children:\"example-prefs\"}),'\" is the name of SharedPreferences, we will have to do like below:']}),(0,e.jsx)(n.pre,{className:\"language-kotlin\",children:(0,e.jsxs)(n.code,{className:\"language-kotlin code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"val\"}),\" dataStore\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" DataStore\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"Preferences\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    context\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"createDataStore\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        name \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"example-data-store-prefs\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        migrations \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"listOf\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"SharedPreferencesMigration\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"context\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"example-prefs\"'}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"When we check the \",(0,e.jsx)(n.code,{children:\"SharedPreferencesMigration\"}),\" function:\"]}),(0,e.jsx)(n.pre,{className:\"language-kotlin\",children:(0,e.jsxs)(n.code,{className:\"language-kotlin code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"fun\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"SharedPreferencesMigration\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    context\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" Context\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    sharedPreferencesName\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" String\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    keysToMigrate\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" Set\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"String\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"?\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" MIGRATE_ALL_KEYS\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    deleteEmptyPreferences\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" Boolean \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"true\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"We can see that there are more options available, we can use them based on our use-cases.\"}),(0,e.jsx)(n.p,{children:\"This way migrating from SharedPreferences to DataStore Preferences is very easy.\"}),(0,e.jsx)(n.p,{children:\"I will update this blog when I find and learn more about this topic.\"}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Show your love by sharing this blog with your fellow developers.\"})}),(0,e.jsxs)(n.p,{children:[\"Master Kotlin Coroutines from here: \",(0,e.jsx)(n.a,{href:\"https://amitshekhar.me/blog/kotlin-coroutines\",children:\"Mastering Kotlin Coroutines\"})]}),(0,e.jsx)(n.p,{children:\"That's it for now.\"}),(0,e.jsx)(n.p,{children:\"Thanks\"}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://amitshekhar.me\",children:(0,e.jsx)(n.strong,{children:\"Amit Shekhar\"})})}),(0,e.jsx)(n.p,{children:\"You can connect with me on:\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://twitter.com/amitiitbhu\",children:\"Twitter\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://www.linkedin.com/in/amit-shekhar-iitbhu\",children:\"LinkedIn\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://github.com/amitshekhariitbhu\",children:\"GitHub\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://www.facebook.com/amit.shekhar.iitbhu\",children:\"Facebook\"})})]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://amitshekhar.me/blog\",children:(0,e.jsx)(n.strong,{children:\"Read all of my high-quality blogs here.\"})})})]})}}var y=S;function b(a,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return P;})();\n;return Component;","toc":[{"value":"Why Jetpack DataStore?","url":"#why-jetpack-datastore","depth":2},{"value":"SharedPreferences vs DataStore Preferences","url":"#sharedpreferences-vs-datastore-preferences","depth":2},{"value":"Implementing Jetpack DataStore Preferences","url":"#implementing-jetpack-datastore-preferences","depth":2},{"value":"Migration from SharedPreferences to DataStore Preferences","url":"#migration-from-sharedpreferences-to-datastore-preferences","depth":2}],"frontMatter":{"readingTime":{"text":"6 min read","minutes":5.71,"time":342600,"words":1142},"slug":"jetpack-datastore-preferences","fileName":"jetpack-datastore-preferences.mdx","title":"Jetpack DataStore Preferences","date":"2020-10-05T00:00:00.000Z","tags":["kotlin","android"],"draft":false,"summary":"In this blog, we are going to see why we need Jetpack DataStore Preferences, learn how to implement Jetpack DataStore Preferences in our Android application and how can we migrate our SharedPreferences to DataStore Preferences.","layout":"BlogLayout","images":["/static/images/blog/jetpack-datastore-preferences.png"],"authors":["amitshekhar"]}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.15,"time":9000,"words":30},"slug":["amitshekhar"],"fileName":"amitshekhar.md","name":"Amit Shekhar","avatar":"/static/images/avatar.png","date":null}],"prev":{"title":"Google Android Developer Interview","date":"2020-09-10T00:00:00.000Z","tags":["android"],"draft":false,"summary":"In this blog, we will discuss about the Google Android Developer Interview.","layout":"BlogLayout","images":["/static/images/blog/google-android-developer-interview.png"],"authors":["amitshekhar"],"slug":"google-android-developer-interview"},"next":{"title":"Civil Engineer To Software Engineer","date":"2021-04-20T00:00:00.000Z","tags":["coding"],"draft":false,"summary":"My transition from a Civil Engineer to a Software Engineer.","layout":"BlogLayout","images":["/static/images/blog/civil-engineer-to-software-engineer.png"],"authors":["amitshekhar"],"slug":"civil-engineer-to-software-engineer"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["jetpack-datastore-preferences"]},"buildId":"Bn4QH9KFpFSLk5PMHtmFW","isFallback":false,"gsp":true,"scriptLoader":[]}
  </script>
 </body>
</html>