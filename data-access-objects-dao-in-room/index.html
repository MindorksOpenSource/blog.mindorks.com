<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>
   Data Access Objects - DAO in Room
  </title>
  <meta charset="utf-8"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="minimum-scale=1,initial-scale=1,width=device-width,shrink-to-fit=no" name="viewport"/>
  <link href="https://blog.mindorks.com/data-access-objects-dao-in-room" rel="canonical"/>
  <meta content="986249072156-dabps0lf90smluddrk5rkqsdjghk3hd3.apps.googleusercontent.com" name="google-signin-client_id"/>
  <meta content="android, learn android app development, android app development courses, android blogs, android tutorial" name="keywords"/>
  <meta content="Data Access Objects - DAO in Room" property="og:title"/>
  <meta content="website" property="og:type"/>
  <meta content="https://blog.mindorks.com/data-access-objects-dao-in-room" property="og:url"/>
  <meta content="/images/data-access-objects-dao-in-room-banner-509915bdcce194cb.png" property="og:image"/>
  <meta content="In this blog, we are going to learn about Data Access Objects or DAO in Room Persistent Library." property="og:description"/>
  <meta content="Data Access Objects - DAO in Room" property="twitter:title"/>
  <meta content="In this blog, we are going to learn about Data Access Objects or DAO in Room Persistent Library." name="twitter:description"/>
  <meta content="/images/data-access-objects-dao-in-room-banner-509915bdcce194cb.png" name="twitter:image:src"/>
  <meta content="summary_large_image" name="twitter:card"/>
  <meta content="@MindorksNextGen" name="twitter:site"/>
  <meta content="In this blog, we are going to learn about Data Access Objects or DAO in Room Persistent Library." name="description"/>
  <meta content="1620001391374687" property="fb:app_id"/>
  <link href="/styles/vendor-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link href="/styles/app-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link as="style" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" onload='this.onload=null,this.rel="stylesheet"' rel="preload"/>
  <noscript>
   <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
  </noscript>
  <script type="text/javascript">
   window.__PRELOADED_STATE__={toastr:{toastrs:[],confirm:null},blogData:{data:{},latestBlogs:null,isFetching:!0,isFetchingLatestBlogs:!1,currentCategory:"",categories:[]},contactData:{formData:{email:"",name:"",phone:"",message:"",isWriting:!1,isNameError:!1,isEmailError:!1,isPhoneError:!1,isMessageError:!1,dismissMsg:!1},successMessage:null,errorMessage:null,isSending:!1},communityData:{formData:{email:"",isEmailError:!1,isWriting:!1,isSending:!1,dismissMsg:!1},successMessage:null,errorMessage:null},blogPageData:{blogId:448,data:{id:448,title:"Data Access Objects - DAO in Room",description:"In this blog, we are going to learn about Data Access Objects or DAO in Room Persistent Library.",text:'<h1 class="graf--h1">Data Access Objects - DAO in Room</h1> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/data-access-objects-dao-in-room-banner-509915bdcce194cb.png class=\'graf-image\' alt=\'Data Access Objects - DAO in Room\' />\n\t\t\t\t\t\t\t\t</div ><blockquote class="graf--blockquote"><i class="graf--italic"><b class="graf--bold">Note:</b> This article is part of the advanced Room series which covers all the details about the Room persistence library. You can read all the articles here:</i></blockquote><ul><li><span class=""><a class="markup--anchor" target="_blank" href="https://blog.mindorks.com/introduction-to-room-persistent-library-in-android">Introduction to Room Persistent Library in Android</a></span></li><li><b class="graf--bold">Data Access Objects - DAO in Room [You are here]</b></li><li><span class=""><a class="markup--anchor" target="_blank" href="https://blog.mindorks.com/entity-relationship-in-room">Entity Relationship in Room</a></span></li><li><span class=""><a class="markup--anchor" target="_blank" href="https://blog.mindorks.com/how-does-room-work-internally">How does Room work internally?</a></span></li><li><span class=""><a class="markup--anchor" target="_blank" href="https://blog.mindorks.com/room-database-migrations">Room Database Migrations</a></span></li><li><span class=""><a class="markup--anchor" target="_blank" href="https://blog.mindorks.com/using-room-with-live-data-and-other-third-party-libraries">Using Room with LiveData and other third-party libraries</a></span></li></ul><p class="graf--p">So, let&#x27;s get started.</p><p class="graf--p">In previous articles, we have covered how we can use Room persistence library to create a relational database very easily. Some of the advantages of using Room are compile-time query verification, no boilerplate code and easy integration with RxJava, LiveData and Kotlin Coroutines. All these advantages in Room are achieved using Data Access Objects or DAOs.</p><p class="graf--p">In this article, we going to discuss <code class="graf--code-inline"><code class="graf--code-inline">Data Access Objects</code></code> or <code class="graf--code-inline"><code class="graf--code-inline">DAOs</code></code> in detail.</p><p class="graf--p">In Room, <code class="graf--code-inline"><code class="graf--code-inline">Data Access Objects</code></code> or <code class="graf--code-inline"><code class="graf--code-inline">DAOs</code></code> are used to access your application’s persisted data. They are a better and modular way to access your database as compared to query builders or direct queries.</p><p class="graf--p">A DAO can be either an interface or an abstract class. If it’s an abstract class, it can optionally have a constructor that takes a <code class="graf--code-inline"><code class="graf--code-inline"><a class="markup--anchor" target="_blank" href="https://developer.android.com/reference/androidx/room/RoomDatabase">RoomDatabase</a></code></code> as its only parameter. Room creates each DAO implementation at compile time.</p><p class="graf--p">You can perform multiple operations using DAO like Insertion, Updation, Deletion and making raw queries. Also, you can easily integrate LiveData, RxJava Observables, Kotlin Coroutines in DAOs.</p><h4 class="graf--h3"><b class="graf--bold">Insertion</b></h4><p class="graf--p">When you create a DAO method and annotate it with <code class="graf--code-inline"><code class="graf--code-inline"><a class="markup--anchor" target="_blank" href="https://developer.android.com/reference/androidx/room/Insert">@Insert</a></code></code>, Room generates an implementation that inserts all parameters into the database in a <b class="graf--bold">single transaction.</b></p><pre><code class="language-java graf graf--code">@Dao\ninterface UserDao {\n    @Insert(onConflict = OnConflictStrategy.REPLACE)\n    fun insertUsers(vararg users: User)    @Insert\n    fun insertBothUsers(user1: User, user2: User)    @Insert\n    fun insertUsersAndFriends(user: User, friends: List&lt;User&gt;)\n}</code></pre><p class="graf--p"><code class="graf--code-inline"><code class="graf--code-inline">onConflict</code></code> annotation parameter signifies what to do if a conflict happens on insertion. It can take the following values:</p><ul><li><b class="graf--bold">OnConflictStrategy.REPLACE</b> : To replace the old data and continue the transaction.</li><li><b class="graf--bold">OnConflictStrategy.ROLLBACK</b> : To rollback the transaction.</li><li><b class="graf--bold">OnConflictStrategy.ABORT</b> : To abort the transaction. The transaction is rolled back.</li><li><b class="graf--bold">OnConflictStrategy.FAIL</b> : To fail the transaction. The transaction is rolled back.</li><li><b class="graf--bold">OnConflictStrategy.NONE</b> : To ignore the conflict.</li></ul><blockquote class="graf--blockquote"><i class="graf--italic"><b class="graf--bold">Note: ROLLBACK</b></i> <i class="graf--italic">and</i> <i class="graf--italic"><b class="graf--bold">FAIL</b></i> <i class="graf--italic">strategies are deprecated. Use</i> <i class="graf--italic"><b class="graf--bold">ABORT</b></i> <i class="graf--italic">instead.</i></blockquote><h4 class="graf--h3"><b class="graf--bold">Updation</b></h4><p class="graf--p">When you create a DAO method and annotate it with <code class="graf--code-inline"><code class="graf--code-inline"><a class="markup--anchor" target="_blank" href="https://developer.android.com/reference/androidx/room/Insert">@</a><a class="markup--anchor" target="_blank" href="https://developer.android.com/reference/androidx/room/Update">Update</a></code></code>, Room generates an implementation that modifies a set of entities, given as parameters, in the database. It uses a query that matches against the primary key of each entity.</p><pre><code class="language-java graf graf--code">@Dao\ninterface UserDao {\n    @Update(onConflict = OnConflictStrategy.REPLACE)\n    fun updateUsers(vararg users: User)    @Update\n    fun update(user: User)\n}</code></pre><h4 class="graf--h3"><b class="graf--bold">Deletion</b></h4><p class="graf--p">When you create a DAO method and annotate it with <code class="graf--code-inline">@<code class="graf--code-inline">Delete</code></code>, Room generates an implementation that removes a set of entities, given as parameters, from the database. It uses the primary keys to find the entities to delete.</p><pre><code class="language-java graf graf--code">@Dao\ninterface UserDao {\n    @Delete\n    fun deleteUsers(vararg users: User)\n}</code></pre><h4 class="graf--h3"><b class="graf--bold">Simple queries</b></h4><p class="graf--p"><code class="graf--code-inline"><code class="graf--code-inline"><a class="markup--anchor" target="_blank" href="https://developer.android.com/reference/androidx/room/Query">@Query</a></code></code> is the main annotation used in DAO classes. It allows you to perform read/write operations on a database. Each <code class="graf--code-inline"><code class="graf--code-inline"><a class="markup--anchor" target="_blank" href="https://developer.android.com/reference/androidx/room/Query">@Query</a></code></code> method is verified at compile time, so if there is a problem with the query, a compilation error occurs instead of a runtime failure.</p><p class="graf--p">Room also verifies the return value of the query such that if the name of the field in the returned object doesn’t match the corresponding column names in the query response, Room alerts you in one of the following two ways:</p><ul><li>It gives a warning if only some field names match.</li><li>It gives an error if no field names match.</li></ul><pre><code class="language-java graf graf--code">@Dao\ninterface UserDao {\n    @Query("SELECT * FROM users")\n    fun loadAllUsers(): Array&lt;User&gt;\n}</code></pre><p class="graf--p"><b class="graf--bold">Passing parameters into the query</b></p><p class="graf--p">Parameters passed to the DAO methods can be used into the query written in @Query annotation.</p><pre><code class="language-java graf graf--code">@Dao\ninterface UserDao {\n    @Query("SELECT * FROM users WHERE age BETWEEN :minAge AND :maxAge")\n    fun loadAllUsersBetweenAges(minAge: Int, maxAge: Int): Array&lt;User&gt;\n\n    @Query("SELECT * FROM users WHERE first_name LIKE :search " +\n           "OR last_name LIKE :search")\n    fun findUserWithName(search: String): List&lt;User&gt;\n}</code></pre><p class="graf--p"><b class="graf--bold">Returning subsets of columns</b></p><p class="graf--p">You can also return subsets of columns from a query in Room.</p><pre><code class="language-java graf graf--code">data class NameTuple(\n    @ColumnInfo(name = "first_name") val firstName: String?,\n    @ColumnInfo(name = "last_name") val lastName: String?\n)@Dao\ninterface UserDao {\n    @Query("SELECT first_name, last_name FROM users")\n    fun loadFullName(): List&lt;NameTuple&gt;\n}</code></pre><p class="graf--p"><b class="graf--bold">Direct cursor access</b></p><p class="graf--p">If your app’s logic requires direct access to the return rows, you can return a <code class="graf--code-inline"><code class="graf--code-inline"><a class="markup--anchor" target="_blank" href="https://developer.android.com/reference/android/database/Cursor">Cursor</a></code></code> object from your queries.</p><pre><code class="language-java graf graf--code">@Dao\ninterface UserDao {\n    @Query("SELECT * FROM users")\n    fun loadAllUsers(): Cursor\n}</code></pre><p class="graf--p"><b class="graf--bold">Querying multiple tables</b></p><p class="graf--p">Some of your queries might require access to multiple tables to calculate the result. Room allows you to write any query, so you can also join tables. Furthermore, if the response is an observable data type, such as <code class="graf--code-inline"><code class="graf--code-inline"><a class="markup--anchor" target="_blank" href="http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Flowable.html">Flowable</a></code></code> or <code class="graf--code-inline"><code class="graf--code-inline"><a class="markup--anchor" target="_blank" href="https://developer.android.com/reference/androidx/lifecycle/LiveData">LiveData</a></code></code>, Room watches all tables referenced in the query for invalidation.</p><pre><code class="language-java graf graf--code">@Dao\ninterface BookDao {\n    @Query(\n        "SELECT * FROM book " +\n        "INNER JOIN loan ON loan.book_id = book.id " +\n        "INNER JOIN user ON user.id = loan.user_id " +\n        "WHERE users.name LIKE :userName"\n    )\n    fun findBooksBorrowedByNameSync(userName: String): List&lt;Book&gt;\n}</code></pre><h4 class="graf--h3"><b class="graf--bold">Query return types</b></h4><p class="graf--p">Room supports a variety of return types for query methods, including specialised return types for interoperability with specific frameworks or APIs.</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/data-access-objects-dao-in-room-query-return-type-54d650c9a15ce49e.png class=\'graf-image\' alt=\'Data Access Objects - DAO in Room\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">You can return <code class="graf--code-inline"><code class="graf--code-inline">LiveData</code></code>, <code class="graf--code-inline"><code class="graf--code-inline">Observable</code></code> and <code class="graf--code-inline"><code class="graf--code-inline">Flow</code></code> from query methods. Also, you can make a DAO method <b class="graf--bold">suspend function</b>. These are discussed in separate articles.</p><p class="graf--p">This is all about DAO in Room. Hope you enjoyed this blog. In the next blog, we will learn about <span class=""><a class="markup--anchor" target="_blank" href="https://blog.mindorks.com/entity-relationship-in-room">Entity Relationship in Room</a></span>.</p><p class="graf--p">You can also connect with me on <span class=""><a class="markup--anchor" target="_blank" href="https://www.linkedin.com/in/deepanshu42/">LinkedIn</a></span>, <span class=""><a class="markup--anchor" target="_blank" href="https://twitter.com/deep1743">Twitter</a></span>, <span class=""><a class="markup--anchor" target="_blank" href="https://www.facebook.com/deepanshu42">Facebook</a></span> and <span class=""><a class="markup--anchor" target="_blank" href="https://github.com/deepanshu42">Github</a></span>. </p><p class="graf--p">Thank You!!!</p>',author:14040,img_url:"/images/data-access-objects-dao-in-room-banner-509915bdcce194cb.png",blog_url:"data-access-objects-dao-in-room",likes:0,rank:0,category:1,published_at:"18th May 2020"},author:{id:14040,name:"Deepanshu",google_profile_pic:"https://lh6.googleusercontent.com/-0TQ3Ffy_SrU/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmSiX_h9XkfKNdYgwBAOyAwFkDZSw/s96-c/photo.jpg?sz=300",fb_profile_pic:null,profile_tagline:"Software Engineer - Android",fb_profile_url:"https://www.facebook.com/deepanshu42",google_plus_profile_url:null,twitter_profile_url:"https://twitter.com/deep1743",github_profile_url:"https://github.com/deepanshu42",linkedin_profile_url:"https://www.linkedin.com/in/deepanshu42/"},isFetching:!1,similarBlogs:[{id:377,title:"How to access SQLite Database in Android for Debugging?",description:"In this blog, we will learn how to access SQLite Database in Android for Debugging with the help of the Android Debug Database library. By using the Android Debug Database library, you can view/add/edit/delete values of the tables present in the database.",author:14897,img_url:"/images/how-to-access-sqlite-database-in-android-for-debugging-banner.png",blog_url:"how-to-access-sqlite-database-in-android-for-debugging",likes:0,rank:0,category:1,published_at:"13th November 2019",score:4.2850565910339355},{id:24,title:"Learn Kotlin - Data Class",description:"We frequently create a class to do nothing but hold data. In such a class some standard functionality is often mechanically derivable from the data. In Kotlin, this is called a data class and is marked as data.",author:14897,img_url:"https://s3.ap-south-1.amazonaws.com/mindorks/blogs/learn-kotlin-data-class.png",blog_url:"learn-kotlin-data-class",likes:1,rank:0,category:1,published_at:"22nd May 2017",score:2.3285839557647705},{id:370,title:"How to use Memory Heap Dumps data?",description:"In this blog, we will learn how to use memory heap dump data to identify memory leaks in our application. A memory leak occurs when an object is present in the memory and that object is not being used in the program.",author:17146,img_url:"/images/how-to-use-memory-heap-dumps-data-banner.png",blog_url:"how-to-use-memory-heap-dumps-data",likes:0,rank:0,category:1,published_at:"28th October 2019",score:2.3285839557647705},{id:371,title:"How to encrypt data safely on device and use the AndroidKeystore?",description:"In this blog, we will learn how to encrypt data safely in Android device and how to use Androidkeystore. We will learn about key encryption, file encryption, and how to encrypt SharedPreferences.",author:14897,img_url:"/images/how-to-encrypt-data-safely-on-a-device-and-use-the-androidkeystore-banner.png",blog_url:"how-to-encrypt-data-safely-on-device-and-use-the-androidkeystore",likes:0,rank:0,category:1,published_at:"28th October 2019",score:2.3285839557647705},{id:380,title:"Understanding Storage System To Store Data In Android",description:"In this blog, we will understand about the Android Storage System. We will learn about the Internal Storage, External Storage, Shared Preference, Database, and Shared Storage. We will also learn when to use which storage system in Android.",author:17146,img_url:"/images/understanding-storage-system-to-store-data-in-android-banner.png",blog_url:"understanding-storage-system-to-store-data-in-android",likes:0,rank:0,category:1,published_at:"17th December 2019",score:2.3285839557647705},{id:209,title:"Android Room Persistence Library in Kotlin",description:"Room Database is an abstraction layer over the SQLite Database which helps us to reduce our work with the SQLiteOpenHelper class.",author:14897,img_url:"/images/android_room_persistence_library_in_kotlin_mindorks_feature_image.png",blog_url:"android-room-persistence-library-in-kotlin",likes:0,rank:0,category:1,published_at:"9th January 2019",score:1.8798271417617798}],isSimilarBlogsFetching:!1},loginData:{data:null,isLoggingIn:!1,isLoggingOut:!1,loginState:!1,isForcedLogout:!1,isTokenRefreshed:!1,isRedirectHome:!1,message:""},updatesData:{news:null,inspirations:null,isNewsFetching:!0,isInspirationsFetching:!0},blogEditorData:{blogId:null,blogDetailsFormData:{title:"",description:"",imgUrl:"",blogUrl:"",category:"",categories:[],isWriting:!1,isTitleError:!1,isDescriptionError:!1,isImgUrlError:!1,isBlogUrlError:!1,isCategoryError:!1,isUploadingImage:!1,uploadedImageUrl:null},editorState:null,editorText:null,successMessage:null,errorMessage:null,isSending:!1,isMsgToShow:!1,isPublished:!1,isSubmitted:!1,isDraft:!0,isEditOfExistingBlog:!1,isFetchingBlogCategories:!1,isUploadingImage:!1,uploadedImageUrl:null},myBlogsData:{data:null,isSubmittedBlogsFetching:!0,isDraftBlogsFetching:!0,isPublishedBlogsFetching:!0,successMessage:null,errorMessage:null,isMsgToShow:!1,tabNames:["drafts","submissions","published"],selectedTab:"drafts",isFetchingBlog:!1,isDeletingBlog:!1,openEditorPage:!1},profilePreviewData:{profile:null,blogs:null,isFetchingProfile:!1,isFetchingAuthorBlogs:!1,successMessage:null,errorMessage:null,isMsgToShow:!1,isUserNotRegistered:!1,redirectToMyProfileEdit:!1},profileEditableData:{userId:null,name:null,fbProfilePicUrl:null,googleProfilePicUrl:null,profileFormData:{tagline:"",fbProfileUrl:"",googlePlusProfileUrl:"",twitterProfileUrl:"",githubProfileUrl:"",linkedinProfileUrl:"",isWriting:!1,isTaglineError:!1,isFbProfileUrlError:!1,isGooglePlusProfileUrlError:!1,isTwitterProfileUrlError:!1,isGithubProfileUrlError:!1,isLinkedinProfileUrlError:!1},isSavingProfile:!1,successMessage:null,errorMessage:null,isMsgToShow:!1,redirectToProfilePreview:!1},submitBlogData:{formData:{email:"",name:"",link:"",isWriting:!1,isNameError:!1,isEmailError:!1,isLinkError:!1,dismissMsg:!1},successMessage:null,errorMessage:null,isSubmitting:!1},advertisementsData:{data:{},isLoading:!1},recaptchaData:{verified:!1,successMessage:null,errorMessage:null},blogSearchData:{searches:null,isSearching:!1}}
  </script>
  <script async="" src="https://www.google-analytics.com/analytics.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-91686131-1","auto"),ga("require","cleanUrlTracker"),ga("require","eventTracker"),ga("require","impressionTracker"),ga("require","outboundLinkTracker"),ga("require","urlChangeTracker"),ga("require","maxScrollTracker"),ga("require","mediaQueryTracker"),ga("require","outboundFormTracker"),ga("require","outboundLinkTracker"),ga("require","pageVisibilityTracker"),ga("require","socialWidgetTracker"),ga("require","urlChangeTracker"),ga("send","pageview")
  </script>
  <script defer="defer" src="/assets/autotrack.js" type="text/javascript">
  </script>
  <script src="/assets/highlight.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/vendor-bundle-1.8.6.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/app-bundle-1.8.6.js" type="text/javascript">
  </script>
 </head>
 <body>
  <div id="root">
   <div class="screen app-load-content" data-reactroot="">
    <div class="ui centered grid">
     <div class="row" style="padding:0">
      <div class="ui fixed menu navbar huge borderless grid" style="background-color:#fff;height:60px">
      </div>
     </div>
     <div class="centered computer only row" style="padding:0">
      <div class="ui fixed top menu navbar huge borderless grid header-container" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="right menu">
        <a class="item" href="https://janisharali.com" target="_blank">
         Mentor Ali
        </a>
        <a class="item" href="https://amitshekhar.me" target="_blank">
         Mentor Amit
        </a>
       </div>
      </div>
     </div>
     <div class="tablet only mobile only row" style="padding:0">
      <div class="ui fixed top navbar huge menu borderless" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="item">
       </div>
      </div>
     </div>
    </div>
    <div class="header-height">
    </div>
    <div aria-live="assertive" class="redux-toastr">
     <div>
      <div class="top-left">
      </div>
      <div class="top-right">
      </div>
      <div class="top-center">
      </div>
      <div class="bottom-left">
      </div>
      <div class="bottom-right">
      </div>
      <div class="bottom-center">
      </div>
     </div>
    </div>
    <div class="content-container theme">
     <div class="ui centered one column grid" style="padding-bottom:80px;background-color:#fff">
      <div class="ten wide computer fifteen wide mobile fifteen wide tablet column" style="margin-top:50px">
       <div>
        <div class="blog-page-author">
         <div class="ui small header">
          <img alt="Deepanshu" class="ui circular image" src="https://lh6.googleusercontent.com/-0TQ3Ffy_SrU/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmSiX_h9XkfKNdYgwBAOyAwFkDZSw/s96-c/photo.jpg?sz=300"/>
          <div class="content">
           Deepanshu
           <div class="sub header" style="margin-top:5px">
            18th May 2020
           </div>
          </div>
         </div>
        </div>
        <div id="content">
         <article class="template">
          <div class="postContent">
           <div class="notesSource">
            <div class="postField postField--body" id="editor">
             <section class="section--first section--last">
              <div class="section-divider layoutSingleColumn-template">
               <hr class="section-divider"/>
              </div>
              <div class="section-content">
               <div class="section-inner layoutSingleColumn-template">
                <div>
                 <h1 class="graf--h1">
                  Data Access Objects - DAO in Room
                 </h1>
                 <div class="graf-image graf-caption">
                  <img alt="Data Access Objects - DAO in Room" class="graf-image" src="/images/data-access-objects-dao-in-room-banner-509915bdcce194cb.png"/>
                 </div>
                 <blockquote class="graf--blockquote">
                  <i class="graf--italic">
                   <b class="graf--bold">
                    Note:
                   </b>
                   This article is part of the advanced Room series which covers all the details about the Room persistence library. You can read all the articles here:
                  </i>
                 </blockquote>
                 <ul>
                  <li>
                   <span class="">
                    <a class="markup--anchor" href="https://blog.mindorks.com/introduction-to-room-persistent-library-in-android" target="_blank">
                     Introduction to Room Persistent Library in Android
                    </a>
                   </span>
                  </li>
                  <li>
                   <b class="graf--bold">
                    Data Access Objects - DAO in Room [You are here]
                   </b>
                  </li>
                  <li>
                   <span class="">
                    <a class="markup--anchor" href="https://blog.mindorks.com/entity-relationship-in-room" target="_blank">
                     Entity Relationship in Room
                    </a>
                   </span>
                  </li>
                  <li>
                   <span class="">
                    <a class="markup--anchor" href="https://blog.mindorks.com/how-does-room-work-internally" target="_blank">
                     How does Room work internally?
                    </a>
                   </span>
                  </li>
                  <li>
                   <span class="">
                    <a class="markup--anchor" href="https://blog.mindorks.com/room-database-migrations" target="_blank">
                     Room Database Migrations
                    </a>
                   </span>
                  </li>
                  <li>
                   <span class="">
                    <a class="markup--anchor" href="https://blog.mindorks.com/using-room-with-live-data-and-other-third-party-libraries" target="_blank">
                     Using Room with LiveData and other third-party libraries
                    </a>
                   </span>
                  </li>
                 </ul>
                 <p class="graf--p">
                  So, let's get started.
                 </p>
                 <p class="graf--p">
                  In previous articles, we have covered how we can use Room persistence library to create a relational database very easily. Some of the advantages of using Room are compile-time query verification, no boilerplate code and easy integration with RxJava, LiveData and Kotlin Coroutines. All these advantages in Room are achieved using Data Access Objects or DAOs.
                 </p>
                 <p class="graf--p">
                  In this article, we going to discuss
                  <code class="graf--code-inline">
                   <code class="graf--code-inline">
                    Data Access Objects
                   </code>
                  </code>
                  or
                  <code class="graf--code-inline">
                   <code class="graf--code-inline">
                    DAOs
                   </code>
                  </code>
                  in detail.
                 </p>
                 <p class="graf--p">
                  In Room,
                  <code class="graf--code-inline">
                   <code class="graf--code-inline">
                    Data Access Objects
                   </code>
                  </code>
                  or
                  <code class="graf--code-inline">
                   <code class="graf--code-inline">
                    DAOs
                   </code>
                  </code>
                  are used to access your application’s persisted data. They are a better and modular way to access your database as compared to query builders or direct queries.
                 </p>
                 <p class="graf--p">
                  A DAO can be either an interface or an abstract class. If it’s an abstract class, it can optionally have a constructor that takes a
                  <code class="graf--code-inline">
                   <code class="graf--code-inline">
                    <a class="markup--anchor" href="https://developer.android.com/reference/androidx/room/RoomDatabase" target="_blank">
                     RoomDatabase
                    </a>
                   </code>
                  </code>
                  as its only parameter. Room creates each DAO implementation at compile time.
                 </p>
                 <p class="graf--p">
                  You can perform multiple operations using DAO like Insertion, Updation, Deletion and making raw queries. Also, you can easily integrate LiveData, RxJava Observables, Kotlin Coroutines in DAOs.
                 </p>
                 <h4 class="graf--h3">
                  <b class="graf--bold">
                   Insertion
                  </b>
                 </h4>
                 <p class="graf--p">
                  When you create a DAO method and annotate it with
                  <code class="graf--code-inline">
                   <code class="graf--code-inline">
                    <a class="markup--anchor" href="https://developer.android.com/reference/androidx/room/Insert" target="_blank">
                     @Insert
                    </a>
                   </code>
                  </code>
                  , Room generates an implementation that inserts all parameters into the database in a
                  <b class="graf--bold">
                   single transaction.
                  </b>
                 </p>
                 <pre><code class="language-java graf graf--code">@Dao
interface UserDao {
    @Insert(onConflict = OnConflictStrategy.REPLACE)
    fun insertUsers(vararg users: User)    @Insert
    fun insertBothUsers(user1: User, user2: User)    @Insert
    fun insertUsersAndFriends(user: User, friends: List&lt;User&gt;)
}</code></pre>
                 <p class="graf--p">
                  <code class="graf--code-inline">
                   <code class="graf--code-inline">
                    onConflict
                   </code>
                  </code>
                  annotation parameter signifies what to do if a conflict happens on insertion. It can take the following values:
                 </p>
                 <ul>
                  <li>
                   <b class="graf--bold">
                    OnConflictStrategy.REPLACE
                   </b>
                   : To replace the old data and continue the transaction.
                  </li>
                  <li>
                   <b class="graf--bold">
                    OnConflictStrategy.ROLLBACK
                   </b>
                   : To rollback the transaction.
                  </li>
                  <li>
                   <b class="graf--bold">
                    OnConflictStrategy.ABORT
                   </b>
                   : To abort the transaction. The transaction is rolled back.
                  </li>
                  <li>
                   <b class="graf--bold">
                    OnConflictStrategy.FAIL
                   </b>
                   : To fail the transaction. The transaction is rolled back.
                  </li>
                  <li>
                   <b class="graf--bold">
                    OnConflictStrategy.NONE
                   </b>
                   : To ignore the conflict.
                  </li>
                 </ul>
                 <blockquote class="graf--blockquote">
                  <i class="graf--italic">
                   <b class="graf--bold">
                    Note: ROLLBACK
                   </b>
                  </i>
                  <i class="graf--italic">
                   and
                  </i>
                  <i class="graf--italic">
                   <b class="graf--bold">
                    FAIL
                   </b>
                  </i>
                  <i class="graf--italic">
                   strategies are deprecated. Use
                  </i>
                  <i class="graf--italic">
                   <b class="graf--bold">
                    ABORT
                   </b>
                  </i>
                  <i class="graf--italic">
                   instead.
                  </i>
                 </blockquote>
                 <h4 class="graf--h3">
                  <b class="graf--bold">
                   Updation
                  </b>
                 </h4>
                 <p class="graf--p">
                  When you create a DAO method and annotate it with
                  <code class="graf--code-inline">
                   <code class="graf--code-inline">
                    <a class="markup--anchor" href="https://developer.android.com/reference/androidx/room/Insert" target="_blank">
                     @
                    </a>
                    <a class="markup--anchor" href="https://developer.android.com/reference/androidx/room/Update" target="_blank">
                     Update
                    </a>
                   </code>
                  </code>
                  , Room generates an implementation that modifies a set of entities, given as parameters, in the database. It uses a query that matches against the primary key of each entity.
                 </p>
                 <pre><code class="language-java graf graf--code">@Dao
interface UserDao {
    @Update(onConflict = OnConflictStrategy.REPLACE)
    fun updateUsers(vararg users: User)    @Update
    fun update(user: User)
}</code></pre>
                 <h4 class="graf--h3">
                  <b class="graf--bold">
                   Deletion
                  </b>
                 </h4>
                 <p class="graf--p">
                  When you create a DAO method and annotate it with
                  <code class="graf--code-inline">
                   @
                   <code class="graf--code-inline">
                    Delete
                   </code>
                  </code>
                  , Room generates an implementation that removes a set of entities, given as parameters, from the database. It uses the primary keys to find the entities to delete.
                 </p>
                 <pre><code class="language-java graf graf--code">@Dao
interface UserDao {
    @Delete
    fun deleteUsers(vararg users: User)
}</code></pre>
                 <h4 class="graf--h3">
                  <b class="graf--bold">
                   Simple queries
                  </b>
                 </h4>
                 <p class="graf--p">
                  <code class="graf--code-inline">
                   <code class="graf--code-inline">
                    <a class="markup--anchor" href="https://developer.android.com/reference/androidx/room/Query" target="_blank">
                     @Query
                    </a>
                   </code>
                  </code>
                  is the main annotation used in DAO classes. It allows you to perform read/write operations on a database. Each
                  <code class="graf--code-inline">
                   <code class="graf--code-inline">
                    <a class="markup--anchor" href="https://developer.android.com/reference/androidx/room/Query" target="_blank">
                     @Query
                    </a>
                   </code>
                  </code>
                  method is verified at compile time, so if there is a problem with the query, a compilation error occurs instead of a runtime failure.
                 </p>
                 <p class="graf--p">
                  Room also verifies the return value of the query such that if the name of the field in the returned object doesn’t match the corresponding column names in the query response, Room alerts you in one of the following two ways:
                 </p>
                 <ul>
                  <li>
                   It gives a warning if only some field names match.
                  </li>
                  <li>
                   It gives an error if no field names match.
                  </li>
                 </ul>
                 <pre><code class="language-java graf graf--code">@Dao
interface UserDao {
    @Query("SELECT * FROM users")
    fun loadAllUsers(): Array&lt;User&gt;
}</code></pre>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Passing parameters into the query
                  </b>
                 </p>
                 <p class="graf--p">
                  Parameters passed to the DAO methods can be used into the query written in @Query annotation.
                 </p>
                 <pre><code class="language-java graf graf--code">@Dao
interface UserDao {
    @Query("SELECT * FROM users WHERE age BETWEEN :minAge AND :maxAge")
    fun loadAllUsersBetweenAges(minAge: Int, maxAge: Int): Array&lt;User&gt;

    @Query("SELECT * FROM users WHERE first_name LIKE :search " +
           "OR last_name LIKE :search")
    fun findUserWithName(search: String): List&lt;User&gt;
}</code></pre>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Returning subsets of columns
                  </b>
                 </p>
                 <p class="graf--p">
                  You can also return subsets of columns from a query in Room.
                 </p>
                 <pre><code class="language-java graf graf--code">data class NameTuple(
    @ColumnInfo(name = "first_name") val firstName: String?,
    @ColumnInfo(name = "last_name") val lastName: String?
)@Dao
interface UserDao {
    @Query("SELECT first_name, last_name FROM users")
    fun loadFullName(): List&lt;NameTuple&gt;
}</code></pre>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Direct cursor access
                  </b>
                 </p>
                 <p class="graf--p">
                  If your app’s logic requires direct access to the return rows, you can return a
                  <code class="graf--code-inline">
                   <code class="graf--code-inline">
                    <a class="markup--anchor" href="https://developer.android.com/reference/android/database/Cursor" target="_blank">
                     Cursor
                    </a>
                   </code>
                  </code>
                  object from your queries.
                 </p>
                 <pre><code class="language-java graf graf--code">@Dao
interface UserDao {
    @Query("SELECT * FROM users")
    fun loadAllUsers(): Cursor
}</code></pre>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Querying multiple tables
                  </b>
                 </p>
                 <p class="graf--p">
                  Some of your queries might require access to multiple tables to calculate the result. Room allows you to write any query, so you can also join tables. Furthermore, if the response is an observable data type, such as
                  <code class="graf--code-inline">
                   <code class="graf--code-inline">
                    <a class="markup--anchor" href="http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Flowable.html" target="_blank">
                     Flowable
                    </a>
                   </code>
                  </code>
                  or
                  <code class="graf--code-inline">
                   <code class="graf--code-inline">
                    <a class="markup--anchor" href="https://developer.android.com/reference/androidx/lifecycle/LiveData" target="_blank">
                     LiveData
                    </a>
                   </code>
                  </code>
                  , Room watches all tables referenced in the query for invalidation.
                 </p>
                 <pre><code class="language-java graf graf--code">@Dao
interface BookDao {
    @Query(
        "SELECT * FROM book " +
        "INNER JOIN loan ON loan.book_id = book.id " +
        "INNER JOIN user ON user.id = loan.user_id " +
        "WHERE users.name LIKE :userName"
    )
    fun findBooksBorrowedByNameSync(userName: String): List&lt;Book&gt;
}</code></pre>
                 <h4 class="graf--h3">
                  <b class="graf--bold">
                   Query return types
                  </b>
                 </h4>
                 <p class="graf--p">
                  Room supports a variety of return types for query methods, including specialised return types for interoperability with specific frameworks or APIs.
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Data Access Objects - DAO in Room" class="graf-image" src="/images/data-access-objects-dao-in-room-query-return-type-54d650c9a15ce49e.png"/>
                 </div>
                 <p class="graf--p">
                  You can return
                  <code class="graf--code-inline">
                   <code class="graf--code-inline">
                    LiveData
                   </code>
                  </code>
                  ,
                  <code class="graf--code-inline">
                   <code class="graf--code-inline">
                    Observable
                   </code>
                  </code>
                  and
                  <code class="graf--code-inline">
                   <code class="graf--code-inline">
                    Flow
                   </code>
                  </code>
                  from query methods. Also, you can make a DAO method
                  <b class="graf--bold">
                   suspend function
                  </b>
                  . These are discussed in separate articles.
                 </p>
                 <p class="graf--p">
                  This is all about DAO in Room. Hope you enjoyed this blog. In the next blog, we will learn about
                  <span class="">
                   <a class="markup--anchor" href="https://blog.mindorks.com/entity-relationship-in-room" target="_blank">
                    Entity Relationship in Room
                   </a>
                  </span>
                  .
                 </p>
                 <p class="graf--p">
                  You can also connect with me on
                  <span class="">
                   <a class="markup--anchor" href="https://www.linkedin.com/in/deepanshu42/" target="_blank">
                    LinkedIn
                   </a>
                  </span>
                  ,
                  <span class="">
                   <a class="markup--anchor" href="https://twitter.com/deep1743" target="_blank">
                    Twitter
                   </a>
                  </span>
                  ,
                  <span class="">
                   <a class="markup--anchor" href="https://www.facebook.com/deepanshu42" target="_blank">
                    Facebook
                   </a>
                  </span>
                  and
                  <span class="">
                   <a class="markup--anchor" href="https://github.com/deepanshu42" target="_blank">
                    Github
                   </a>
                  </span>
                  .
                 </p>
                 <p class="graf--p">
                  Thank You!!!
                 </p>
                </div>
               </div>
              </div>
             </section>
            </div>
           </div>
          </div>
         </article>
        </div>
       </div>
       <div class="ui divider">
       </div>
      </div>
      <div class="stretched fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui large center aligned header" style="padding-top:20px">
        Recommended for You
       </div>
      </div>
      <div class="fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui centered grid">
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="How to access SQLite Database in Android for Debugging?" class="ui centered image" src="/images/how-to-access-sqlite-database-in-android-for-debugging-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            How to access SQLite Database in Android for Debugging?
           </div>
           <div class="meta">
            13th November 2019
           </div>
           <div class="description">
            In this blog, we will learn how to access SQLite Database in Android for Debugging with the help of the Android Debug Database library. By using the Android Debug Database library, you can view/add/edit/delete values of the tables present in the database.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="Learn Kotlin - Data Class" class="ui centered image" src="https://s3.ap-south-1.amazonaws.com/mindorks/blogs/learn-kotlin-data-class.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Learn Kotlin - Data Class
           </div>
           <div class="meta">
            22nd May 2017
           </div>
           <div class="description">
            We frequently create a class to do nothing but hold data. In such a class some standard functionality is often mechanically derivable from the data. In Kotlin, this is called a data class and is marked as data.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="How to use Memory Heap Dumps data?" class="ui centered image" src="/images/how-to-use-memory-heap-dumps-data-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            How to use Memory Heap Dumps data?
           </div>
           <div class="meta">
            28th October 2019
           </div>
           <div class="description">
            In this blog, we will learn how to use memory heap dump data to identify memory leaks in our application. A memory leak occurs when an object is present in the memory and that object is not being used in the program.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="How to encrypt data safely on device and use the AndroidKeystore?" class="ui centered image" src="/images/how-to-encrypt-data-safely-on-a-device-and-use-the-androidkeystore-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            How to encrypt data safely on device and use the AndroidKeystore?
           </div>
           <div class="meta">
            28th October 2019
           </div>
           <div class="description">
            In this blog, we will learn how to encrypt data safely in Android device and how to use Androidkeystore. We will learn about key encryption, file encryption, and how to encrypt SharedPreferences.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="Understanding Storage System To Store Data In Android" class="ui centered image" src="/images/understanding-storage-system-to-store-data-in-android-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Understanding Storage System To Store Data In Android
           </div>
           <div class="meta">
            17th December 2019
           </div>
           <div class="description">
            In this blog, we will understand about the Android Storage System. We will learn about the Internal Storage, External Storage, Shared Preference, Database, and Shared Storage. We will also learn when to use which storage system in Android.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="Android Room Persistence Library in Kotlin" class="ui centered image" src="/images/android_room_persistence_library_in_kotlin_mindorks_feature_image.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Android Room Persistence Library in Kotlin
           </div>
           <div class="meta">
            9th January 2019
           </div>
           <div class="description">
            Room Database is an abstraction layer over the SQLite Database which helps us to reduce our work with the SQLiteOpenHelper class.
           </div>
          </div>
         </a>
        </div>
       </div>
      </div>
     </div>
    </div>
    <div style="background:#fff">
     <footer class="content-container">
      <div class="ui centered padded grid" style="padding-top:40px;background:linear-gradient(to right,#c4e0e0,#e5f1f1)">
       <h2 class="ui huge icon center aligned header">
        <div class="content">
         Connect With Your Mentors
        </div>
       </h2>
       <div class="centered row">
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Janishar Ali" class="ui medium circular image" src="/assets/ali.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://janisharali.com" target="_blank">
             Janishar Ali
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://janisharali.com" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/janisharali" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Amit Shekhar" class="ui medium circular image" src="/assets/amit.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://amitshekhar.me" target="_blank">
             Amit Shekhar
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://amitshekhar.me" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/amitiitbhu" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
      <div class="ui divider" style="margin:unset">
      </div>
      <h5 class="ui header" style="padding:16px;margin:unset;color:#555">
       <i aria-hidden="true" class="copyright icon">
       </i>
       <div class="content">
        Copyright 2022, MindOrks Nextgen Private Limited
       </div>
      </h5>
     </footer>
    </div>
   </div>
  </div>
  <script type="text/javascript">
   window.hljs.initHighlightingOnLoad()
  </script>
 </body>
</html>