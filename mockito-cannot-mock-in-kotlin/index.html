<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>
   Mockito cannot mock because : final class in Kotlin
  </title>
  <meta charset="utf-8"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="minimum-scale=1,initial-scale=1,width=device-width,shrink-to-fit=no" name="viewport"/>
  <link href="https://blog.mindorks.com/mockito-cannot-mock-in-kotlin" rel="canonical"/>
  <meta content="986249072156-dabps0lf90smluddrk5rkqsdjghk3hd3.apps.googleusercontent.com" name="google-signin-client_id"/>
  <meta content="android, learn android app development, android app development courses, android blogs, android tutorial" name="keywords"/>
  <meta content="Mockito cannot mock because : final class in Kotlin" property="og:title"/>
  <meta content="website" property="og:type"/>
  <meta content="https://blog.mindorks.com/mockito-cannot-mock-in-kotlin" property="og:url"/>
  <meta content="/images/mockito-cannot-mock-banner.jpg" property="og:image"/>
  <meta content="In this blog, we will talk about how we can mock the final class using Mockito. By default, we can't mock the final classes using mockito. Here in this blog, I have talked about multiple ways to test final classes." property="og:description"/>
  <meta content="Mockito cannot mock because : final class in Kotlin" property="twitter:title"/>
  <meta content="In this blog, we will talk about how we can mock the final class using Mockito. By default, we can't mock the final classes using mockito. Here in this blog, I have talked about multiple ways to test final classes." name="twitter:description"/>
  <meta content="/images/mockito-cannot-mock-banner.jpg" name="twitter:image:src"/>
  <meta content="summary_large_image" name="twitter:card"/>
  <meta content="@MindorksNextGen" name="twitter:site"/>
  <meta content="In this blog, we will talk about how we can mock the final class using Mockito. By default, we can't mock the final classes using mockito. Here in this blog, I have talked about multiple ways to test final classes." name="description"/>
  <meta content="1620001391374687" property="fb:app_id"/>
  <link href="/styles/vendor-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link href="/styles/app-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link as="style" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" onload='this.onload=null,this.rel="stylesheet"' rel="preload"/>
  <noscript>
   <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
  </noscript>
  <script type="text/javascript">
     </script>
  <script async="" src="https://www.google-analytics.com/analytics.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-91686131-1","auto"),ga("require","cleanUrlTracker"),ga("require","eventTracker"),ga("require","impressionTracker"),ga("require","outboundLinkTracker"),ga("require","urlChangeTracker"),ga("require","maxScrollTracker"),ga("require","mediaQueryTracker"),ga("require","outboundFormTracker"),ga("require","outboundLinkTracker"),ga("require","pageVisibilityTracker"),ga("require","socialWidgetTracker"),ga("require","urlChangeTracker"),ga("send","pageview")
  </script>
  <script defer="defer" src="/assets/autotrack.js" type="text/javascript">
  </script>
  <script src="/assets/highlight.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/vendor-bundle-1.8.6.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/app-bundle-1.8.6.js" type="text/javascript">
  </script>
 </head>
 <body>
  <div id="root">
   <div class="screen app-load-content" data-reactroot="">
    <div class="ui centered grid">
     <div class="row" style="padding:0">
      <div class="ui fixed menu navbar huge borderless grid" style="background-color:#fff;height:60px">
      </div>
     </div>
     <div class="centered computer only row" style="padding:0">
      <div class="ui fixed top menu navbar huge borderless grid header-container" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="right menu">
        <a class="item" href="https://janisharali.com" target="_blank">
         Mentor Ali
        </a>
        <a class="item" href="https://amitshekhar.me" target="_blank">
         Mentor Amit
        </a>
       </div>
      </div>
     </div>
     <div class="tablet only mobile only row" style="padding:0">
      <div class="ui fixed top navbar huge menu borderless" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="item">
       </div>
      </div>
     </div>
    </div>
    <div class="header-height">
    </div>
    <div aria-live="assertive" class="redux-toastr">
     <div>
      <div class="top-left">
      </div>
      <div class="top-right">
      </div>
      <div class="top-center">
      </div>
      <div class="bottom-left">
      </div>
      <div class="bottom-right">
      </div>
      <div class="bottom-center">
      </div>
     </div>
    </div>
    <div class="content-container theme">
     <div class="ui centered one column grid" style="padding-bottom:80px;background-color:#fff">
      <div class="ten wide computer fifteen wide mobile fifteen wide tablet column" style="margin-top:50px">
       <div>
        <div class="blog-page-author">
         <div class="ui small header">
          <img alt="Himanshu Singh" class="ui circular image" src="https://lh3.googleusercontent.com/a-/AOh14Ghy8H-FJrgWB2TcxHCOKWxWEQB4AiklYADGTydu4nE=s96-c?sz=300"/>
          <div class="content">
           Himanshu Singh
           <div class="sub header" style="margin-top:5px">
            31st May 2019
           </div>
          </div>
         </div>
        </div>
        <div id="content">
         <article class="template">
          <div class="postContent">
           <div class="notesSource">
            <div class="postField postField--body" id="editor">
             <section class="section--first section--last">
              <div class="section-divider layoutSingleColumn-template">
               <hr class="section-divider"/>
              </div>
              <div class="section-content">
               <div class="section-inner layoutSingleColumn-template">
                <div>
                 <h1 class="graf--h1">
                  Mockito cannot mock because : final class in Kotlin
                 </h1>
                 <div class="graf-image graf-caption">
                  <img alt="Mockito cannot mock because : final class in Kotlin" class="graf-image" src="/images/mockito-cannot-mock-banner.jpg"/>
                 </div>
                 <p class="graf--p">
                  In this blog, I will talk about using Mockito to test final classes in Kotlin. Why is this an issue, which made me write a blog on it. So, before delay let me get started.
                 </p>
                 <p class="graf--p">
                  But, Firstly let me help you start with a small example of using Mockito.To integrate Mockito in our project we will add the following in our app's
                  <b class="graf--bold">
                   build.gradle
                  </b>
                  file,
                 </p>
                 <pre><code class="language-java graf graf--code">testImplementation 'org.mockito:mockito-core:2.19.0'</code></pre>
                 <p class="graf--p">
                  Then, In our
                  <b class="graf--bold">
                   <i class="graf--italic">
                    src -&gt; main -&gt; java -&gt; apps_package_name,
                   </i>
                  </b>
                  we will create a file which we are going to test called Utility.kt
                 </p>
                 <pre><code class="language-java graf graf--code">class Utility {
    fun getSum(a: Int, b: Int): Int = a + b
}</code></pre>
                 <p class="graf--p">
                  Here, we will test the
                  <b class="graf--bold">
                   getSum()
                  </b>
                  function which takes two integer parameter and returns it's sum.
                 </p>
                 <p class="graf--p">
                  Now, to start its local unit testing, we need to create a file called
                  <b class="graf--bold">
                   UtilityTest.kt
                  </b>
                  file in
                  <b class="graf--bold">
                   test package.
                  </b>
                 </p>
                 <pre><code class="language-java graf graf--code">class UtilityTest{
    @Test
    fun providedNumber_isSum_true(){
        val mockUtil = mock(Utility::class.java)
        `when`(mockUtil.getSum(1,2)).thenReturn(3)
        val actualResult = mockUtil.getSum(1,2)
        assertEquals(3, actualResult)

    }
}</code></pre>
                 <p class="graf--p">
                  In the above snippet,
                 </p>
                 <ul>
                  <li>
                   <b class="graf--bold">
                    @Test
                   </b>
                   annotation means that the function can be exectuted as a test.
                  </li>
                  <li>
                   using
                   <b class="graf--bold">
                    mock(...),
                   </b>
                   we actually are mocking the Utility class file at the runtime.
                  </li>
                  <li>
                   Now, we are running the
                   <b class="graf--bold">
                    getSum()
                   </b>
                   from Utility class and returning the result.
                  </li>
                  <li>
                   Now, we assign the result to a actualResult variable from
                   <b class="graf--bold">
                    mockUtil.getSum(..) .
                   </b>
                   This will make the value 3 as because we passed 1,2.
                  </li>
                  <li>
                   Lastly, we pass
                   <b class="graf--bold">
                    assertEquals()
                   </b>
                   to check if the expected output is same as desired output.
                  </li>
                 </ul>
                 <p class="graf--p">
                 </p>
                 <p class="graf--p">
                  Now, when we run the test we should get the test has passed as sum of 1 and 2 is always 3. But, when we run this we bump into an error,
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Mockito cannot mock because : final class in Kotlin" class="graf-image" src="/images/output-test-error.png"/>
                 </div>
                 <p class="graf--p">
                  Why is this? The test case which we wrote it was correct but the error shows that we can't mock the final class.
                 </p>
                 <p class="graf--p">
                  This is because,
                 </p>
                 <blockquote class="graf--blockquote">
                  <b class="graf--bold">
                   All Kotlin Classes are Final by default.
                  </b>
                 </blockquote>
                 <p class="graf--p">
                  Now, there are two ways to do it. Let's talk about them one by one.
                 </p>
                 <ol>
                  <li>
                   Firstly we can make the Utility class
                   <b class="graf--bold">
                    open
                   </b>
                   and then can we test the class using the above code.This can be a problem as because now we have to change the code base.
                  </li>
                  <li>
                   Secondly and most importantly, Mockito 2.10 provided a new update where we can mock the final classes.
                  </li>
                 </ol>
                 <p class="graf--p">
                  Let's talk about it in detail.In the project, under
                  <b class="graf--bold">
                   <i class="graf--italic">
                    src-&gt;test
                   </i>
                  </b>
                  folder create a
                  <b class="graf--bold">
                   resources
                  </b>
                  directory. Inside it create a new directory called
                  <b class="graf--bold">
                   mockito-extensions .
                  </b>
                 </p>
                 <p class="graf--p">
                  Inside the mockito-extensions directory we create a text file called
                 </p>
                 <pre><code class="language-java graf graf--code">org.mockito.plugins.MockMaker</code></pre>
                 <p class="graf--p">
                  and add
                  <b class="graf--bold">
                   mock-maker-inline
                  </b>
                  in the file.
                 </p>
                 <p class="graf--p">
                  That is it. Now when we run the above test which we created will throw an output,
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Mockito cannot mock because : final class in Kotlin" class="graf-image" src="/images/test-passed-output.png"/>
                 </div>
                 <blockquote class="graf--blockquote">
                  <b class="graf--bold">
                   Voila, our test has passed.
                  </b>
                 </blockquote>
                 <p class="graf--p">
                  But, what magic did this one line did ?
                 </p>
                 <p class="graf--p">
                  This indicated Mockito Framework that we can now mock any final classes.
                 </p>
                 <blockquote class="graf--blockquote">
                  Note: We can also use
                  <b class="graf--bold">
                   <i class="graf--italic">
                    all-open
                   </i>
                  </b>
                  plugin to do the same and it will also help to mock the final classes.
                 </blockquote>
                 <p class="graf--p">
                  Happy Coding :)
                 </p>
                </div>
               </div>
              </div>
             </section>
            </div>
           </div>
          </div>
         </article>
        </div>
       </div>
       <div class="ui divider">
       </div>
      </div>
      <div class="stretched fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui large center aligned header" style="padding-top:20px">
        Recommended for You
       </div>
      </div>
      <div class="fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui centered grid">
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/using-mockito-in-android-unit-testing-as-a-pro/">
          <img alt="Using Mockito in Android Unit Testing as a Pro" class="ui centered image" src="/images/use-mockito-as-pro-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Using Mockito in Android Unit Testing as a Pro
           </div>
           <div class="meta">
            26th July 2019
           </div>
           <div class="description">
            In this blog, we will learn about how to use mocking as a pro in Android unit testing. You will learn how to set up and the perform test using it
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/learn-kotlin-data-class/">
          <img alt="Learn Kotlin - Data Class" class="ui centered image" src="https://s3.ap-south-1.amazonaws.com/mindorks/blogs/learn-kotlin-data-class.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Learn Kotlin - Data Class
           </div>
           <div class="meta">
            22nd May 2017
           </div>
           <div class="description">
            We frequently create a class to do nothing but hold data. In such a class some standard functionality is often mechanically derivable from the data. In Kotlin, this is called a data class and is marked as data.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/how-to-create-a-singleton-class-in-kotlin/">
          <img alt="How to create a singleton class in Kotlin?" class="ui centered image" src="/images/how-to-make-a-singleton-class-in-kotlin-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            How to create a singleton class in Kotlin?
           </div>
           <div class="meta">
            4th September 2019
           </div>
           <div class="description">
            In this blog, we will learn how to create a singleton class in Kotlin? If you don't know anything about the singleton class then don't worry, we will cover every part of the singleton class.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/extension-functions-vs-static-utility-class/">
          <img alt="Extension Functions vs Static Utility Class" class="ui centered image" src="/images/extension-class-banner-17410a644c29d178.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Extension Functions vs Static Utility Class
           </div>
           <div class="meta">
            22nd May 2020
           </div>
           <div class="description">
            In this blog, we are going to talk about the Extension function and util class in Kotlin. We will learn when to use which one and what are the advantages of using them.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/learn-kotlin-apply-vs-with/">
          <img alt="Learn Kotlin —  apply vs with
" class="ui centered image" src="https://s3.ap-south-1.amazonaws.com/mindorks/blogs/learn-kotlin%E2%80%8A%E2%80%94%E2%80%8Aapply-vs-with.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Learn Kotlin —  apply vs with
           </div>
           <div class="meta">
            22nd May 2017
           </div>
           <div class="description">
            There are many great features available in Kotlin, we can take advantage of all these features to write the better application in Kotlin. Among all those features, apply and with are important feature. We must know when to use which one.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/learn-kotlin-destructuring-declarations/">
          <img alt="Learn Kotlin- Destructuring Declarations" class="ui centered image" src="https://s3.ap-south-1.amazonaws.com/mindorks/blogs/learn-kotlin-destructuring-declarations.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Learn Kotlin- Destructuring Declarations
           </div>
           <div class="meta">
            22nd May 2017
           </div>
           <div class="description">
            Destructuring is a convenient way of extracting multiple values from data stored in (possibly nested) objects and Arrays. It can be used in locations that receive data (such as the left-hand side of an assignment).
           </div>
          </div>
         </a>
        </div>
       </div>
      </div>
     </div>
    </div>
    <div style="background:#fff">
     <footer class="content-container">
      <div class="ui centered padded grid" style="padding-top:40px;background:linear-gradient(to right,#c4e0e0,#e5f1f1)">
       <h2 class="ui huge icon center aligned header">
        <div class="content">
         Connect With Your Mentors
        </div>
       </h2>
       <div class="centered row">
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Janishar Ali" class="ui medium circular image" src="/assets/ali.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://janisharali.com" target="_blank">
             Janishar Ali
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://janisharali.com" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/janisharali" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Amit Shekhar" class="ui medium circular image" src="/assets/amit.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://amitshekhar.me" target="_blank">
             Amit Shekhar
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://amitshekhar.me" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/amitiitbhu" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
      <div class="ui divider" style="margin:unset">
      </div>
      <h5 class="ui header" style="padding:16px;margin:unset;color:#555">
       <i aria-hidden="true" class="copyright icon">
       </i>
       <div class="content">
        Copyright 2022, MindOrks Nextgen Private Limited
       </div>
      </h5>
     </footer>
    </div>
   </div>
  </div>
  <script type="text/javascript">
   window.hljs.initHighlightingOnLoad()
  </script>
 </body>
</html>