<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>
   Understanding and Implementing Permission in Android Q
  </title>
  <meta charset="utf-8"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="minimum-scale=1,initial-scale=1,width=device-width,shrink-to-fit=no" name="viewport"/>
  <link href="https://blog.mindorks.com/location-permissions-in-android-q" rel="canonical"/>
  <meta content="986249072156-dabps0lf90smluddrk5rkqsdjghk3hd3.apps.googleusercontent.com" name="google-signin-client_id"/>
  <meta content="android, learn android app development, android app development courses, android blogs, android tutorial" name="keywords"/>
  <meta content="Understanding and Implementing Permission in Android Q" property="og:title"/>
  <meta content="website" property="og:type"/>
  <meta content="https://blog.mindorks.com/location-permissions-in-android-q" property="og:url"/>
  <meta content="/images/location-permission.png" property="og:image"/>
  <meta content="In this blog, we will understand the new privacy-based location permission in Android Q and how to implement it in your app." property="og:description"/>
  <meta content="Understanding and Implementing Permission in Android Q" property="twitter:title"/>
  <meta content="In this blog, we will understand the new privacy-based location permission in Android Q and how to implement it in your app." name="twitter:description"/>
  <meta content="/images/location-permission.png" name="twitter:image:src"/>
  <meta content="summary_large_image" name="twitter:card"/>
  <meta content="@MindorksNextGen" name="twitter:site"/>
  <meta content="In this blog, we will understand the new privacy-based location permission in Android Q and how to implement it in your app." name="description"/>
  <meta content="1620001391374687" property="fb:app_id"/>
  <link href="/styles/vendor-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link href="/styles/app-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link as="style" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" onload='this.onload=null,this.rel="stylesheet"' rel="preload"/>
  <noscript>
   <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
  </noscript>
  <script type="text/javascript">
     </script>
  <script async="" src="https://www.google-analytics.com/analytics.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-91686131-1","auto"),ga("require","cleanUrlTracker"),ga("require","eventTracker"),ga("require","impressionTracker"),ga("require","outboundLinkTracker"),ga("require","urlChangeTracker"),ga("require","maxScrollTracker"),ga("require","mediaQueryTracker"),ga("require","outboundFormTracker"),ga("require","outboundLinkTracker"),ga("require","pageVisibilityTracker"),ga("require","socialWidgetTracker"),ga("require","urlChangeTracker"),ga("send","pageview")
  </script>
  <script defer="defer" src="/assets/autotrack.js" type="text/javascript">
  </script>
  <script src="/assets/highlight.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/vendor-bundle-1.8.6.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/app-bundle-1.8.6.js" type="text/javascript">
  </script>
 </head>
 <body>
  <div id="root">
   <div class="screen app-load-content" data-reactroot="">
    <div class="ui centered grid">
     <div class="row" style="padding:0">
      <div class="ui fixed menu navbar huge borderless grid" style="background-color:#fff;height:60px">
      </div>
     </div>
     <div class="centered computer only row" style="padding:0">
      <div class="ui fixed top menu navbar huge borderless grid header-container" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="right menu">
        <a class="item" href="https://janisharali.com" target="_blank">
         Mentor Ali
        </a>
        <a class="item" href="https://amitshekhar.me" target="_blank">
         Mentor Amit
        </a>
       </div>
      </div>
     </div>
     <div class="tablet only mobile only row" style="padding:0">
      <div class="ui fixed top navbar huge menu borderless" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="item">
       </div>
      </div>
     </div>
    </div>
    <div class="header-height">
    </div>
    <div aria-live="assertive" class="redux-toastr">
     <div>
      <div class="top-left">
      </div>
      <div class="top-right">
      </div>
      <div class="top-center">
      </div>
      <div class="bottom-left">
      </div>
      <div class="bottom-right">
      </div>
      <div class="bottom-center">
      </div>
     </div>
    </div>
    <div class="content-container theme">
     <div class="ui centered one column grid" style="padding-bottom:80px;background-color:#fff">
      <div class="ten wide computer fifteen wide mobile fifteen wide tablet column" style="margin-top:50px">
       <div>
        <div class="blog-page-author">
         <div class="ui small header">
          <img alt="Admin MindOrks" class="ui circular image" src="https://s3.ap-south-1.amazonaws.com/mindorks/website/mindorks-admin.png"/>
          <div class="content">
           Admin MindOrks
           <div class="sub header" style="margin-top:5px">
            11th May 2019
           </div>
          </div>
         </div>
        </div>
        <div id="content">
         <article class="template">
          <div class="postContent">
           <div class="notesSource">
            <div class="postField postField--body" id="editor">
             <section class="section--first section--last">
              <div class="section-divider layoutSingleColumn-template">
               <hr class="section-divider"/>
              </div>
              <div class="section-content">
               <div class="section-inner layoutSingleColumn-template">
                <div>
                 <h1 class="graf--h1">
                  Understanding and Implementing Location Permission in Android Q
                 </h1>
                 <div class="graf-image graf-caption">
                  <img alt="Understanding and Implementing Permission in Android Q" class="graf-image" src="/images/location-permission.png"/>
                 </div>
                 <p class="graf--p">
                  With
                  <b class="graf--bold">
                   <i class="graf--italic">
                    Android Q
                   </i>
                  </b>
                  releasing in
                  <b class="graf--bold">
                   <i class="graf--italic">
                    Beta
                   </i>
                  </b>
                  , there are a lot of new things coming to the Android Eco-System with it.
                 </p>
                 <p class="graf--p">
                  Privacy was the main focus with the Andorid Q release and with better handling of permissions, Background use, UI etc. A new permission was also introduced
                  <b class="graf--bold">
                   <i class="graf--italic">
                    <a class="markup--anchor" href="https://developer.android.com/reference/android/Manifest.permission#ACTIVITY_RECOGNITION" target="_blank">
                     Activity Recognition
                    </a>
                   </i>
                  </b>
                  Permission.But, In this blog we will be specifically talking about
                  <b class="graf--bold">
                   <i class="graf--italic">
                    Location Permission in Android Q.
                   </i>
                  </b>
                 </p>
                 <h4 class="graf--h3">
                  <b class="graf--bold">
                   <i class="graf--italic">
                    History about Location Services :
                   </i>
                  </b>
                 </h4>
                 <p class="graf--p">
                  Location Services has evolved and has matured since the early days.At first we could use background services and take location updates "n" times a day but in coming years keeping privacy in focus  developer can only take updates a few time only.
                 </p>
                 <p class="graf--p">
                  Since Android Oreo, it was recommended to take location updates using Foreground Services as it had no limit like background services and user can also see the updates coming from the notification tray.
                 </p>
                 <p class="graf--p">
                  This can be done using adding
                  <b class="graf--bold">
                   <i class="graf--italic">
                    foregroundServiceType
                   </i>
                  </b>
                  in the manifest file,
                 </p>
                 <pre><code class="language-java graf graf--code">&lt;service
    android:name="ForegroundServiceName"
    android:foregroundServiceType="location"/&gt;</code></pre>
                 <p class="graf--p">
                  But, to make sure location works, we need to add
                  <b class="graf--bold">
                   <i class="graf--italic">
                    ACCESS_COARSE_LOCATION
                   </i>
                  </b>
                  in the project.
                 </p>
                 <h4 class="graf--h3">
                  <i class="graf--italic">
                   But in Android Q,
                  </i>
                 </h4>
                 <p class="graf--p">
                  The whole world changed for Location Services in Q. Now, user had a lot of control on what to give as permission and what not too. Also user can permit appto get location updates in background as well. Let's discuss the it in step by step,
                 </p>
                 <h4 class="graf--h3">
                  Step 01 :
                 </h4>
                 <pre><code class="language-java graf graf--code">&lt;manifest&gt;
  &lt;uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" /&gt;
  &lt;uses-permission android:name="android.permission.ACCESS_BACKGROUND_LOCATION" /&gt;
&lt;/manifest&gt;</code></pre>
                 <p class="graf--p">
                  Here, in the Manifest we don't need to specifically add the
                  <b class="graf--bold">
                   <i class="graf--italic">
                    foregroundServiceType
                   </i>
                  </b>
                  in manifest file.
                 </p>
                 <p class="graf--p">
                  Using
                  <b class="graf--bold">
                   Background Location
                  </b>
                  with
                  <b class="graf--bold">
                   Access Coarse Location
                  </b>
                  we can get 3 options for users to select from,
                 </p>
                 <ol>
                  <li>
                   Allow.
                  </li>
                  <li>
                   Allow when app in Use.
                  </li>
                  <li>
                   Deny.
                  </li>
                 </ol>
                 <h4 class="graf--h3">
                  Step 02 :
                 </h4>
                 <p class="graf--p">
                  in your build.gradle of your app,
                 </p>
                 <pre><code class="language-java graf graf--code">minSdkVersion 21
targetSdkVersion 'Q'
versionCode 1
versionName "1.0"</code></pre>
                 <p class="graf--p">
                  In the above code, you can see
                  <b class="graf--bold">
                   targetSdkVersion
                  </b>
                  has been set to
                  <b class="graf--bold">
                   Q
                  </b>
                 </p>
                 <h4 class="graf--h3">
                  <b class="graf--bold">
                   Step 03 :
                  </b>
                 </h4>
                 <p class="graf--p">
                  Let's ask the permission in Our Activity file,
                 </p>
                 <pre><code class="language-java graf graf--code">private fun requestPermission() {
    val hasForegroundPermission = ActivityCompat.checkSelfPermission(this,
        Manifest.permission.ACCESS_COARSE_LOCATION) == PackageManager.PERMISSION_GRANTED

    if (hasForegroundPermission) {
        val hasBackgroundPermission = ActivityCompat.checkSelfPermission(this,
            Manifest.permission.ACCESS_BACKGROUND_LOCATION) == PackageManager.PERMISSION_GRANTED
        if (hasBackgroundPermission) {
            // do your work here
        } else {
            ActivityCompat.requestPermissions(this,
                arrayOf(Manifest.permission.ACCESS_BACKGROUND_LOCATION), REQUEST_CODE_BACKGROUND)
        }
    } else {
        ActivityCompat.requestPermissions(this,
            arrayOf(Manifest.permission.ACCESS_COARSE_LOCATION,
                Manifest.permission.ACCESS_BACKGROUND_LOCATION), REQUEST_CODE_BACKGROUND)
    }
}</code></pre>
                 <p class="graf--p">
                  Here , in the above code we can only permit the background location if and only the foreground location is pemitted.
                 </p>
                 <p class="graf--p">
                  Now, lets run the app and we will see the following pop-up with a new re-design of material component
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Understanding and Implementing Permission in Android Q" class="graf-image" src="/images/without.png"/>
                 </div>
                 <p class="graf--p">
                  and if we click
                  <b class="graf--bold">
                   <i class="graf--italic">
                    Deny
                   </i>
                  </b>
                  here,
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Understanding and Implementing Permission in Android Q" class="graf-image" src="/images/with.png"/>
                 </div>
                 <p class="graf--p">
                  To read more about the Permissions in Andorid Q,
                  <b class="graf--bold">
                   <i class="graf--italic">
                    <a class="markup--anchor" href="https://developer.android.com/preview/privacy/permissions" target="_blank">
                     Click here
                    </a>
                    .
                   </i>
                  </b>
                 </p>
                </div>
               </div>
              </div>
             </section>
            </div>
           </div>
          </div>
         </article>
        </div>
       </div>
       <div class="ui divider">
       </div>
      </div>
      <div class="stretched fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui large center aligned header" style="padding-top:20px">
        Recommended for You
       </div>
      </div>
      <div class="fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui centered grid">
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/what-are-the-different-protection-levels-in-android-permission/">
          <img alt="What are the different protection levels in Android Permission?" class="ui centered image" src="/images/different-protection-levels-in-permissions-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            What are the different protection levels in Android Permission?
           </div>
           <div class="meta">
            24th July 2019
           </div>
           <div class="description">
            In this blog, we will learn different protection levels in permission in Android application. There are three protection levels i.e. Normal, Signature and Dangerous. We will learn about all these permissions.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/implementing-easy-permissions-in-android-android-tutorial/">
          <img alt="Implementing Easy Permissions in Android: Android Tutorial" class="ui centered image" src="/images/implementing-easy-permissions-android-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Implementing Easy Permissions in Android: Android Tutorial
           </div>
           <div class="meta">
            13th June 2019
           </div>
           <div class="description">
            In this blog, we will learn how to implement Easy Permissions in Android. Easy Permissions are used to ask for permissions required by the application explicitly. These are used to ask users for permissions that are dangerous in nature and involves user privacy.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/implementing-in-app-updates-on-android/">
          <img alt="Implementing in-app updates on Android" class="ui centered image" src="/images/in-app-updates-android-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Implementing in-app updates on Android
           </div>
           <div class="meta">
            25th May 2019
           </div>
           <div class="description">
            In this blog, we will learn about the in-app update feature in your Android app. In-app update is a feature that is used to download the update of the app without using the play store. We will see how to use the flexible and immediate in-app update in our app.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/implementing-android-slice/">
          <img alt="Implementing Android Slice" class="ui centered image" src="/images/android-slice.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Implementing Android Slice
           </div>
           <div class="meta">
            5th June 2019
           </div>
           <div class="description">
            In this blog, you will learn about Android Slice and how to implement it. We have learned a basic way to implement a slice and how to work with it.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/implementing-bubbles-in-android/">
          <img alt="Implementing Bubbles in Android" class="ui centered image" src="/images/implementing-bubbles-in-android-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Implementing Bubbles in Android
           </div>
           <div class="meta">
            8th June 2019
           </div>
           <div class="description">
            In this blog, we will learn how to use Bubbles in Android. Bubbles are a new feature introduced in the Beta version of Android Q. These are used to display notifications of any application over some other application and you can launch any activity by using these Bubbles, something like Facebook Messenger's app.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/implementing-preferences-settings-screen-in-android/">
          <img alt="Implementing Preferences Settings Screen in Android" class="ui centered image" src="/images/implementing-preferences-settings-in-android-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Implementing Preferences Settings Screen in Android
           </div>
           <div class="meta">
            9th June 2019
           </div>
           <div class="description">
            In this blog, we will learn how to implement the Preferences Settings Screen in Android. Settings screen are used to change the functionality and behavior of a particular application without changing the system settings. For example, you can change the background of a particular application by using the Settings feature.
           </div>
          </div>
         </a>
        </div>
       </div>
      </div>
     </div>
    </div>
    <div style="background:#fff">
     <footer class="content-container">
      <div class="ui centered padded grid" style="padding-top:40px;background:linear-gradient(to right,#c4e0e0,#e5f1f1)">
       <h2 class="ui huge icon center aligned header">
        <div class="content">
         Connect With Your Mentors
        </div>
       </h2>
       <div class="centered row">
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Janishar Ali" class="ui medium circular image" src="/assets/ali.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://janisharali.com" target="_blank">
             Janishar Ali
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://janisharali.com" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/janisharali" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Amit Shekhar" class="ui medium circular image" src="/assets/amit.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://amitshekhar.me" target="_blank">
             Amit Shekhar
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://amitshekhar.me" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/amitiitbhu" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
      <div class="ui divider" style="margin:unset">
      </div>
      <h5 class="ui header" style="padding:16px;margin:unset;color:#555">
       <i aria-hidden="true" class="copyright icon">
       </i>
       <div class="content">
        Copyright 2022, MindOrks Nextgen Private Limited
       </div>
      </h5>
     </footer>
    </div>
   </div>
  </div>
  <script type="text/javascript">
   window.hljs.initHighlightingOnLoad()
  </script>
 </body>
</html>