<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>
   Kotlin Koin - Android Tutorial for Beginners - Step By Step Guide
  </title>
  <meta charset="utf-8"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="minimum-scale=1,initial-scale=1,width=device-width,shrink-to-fit=no" name="viewport"/>
  <link href="https://blog.mindorks.com/kotlin-koin-tutorial" rel="canonical"/>
  <meta content="986249072156-dabps0lf90smluddrk5rkqsdjghk3hd3.apps.googleusercontent.com" name="google-signin-client_id"/>
  <meta content="android, learn android app development, android app development courses, android blogs, android tutorial" name="keywords"/>
  <meta content="Kotlin Koin - Android Tutorial for Beginners - Step By Step Guide" property="og:title"/>
  <meta content="website" property="og:type"/>
  <meta content="https://blog.mindorks.com/kotlin-koin-tutorial" property="og:url"/>
  <meta content="/images/banner-koin-44892f0b66a4ee73.png" property="og:image"/>
  <meta content="In this blog, we are going to learn about Koin by implementing it in a project. We will learn step by step implementation of Koin and its usage.
" property="og:description"/>
  <meta content="Kotlin Koin - Android Tutorial for Beginners - Step By Step Guide" property="twitter:title"/>
  <meta content="In this blog, we are going to learn about Koin by implementing it in a project. We will learn step by step implementation of Koin and its usage.
" name="twitter:description"/>
  <meta content="/images/banner-koin-44892f0b66a4ee73.png" name="twitter:image:src"/>
  <meta content="summary_large_image" name="twitter:card"/>
  <meta content="@MindorksNextGen" name="twitter:site"/>
  <meta content="In this blog, we are going to learn about Koin by implementing it in a project. We will learn step by step implementation of Koin and its usage.
" name="description"/>
  <meta content="1620001391374687" property="fb:app_id"/>
  <link href="/styles/vendor-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link href="/styles/app-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link as="style" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" onload='this.onload=null,this.rel="stylesheet"' rel="preload"/>
  <noscript>
   <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
  </noscript>
  <script type="text/javascript">
   window.__PRELOADED_STATE__={toastr:{toastrs:[],confirm:null},blogData:{data:{},latestBlogs:null,isFetching:!0,isFetchingLatestBlogs:!1,currentCategory:"",categories:[]},contactData:{formData:{email:"",name:"",phone:"",message:"",isWriting:!1,isNameError:!1,isEmailError:!1,isPhoneError:!1,isMessageError:!1,dismissMsg:!1},successMessage:null,errorMessage:null,isSending:!1},communityData:{formData:{email:"",isEmailError:!1,isWriting:!1,isSending:!1,dismissMsg:!1},successMessage:null,errorMessage:null},blogPageData:{blogId:488,data:{id:488,title:"Kotlin Koin - Android Tutorial for Beginners - Step By Step Guide",description:"In this blog, we are going to learn about Koin by implementing it in a project. We will learn step by step implementation of Koin and its usage.\n",text:'<h1 class="graf--h1">Kotlin Koin - Android Tutorial for Beginners - Step By Step Guide</h1> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/banner-koin-44892f0b66a4ee73.png class=\'graf-image\' alt=\'Kotlin Koin - Android Tutorial for Beginners - Step By Step Guide\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">We have been using the Dependency Injection framework quite a few times like Dagger in our project.</p><p class="graf--p">In this blog, we are going to learn about Koin, a new dependency injection framework for Android Developers.<a class="markup--anchor" target="_blank" href="https://blog.mindorks.com/why-do-we-use-the-dependency-injection-framework-in-android"> If you are not familiar with why we need a dependency injection framework in our project, click here</a>.</p><p class="graf--p"> We are going to discuss,</p><ul><li>What is Koin?</li><li>Understanding terminologies in Koin</li><li>Setting up your project</li><li>Project Structure</li><li>Integrating Koin</li></ul><h4 class="graf--h3">What is Koin?</h4><p class="graf--p">Koin is a DI framework for Kotlin developers, completely written in Kotin.</p><p class="graf--p">It is very light weighted. It supports the Kotlin DSL feature. It is one of the easy DI frameworks which doesn&#x27;t require a steep learning curve to get hold of it.</p><h4 class="graf--h3">Understanding Terminologies in Koin</h4><p class="graf--p">While working with Koin, there are few terminologies we need to understand before getting started.</p><ul><li><b class="graf--bold">module</b> - it creates a module in Koin which would be used by Koin to provide all the dependencies.</li><li><b class="graf--bold">single</b> - it creates a singleton that can be used across the app as a singular instance.</li><li><b class="graf--bold">factory</b> - it provides a bean definition, which will create a new instance each time it is injected.</li><li><b class="graf--bold">get()</b> - it is used in the constructor of a class to provide the required dependency.</li></ul><h4 class="graf--h3">Setting up your project</h4><p class="graf--p">Here, we are going to set up the Android Project.</p><p class="graf--p"><b class="graf--bold">Create a Project</b></p><ul><li>Start a new Android Studio Project</li><li>Select Empty Activity and Next</li><li>Name: Koin-Tutorial</li><li>Package name: com.mindorks.framework.mvvm</li><li>Language: Kotlin</li><li>Finish</li><li>Your starting project is ready now</li></ul><p class="graf--p"><b class="graf--bold">Add dependencies</b></p><p class="graf--p">Add the following dependencies in the app&#x27;s build.gradle file,</p><pre><code class="language-java graf graf--code">implementation "androidx.recyclerview:recyclerview:{latest-version}"\nimplementation \'android.arch.lifecycle:extensions:{latest-version}\'\nimplementation \'com.github.bumptech.glide:glide:{latest-version}\'\nimplementation \'androidx.activity:activity-ktx:{latest-version}\'</code></pre><p class="graf--p">Now our project is ready with dependencies.</p><p class="graf--p"><a class="markup--anchor" target="_blank" href="https://github.com/MindorksOpenSource/Koin-Tutorial">You can find the complete project here.</a></p><h4 class="graf--h3">Project Structure</h4><p class="graf--p">For the project, we are going to follow a basic version of MVVM. Our package in the project will look like below:</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/dagger-hilt-project-structure-16f36cc05b0cfdd4.png class=\'graf-image\' alt=\'Kotlin Koin - Android Tutorial for Beginners - Step By Step Guide\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">We need the enum to represent the UI State. We will create that in the utils package.</p><pre><code class="language-java graf graf--code">enum class Status {\n    SUCCESS,\n    ERROR,\n    LOADING\n}</code></pre><p class="graf--p">We need a utility class that will be responsible to communicate the current state of Network Call to the UI Layer. We are naming that as Resource. So, create a Kotlin data class Resource inside the same utils package and add the following code.</p><pre><code class="language-java graf graf--code">data class Resource&lt;out T&gt;(val status: Status, val data: T?, val message: String?) {\n\n    companion object {\n\n        fun &lt;T&gt; success(data: T?): Resource&lt;T&gt; {\n            return Resource(Status.SUCCESS, data, null)\n        }\n\n        fun &lt;T&gt; error(msg: String, data: T?): Resource&lt;T&gt; {\n            return Resource(Status.ERROR, data, msg)\n        }\n\n        fun &lt;T&gt; loading(data: T?): Resource&lt;T&gt; {\n            return Resource(Status.LOADING, data, null)\n        }\n\n    }\n\n}</code></pre><p class="graf--p">Our utils package is ready now.</p><h4 class="graf--h3">Integrating Koin</h4><p class="graf--p">To setup Koin in your project, we would add the following in your app&#x27;s build.gradle,</p><pre><code class="language-java graf graf--code">//koin\nimplementation "org.koin:koin-android-viewmodel:{latest-version}"\nimplementation "org.koin:koin-android:{latest-version}"</code></pre><p class="graf--p">This is the only required setup we need to do to get started with Koin.</p><p class="graf--p">Now, let&#x27;s break the further tasks in steps.</p><p class="graf--p"><b class="graf--bold">Step 01.</b></p><p class="graf--p">We will first create our Application class App like,</p><pre><code class="language-java graf graf--code">class App : Application()</code></pre><p class="graf--p">and we will update the Manifest file like,</p><pre><code class="language-java graf graf--code">android:name=".App"</code></pre><p class="graf--p"><b class="graf--bold">Step 02.</b></p><p class="graf--p">Now, we will add the dependencies for Retrofit and <span class=""><a class="markup--anchor" target="_blank" href="https://amitshekhar.me/blog/kotlin-coroutines">Kotlin-Coroutines</a></span> in the app&#x27;s build.gradle like,</p><pre><code class="language-java graf graf--code">// Networking\nimplementation "com.squareup.retrofit2:retrofit:{latest-version}"\nimplementation "com.squareup.retrofit2:converter-moshi:{latest-version}"\nimplementation "com.squareup.okhttp3:okhttp:{latest-version}"\nimplementation "com.squareup.okhttp3:logging-interceptor:{latest-version}"\n\n// Coroutine\nimplementation "org.jetbrains.kotlinx:kotlinx-coroutines-android:{latest-version}"\nimplementation "org.jetbrains.kotlinx:kotlinx-coroutines-core:{latest-version}"</code></pre><p class="graf--p">Now, in the project what we will do is, we will do an API call and show a list of users.</p><p class="graf--p">We will also use Kotlin-Coroutine for multithreading. Now, we will create <b class="graf--bold">api</b>, <b class="graf--bold">model</b>, <b class="graf--bold">repository</b> packages inside the data layer. It will have files like,</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/sameple-ping-fb7ae59f52e75f47.png class=\'graf-image\' alt=\'Kotlin Koin - Android Tutorial for Beginners - Step By Step Guide\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">Then, ApiService looks like,</p><pre><code class="language-java graf graf--code">interface ApiService {\n\n    @GET("users")\n    suspend fun getUsers(): Response&lt;List&lt;User&gt;&gt;\n\n}</code></pre><p class="graf--p">ApiHelper looks like,</p><pre><code class="language-java graf graf--code">interface ApiHelper {\n\n    suspend fun getUsers(): Response&lt;List&lt;User&gt;&gt;\n}</code></pre><p class="graf--p">And finally, the ApiHelperImpl looks like,</p><pre><code class="language-java graf graf--code">class ApiHelperImpl(private val apiService: ApiService) : ApiHelper {\n\n    override suspend fun getUsers(): Response&lt;List&lt;User&gt;&gt; = apiService.getUsers()\n\n}</code></pre><p class="graf--p">Also, for <b class="graf--bold">BASE_URL</b>, we will add the following in the <code class="graf--code-inline">defaultConfig</code> block in the app&#x27;s build.gradle file,</p><pre><code class="language-java graf graf--code">buildConfigField \'String\', \'BASE_URL\', "\\"https://5e510330f2c0d300147c034c.mockapi.io/\\""</code></pre><p class="graf--p">The User data class looks like,</p><pre><code class="language-java graf graf--code">data class User(\n    @Json(name = "id")\n    val id: Int = 0,\n    @Json(name = "name")\n    val name: String = "",\n    @Json(name = "email")\n    val email: String = "",\n    @Json(name = "avatar")\n    val avatar: String = ""\n)</code></pre><p class="graf--p">Now, inside the MainRepository, we will update the code like,</p><pre><code class="language-java graf graf--code">class MainRepository (private val apiHelper: ApiHelper) {\n\n    suspend fun getUsers() =  apiHelper.getUsers()\n\n}</code></pre><p class="graf--p">Now, we are done setting up the data layer, and let&#x27;s move to the DI part of the project.</p><p class="graf--p"><b class="graf--bold">Step 03.</b></p><p class="graf--p">Now, we will create a package <b class="graf--bold">di -&gt; module</b> and inside it, we will create AppModule, ViewModelModule, and RepositoryModule. </p><p class="graf--p">Inside AppModule first, we will create the functions we want to provide as dependencies. We will update the file like,</p><pre><code class="language-java graf graf--code">private fun provideNetworkHelper(context: Context) = NetworkHelper(context)\n\nprivate fun provideOkHttpClient() = if (BuildConfig.DEBUG) {\n    val loggingInterceptor = HttpLoggingInterceptor()\n    loggingInterceptor.setLevel(HttpLoggingInterceptor.Level.BODY)\n    OkHttpClient.Builder()\n        .addInterceptor(loggingInterceptor)\n        .build()\n} else OkHttpClient\n    .Builder()\n    .build()\n\nprivate fun provideRetrofit(\n    okHttpClient: OkHttpClient,\n    BASE_URL: String\n): Retrofit =\n    Retrofit.Builder()\n        .addConverterFactory(MoshiConverterFactory.create())\n        .baseUrl(BASE_URL)\n        .client(okHttpClient)\n        .build()\n\nprivate fun provideApiService(retrofit: Retrofit): ApiService = retrofit.create(ApiService::class.java)\n\nprivate fun provideApiHelper(apiHelper: ApiHelperImpl): ApiHelper = apiHelper</code></pre><p class="graf--p">Now, to create the file as a supported module for Koin, we will pass the functions as singleton instance to the module. The module is a collection of dependencies we are going to provide to the application. We will create a variable like,</p><pre><code class="language-java graf graf--code">val appModule = module {\n   \n}</code></pre><p class="graf--p">and inside the module, we will pass the single instance of all the functions we created like,</p><pre><code class="language-java graf graf--code">val appModule = module {\n    single { provideOkHttpClient() }\n    single { provideRetrofit(get(), BuildConfig.BASE_URL) }\n    single { provideApiService(get()) }\n    single { provideNetworkHelper(androidContext()) }\n}</code></pre><p class="graf--p">Here, to provide the dependency as a singleton instance we use <b class="graf--bold">single{}</b> and inside it, we will pass the function which will return the dependency as an instance to be used across the app.</p><p class="graf--p">We are using <b class="graf--bold">get()</b> here to pass the dependency to the constructor. Using get it will only provide the constructor whose instance is already been provided by Koin.</p><p class="graf--p"><b class="graf--bold">Step 04.</b></p><p class="graf--p">Now, let&#x27;s update the RepositoryModule. Here, we will provide the MainRepository instance by,</p><pre><code class="language-java graf graf--code">val repoModule = module {\n    single {\n        MainRepository(get())\n    }\n}</code></pre><p class="graf--p">Here, MainRepository requires ApiHelper in the constructor which will be provided by the Koin here.</p><p class="graf--p">And for ApiHelper, we would need the ApiHelperImpl part to be provided which is the extension for ApiHelper. Now, to pass the ApiHelper as a param, we need to provide it as well from the module.</p><p class="graf--p">To provide the ApiHelperImpl in the module, we will update the code and create a single instance like,</p><pre><code class="language-java graf graf--code">single&lt;ApiHelper&gt; {\n    return@single ApiHelperImpl(get())\n}</code></pre><p class="graf--p">Here, we are providing a type if ApiHelper, and returning ApiHelperImpl and in ApiHelperImpl it takes ApiService as a constructor parameter which we are already providing from provideApiService function.</p><p class="graf--p"><b class="graf--bold">Step 05.</b></p><p class="graf--p">Now, we are going to use a MainViewModel for updating the UI. To provide dependencies in ViewModel we will update the ViewModelModule like,</p><pre><code class="language-java graf graf--code">val viewModelModule = module {\n    viewModel {\n        MainViewModel(get(),get())\n    }\n}</code></pre><p class="graf--p">Here, you can see we are not using single, and in place of that we are using viewModel and inside it, we resolve the dependencies which we are providing from appModule.</p><p class="graf--p">Now, we are done providing the dependencies. Let us start now by injecting the dependencies.</p><p class="graf--p"><b class="graf--bold">Step 06.</b></p><p class="graf--p">Now, let&#x27;s start designing our ViewModel. We will update the ViewModel like,</p><pre><code class="language-java graf graf--code">class MainViewModel(\n    private val mainRepository: MainRepository,\n    private val networkHelper: NetworkHelper\n) : ViewModel() {\n\n    private val _users = MutableLiveData&lt;Resource&lt;List&lt;User&gt;&gt;&gt;()\n    val users: LiveData&lt;Resource&lt;List&lt;User&gt;&gt;&gt;\n        get() = _users\n\n    init {\n        fetchUsers()\n    }\n\n    private fun fetchUsers() {\n        viewModelScope.launch {\n            _users.postValue(Resource.loading(null))\n            if (networkHelper.isNetworkConnected()) {\n                mainRepository.getUsers().let {\n                    if (it.isSuccessful) {\n                        _users.postValue(Resource.success(it.body()))\n                    } else _users.postValue(Resource.error(it.errorBody().toString(), null))\n                }\n            } else _users.postValue(Resource.error("No internet connection", null))\n        }\n    }\n}</code></pre><p class="graf--p">Here, we are passing MainRepository and NetworkHelper in the constructor of the ViewModel.</p><p class="graf--p">Here, we are fetching the users in the init block and inside the viewModelScope, we will check for internet connectivity and if the connectivity is ok then we go through the API call or else we set the value to LiveData with an error. This user LiveData is then observed in the MainActivity to display the items in the recyclerView.</p><p class="graf--p">NetworkHelper looks like,</p><pre><code class="language-java graf graf--code">class NetworkHelper constructor(private val context: Context) {\n\n    fun isNetworkConnected(): Boolean {\n        var result = false\n        val connectivityManager =\n            context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            val networkCapabilities = connectivityManager.activeNetwork ?: return false\n            val activeNetwork =\n                connectivityManager.getNetworkCapabilities(networkCapabilities) ?: return false\n            result = when {\n                activeNetwork.hasTransport(NetworkCapabilities.TRANSPORT_WIFI) -&gt; true\n                activeNetwork.hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR) -&gt; true\n                activeNetwork.hasTransport(NetworkCapabilities.TRANSPORT_ETHERNET) -&gt; true\n                else -&gt; false\n            }\n        } else {\n            connectivityManager.run {\n                connectivityManager.activeNetworkInfo?.run {\n                    result = when (type) {\n                        ConnectivityManager.TYPE_WIFI -&gt; true\n                        ConnectivityManager.TYPE_MOBILE -&gt; true\n                        ConnectivityManager.TYPE_ETHERNET -&gt; true\n                        else -&gt; false\n                    }\n\n                }\n            }\n        }\n\n        return result\n    }\n}</code></pre><p class="graf--p"><b class="graf--bold">Step 07.</b></p><p class="graf--p">Now, we need to create the instance of ViewModel in the MainActivity so the values passed in the constructor of the ViewModel are passed to it.</p><p class="graf--p">To pass the instance of ViewModel we will create a variable called mainViewModel like,</p><pre><code class="language-java graf graf--code">private val mainViewModel : MainViewModel by viewModel()</code></pre><p class="graf--p">Here,<b class="graf--bold"> by viewModel() </b>creates the instance for the ViewModel and it will also resolve the dependency required by it.</p><blockquote class="graf--blockquote">If we want to pass any dependency required by any class like Activity we use <b class="graf--bold">by inject() </b>also known as field injection.</blockquote><p class="graf--p">Now, the MainActivity looks like,</p><pre><code class="language-java graf graf--code">class MainActivity : AppCompatActivity() {\n\n    private val mainViewModel : MainViewModel by viewModel()\n    private lateinit var adapter: MainAdapter\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        setupUI()\n        setupObserver()\n\n    }\n\n    private fun setupUI() {\n        recyclerView.layoutManager = LinearLayoutManager(this)\n        adapter = MainAdapter(arrayListOf())\n        recyclerView.addItemDecoration(\n            DividerItemDecoration(\n                recyclerView.context,\n                (recyclerView.layoutManager as LinearLayoutManager).orientation\n            )\n        )\n        recyclerView.adapter = adapter\n    }\n\n    private fun setupObserver() {\n        mainViewModel.users.observe(this, Observer {\n            when (it.status) {\n                Status.SUCCESS -&gt; {\n                    progressBar.visibility = View.GONE\n                    it.data?.let { users -&gt; renderList(users) }\n                    recyclerView.visibility = View.VISIBLE\n                }\n                Status.LOADING -&gt; {\n                    progressBar.visibility = View.VISIBLE\n                    recyclerView.visibility = View.GONE\n                }\n                Status.ERROR -&gt; {\n                    //Handle Error\n                    progressBar.visibility = View.GONE\n                    Toast.makeText(this, it.message, Toast.LENGTH_LONG).show()\n                }\n            }\n        })\n    }\n\n    private fun renderList(users: List&lt;User&gt;) {\n        adapter.addData(users)\n        adapter.notifyDataSetChanged()\n    }\n}</code></pre><p class="graf--p">and the MainAdapter looks like,</p><pre><code class="language-java graf graf--code">class MainAdapter(\n    private val users: ArrayList&lt;User&gt;\n) : RecyclerView.Adapter&lt;MainAdapter.DataViewHolder&gt;() {\n\n    class DataViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {\n        fun bind(user: User) {\n            itemView.textViewUserName.text = user.name\n            itemView.textViewUserEmail.text = user.email\n            Glide.with(itemView.imageViewAvatar.context)\n                .load(user.avatar)\n                .into(itemView.imageViewAvatar)\n        }\n    }\n\n    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int) =\n        DataViewHolder(\n            LayoutInflater.from(parent.context).inflate(\n                R.layout.item_layout, parent,\n                false\n            )\n        )\n\n    override fun getItemCount(): Int = users.size\n\n    override fun onBindViewHolder(holder: DataViewHolder, position: Int) =\n        holder.bind(users[position])\n\n    fun addData(list: List&lt;User&gt;) {\n        users.addAll(list)\n    }\n}</code></pre><p class="graf--p">Now, we are almost done with setting up the project.</p><p class="graf--p"><b class="graf--bold">Step 08.</b></p><p class="graf--p">To run the app successfully, we will add the required permissions like,</p><pre><code class="language-java graf graf--code">&lt;uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /&gt;\n&lt;uses-permission android:name="android.permission.INTERNET" /&gt;</code></pre><p class="graf--p">and to initialize Koin in the project we will update the onCreate() of the application like,</p><pre><code class="language-java graf graf--code">override fun onCreate() {\n    super.onCreate()\n    startKoin {\n        androidContext(this@App)\n        modules(listOf(appModule, repoModule, viewModelModule))\n    }\n}</code></pre><p class="graf--p">Here, we are passing the androidContext to the Koin container which you can see we are using it in the appModule while providing the NetworkHelper class.</p><p class="graf--p">We are also passing all the modules which we created in the di/modules package.</p><p class="graf--p">Now, we are done with the project and if you run the project, you would see the list of users being populated in the recyclerView.</p><p class="graf--p"><a class="markup--anchor" target="_blank" href="https://github.com/MindorksOpenSource/Koin-Tutorial">You can find the complete project here.</a></p><p class="graf--p">That&#x27;s all about the implementation of Koin in the Android Project.</p><p class="graf--p">Happy learning.</p><p class="graf--p"><b class="graf--bold">Team MindOrks :)</b></p>',author:9959,img_url:"/images/banner-koin-44892f0b66a4ee73.png",blog_url:"kotlin-koin-tutorial",likes:0,rank:0,category:1,published_at:"22nd June 2020"},author:{id:9959,name:"Himanshu Singh",google_profile_pic:"https://lh3.googleusercontent.com/a-/AOh14Ghy8H-FJrgWB2TcxHCOKWxWEQB4AiklYADGTydu4nE=s96-c?sz=300",fb_profile_pic:null,profile_tagline:null,fb_profile_url:"https://www.facebook.com/scorpiey",google_plus_profile_url:null,twitter_profile_url:"https://twitter.com/hi_man_shoe",github_profile_url:"https://github.com/hi-manshu",linkedin_profile_url:"https://www.linkedin.com/in/himanshoe-singh/"},isFetching:!1,similarBlogs:[{id:358,title:"Java Tutorial For Beginners - Learn Java From Basics",description:"In this blog, we will learn how to get started with Java from basics. ",author:9959,img_url:"/images/java-basics.png",blog_url:"java-tutorial-for-beginners-learn-java-from-basics",likes:0,rank:0,category:1,published_at:"8th October 2019",score:3.6215922832489014},{id:420,title:"Using WebViews in Flutter: Tutorial",description:"In this blog, we will learn how to use WebViews in Flutter. WebViews are very important to open some web pages inside your application.",author:17146,img_url:"/images/using-webviews-in-flutter-tutorial-banner.jpg",blog_url:"using-webviews-in-flutter-tutorial",likes:0,rank:0,category:9,published_at:"20th April 2020",score:.8256809115409851},{id:22,title:"Learn Kotlin —  apply vs with\n",description:"There are many great features available in Kotlin, we can take advantage of all these features to write the better application in Kotlin. Among all those features, apply and with are important feature. We must know when to use which one.",author:14897,img_url:"https://s3.ap-south-1.amazonaws.com/mindorks/blogs/learn-kotlin%E2%80%8A%E2%80%94%E2%80%8Aapply-vs-with.png",blog_url:"learn-kotlin-apply-vs-with",likes:1,rank:0,category:1,published_at:"22nd May 2017",score:.1476835161447525},{id:24,title:"Learn Kotlin - Data Class",description:"We frequently create a class to do nothing but hold data. In such a class some standard functionality is often mechanically derivable from the data. In Kotlin, this is called a data class and is marked as data.",author:14897,img_url:"https://s3.ap-south-1.amazonaws.com/mindorks/blogs/learn-kotlin-data-class.png",blog_url:"learn-kotlin-data-class",likes:1,rank:0,category:1,published_at:"22nd May 2017",score:.1476835161447525},{id:25,title:"Learn Kotlin- Destructuring Declarations",description:"Destructuring is a convenient way of extracting multiple values from data stored in (possibly nested) objects and Arrays. It can be used in locations that receive data (such as the left-hand side of an assignment).",author:14897,img_url:"https://s3.ap-south-1.amazonaws.com/mindorks/blogs/learn-kotlin-destructuring-declarations.png",blog_url:"learn-kotlin-destructuring-declarations",likes:1,rank:0,category:1,published_at:"22nd May 2017",score:.1476835161447525},{id:62,title:"Learn Kotlin — Extension Functions",description:"As the name implies, the extension functions are the functions that help us to extend the functionality of classes without having to touch their code.",author:14897,img_url:"https://s3.ap-south-1.amazonaws.com/mindorks/blogs/learn-kotlin%E2%80%8A-extension-functions.png",blog_url:"learn-kotlin-extension-functions",likes:1,rank:0,category:1,published_at:"30th May 2017",score:.1476835161447525}],isSimilarBlogsFetching:!1},loginData:{data:null,isLoggingIn:!1,isLoggingOut:!1,loginState:!1,isForcedLogout:!1,isTokenRefreshed:!1,isRedirectHome:!1,message:""},updatesData:{news:null,inspirations:null,isNewsFetching:!0,isInspirationsFetching:!0},blogEditorData:{blogId:null,blogDetailsFormData:{title:"",description:"",imgUrl:"",blogUrl:"",category:"",categories:[],isWriting:!1,isTitleError:!1,isDescriptionError:!1,isImgUrlError:!1,isBlogUrlError:!1,isCategoryError:!1,isUploadingImage:!1,uploadedImageUrl:null},editorState:null,editorText:null,successMessage:null,errorMessage:null,isSending:!1,isMsgToShow:!1,isPublished:!1,isSubmitted:!1,isDraft:!0,isEditOfExistingBlog:!1,isFetchingBlogCategories:!1,isUploadingImage:!1,uploadedImageUrl:null},myBlogsData:{data:null,isSubmittedBlogsFetching:!0,isDraftBlogsFetching:!0,isPublishedBlogsFetching:!0,successMessage:null,errorMessage:null,isMsgToShow:!1,tabNames:["drafts","submissions","published"],selectedTab:"drafts",isFetchingBlog:!1,isDeletingBlog:!1,openEditorPage:!1},profilePreviewData:{profile:null,blogs:null,isFetchingProfile:!1,isFetchingAuthorBlogs:!1,successMessage:null,errorMessage:null,isMsgToShow:!1,isUserNotRegistered:!1,redirectToMyProfileEdit:!1},profileEditableData:{userId:null,name:null,fbProfilePicUrl:null,googleProfilePicUrl:null,profileFormData:{tagline:"",fbProfileUrl:"",googlePlusProfileUrl:"",twitterProfileUrl:"",githubProfileUrl:"",linkedinProfileUrl:"",isWriting:!1,isTaglineError:!1,isFbProfileUrlError:!1,isGooglePlusProfileUrlError:!1,isTwitterProfileUrlError:!1,isGithubProfileUrlError:!1,isLinkedinProfileUrlError:!1},isSavingProfile:!1,successMessage:null,errorMessage:null,isMsgToShow:!1,redirectToProfilePreview:!1},submitBlogData:{formData:{email:"",name:"",link:"",isWriting:!1,isNameError:!1,isEmailError:!1,isLinkError:!1,dismissMsg:!1},successMessage:null,errorMessage:null,isSubmitting:!1},advertisementsData:{data:{},isLoading:!1},recaptchaData:{verified:!1,successMessage:null,errorMessage:null},blogSearchData:{searches:null,isSearching:!1}}
  </script>
  <script async="" src="https://www.google-analytics.com/analytics.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-91686131-1","auto"),ga("require","cleanUrlTracker"),ga("require","eventTracker"),ga("require","impressionTracker"),ga("require","outboundLinkTracker"),ga("require","urlChangeTracker"),ga("require","maxScrollTracker"),ga("require","mediaQueryTracker"),ga("require","outboundFormTracker"),ga("require","outboundLinkTracker"),ga("require","pageVisibilityTracker"),ga("require","socialWidgetTracker"),ga("require","urlChangeTracker"),ga("send","pageview")
  </script>
  <script defer="defer" src="/assets/autotrack.js" type="text/javascript">
  </script>
  <script src="/assets/highlight.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/vendor-bundle-1.8.6.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/app-bundle-1.8.6.js" type="text/javascript">
  </script>
 </head>
 <body>
  <div id="root">
   <div class="screen app-load-content" data-reactroot="">
    <div class="ui centered grid">
     <div class="row" style="padding:0">
      <div class="ui fixed menu navbar huge borderless grid" style="background-color:#fff;height:60px">
      </div>
     </div>
     <div class="centered computer only row" style="padding:0">
      <div class="ui fixed top menu navbar huge borderless grid header-container" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="right menu">
        <a class="item" href="https://janisharali.com" target="_blank">
         Mentor Ali
        </a>
        <a class="item" href="https://amitshekhar.me" target="_blank">
         Mentor Amit
        </a>
       </div>
      </div>
     </div>
     <div class="tablet only mobile only row" style="padding:0">
      <div class="ui fixed top navbar huge menu borderless" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="item">
       </div>
      </div>
     </div>
    </div>
    <div class="header-height">
    </div>
    <div aria-live="assertive" class="redux-toastr">
     <div>
      <div class="top-left">
      </div>
      <div class="top-right">
      </div>
      <div class="top-center">
      </div>
      <div class="bottom-left">
      </div>
      <div class="bottom-right">
      </div>
      <div class="bottom-center">
      </div>
     </div>
    </div>
    <div class="content-container theme">
     <div class="ui centered one column grid" style="padding-bottom:80px;background-color:#fff">
      <div class="ten wide computer fifteen wide mobile fifteen wide tablet column" style="margin-top:50px">
       <div>
        <div class="blog-page-author">
         <div class="ui small header">
          <img alt="Himanshu Singh" class="ui circular image" src="https://lh3.googleusercontent.com/a-/AOh14Ghy8H-FJrgWB2TcxHCOKWxWEQB4AiklYADGTydu4nE=s96-c?sz=300"/>
          <div class="content">
           Himanshu Singh
           <div class="sub header" style="margin-top:5px">
            22nd June 2020
           </div>
          </div>
         </div>
        </div>
        <div id="content">
         <article class="template">
          <div class="postContent">
           <div class="notesSource">
            <div class="postField postField--body" id="editor">
             <section class="section--first section--last">
              <div class="section-divider layoutSingleColumn-template">
               <hr class="section-divider"/>
              </div>
              <div class="section-content">
               <div class="section-inner layoutSingleColumn-template">
                <div>
                 <h1 class="graf--h1">
                  Kotlin Koin - Android Tutorial for Beginners - Step By Step Guide
                 </h1>
                 <div class="graf-image graf-caption">
                  <img alt="Kotlin Koin - Android Tutorial for Beginners - Step By Step Guide" class="graf-image" src="/images/banner-koin-44892f0b66a4ee73.png"/>
                 </div>
                 <p class="graf--p">
                  We have been using the Dependency Injection framework quite a few times like Dagger in our project.
                 </p>
                 <p class="graf--p">
                  In this blog, we are going to learn about Koin, a new dependency injection framework for Android Developers.
                  <a class="markup--anchor" href="https://blog.mindorks.com/why-do-we-use-the-dependency-injection-framework-in-android" target="_blank">
                   If you are not familiar with why we need a dependency injection framework in our project, click here
                  </a>
                  .
                 </p>
                 <p class="graf--p">
                  We are going to discuss,
                 </p>
                 <ul>
                  <li>
                   What is Koin?
                  </li>
                  <li>
                   Understanding terminologies in Koin
                  </li>
                  <li>
                   Setting up your project
                  </li>
                  <li>
                   Project Structure
                  </li>
                  <li>
                   Integrating Koin
                  </li>
                 </ul>
                 <h4 class="graf--h3">
                  What is Koin?
                 </h4>
                 <p class="graf--p">
                  Koin is a DI framework for Kotlin developers, completely written in Kotin.
                 </p>
                 <p class="graf--p">
                  It is very light weighted. It supports the Kotlin DSL feature. It is one of the easy DI frameworks which doesn't require a steep learning curve to get hold of it.
                 </p>
                 <h4 class="graf--h3">
                  Understanding Terminologies in Koin
                 </h4>
                 <p class="graf--p">
                  While working with Koin, there are few terminologies we need to understand before getting started.
                 </p>
                 <ul>
                  <li>
                   <b class="graf--bold">
                    module
                   </b>
                   - it creates a module in Koin which would be used by Koin to provide all the dependencies.
                  </li>
                  <li>
                   <b class="graf--bold">
                    single
                   </b>
                   - it creates a singleton that can be used across the app as a singular instance.
                  </li>
                  <li>
                   <b class="graf--bold">
                    factory
                   </b>
                   - it provides a bean definition, which will create a new instance each time it is injected.
                  </li>
                  <li>
                   <b class="graf--bold">
                    get()
                   </b>
                   - it is used in the constructor of a class to provide the required dependency.
                  </li>
                 </ul>
                 <h4 class="graf--h3">
                  Setting up your project
                 </h4>
                 <p class="graf--p">
                  Here, we are going to set up the Android Project.
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Create a Project
                  </b>
                 </p>
                 <ul>
                  <li>
                   Start a new Android Studio Project
                  </li>
                  <li>
                   Select Empty Activity and Next
                  </li>
                  <li>
                   Name: Koin-Tutorial
                  </li>
                  <li>
                   Package name: com.mindorks.framework.mvvm
                  </li>
                  <li>
                   Language: Kotlin
                  </li>
                  <li>
                   Finish
                  </li>
                  <li>
                   Your starting project is ready now
                  </li>
                 </ul>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Add dependencies
                  </b>
                 </p>
                 <p class="graf--p">
                  Add the following dependencies in the app's build.gradle file,
                 </p>
                 <pre><code class="language-java graf graf--code">implementation "androidx.recyclerview:recyclerview:{latest-version}"
implementation 'android.arch.lifecycle:extensions:{latest-version}'
implementation 'com.github.bumptech.glide:glide:{latest-version}'
implementation 'androidx.activity:activity-ktx:{latest-version}'</code></pre>
                 <p class="graf--p">
                  Now our project is ready with dependencies.
                 </p>
                 <p class="graf--p">
                  <a class="markup--anchor" href="https://github.com/MindorksOpenSource/Koin-Tutorial" target="_blank">
                   You can find the complete project here.
                  </a>
                 </p>
                 <h4 class="graf--h3">
                  Project Structure
                 </h4>
                 <p class="graf--p">
                  For the project, we are going to follow a basic version of MVVM. Our package in the project will look like below:
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Kotlin Koin - Android Tutorial for Beginners - Step By Step Guide" class="graf-image" src="/images/dagger-hilt-project-structure-16f36cc05b0cfdd4.png"/>
                 </div>
                 <p class="graf--p">
                  We need the enum to represent the UI State. We will create that in the utils package.
                 </p>
                 <pre><code class="language-java graf graf--code">enum class Status {
    SUCCESS,
    ERROR,
    LOADING
}</code></pre>
                 <p class="graf--p">
                  We need a utility class that will be responsible to communicate the current state of Network Call to the UI Layer. We are naming that as Resource. So, create a Kotlin data class Resource inside the same utils package and add the following code.
                 </p>
                 <pre><code class="language-java graf graf--code">data class Resource&lt;out T&gt;(val status: Status, val data: T?, val message: String?) {

    companion object {

        fun &lt;T&gt; success(data: T?): Resource&lt;T&gt; {
            return Resource(Status.SUCCESS, data, null)
        }

        fun &lt;T&gt; error(msg: String, data: T?): Resource&lt;T&gt; {
            return Resource(Status.ERROR, data, msg)
        }

        fun &lt;T&gt; loading(data: T?): Resource&lt;T&gt; {
            return Resource(Status.LOADING, data, null)
        }

    }

}</code></pre>
                 <p class="graf--p">
                  Our utils package is ready now.
                 </p>
                 <h4 class="graf--h3">
                  Integrating Koin
                 </h4>
                 <p class="graf--p">
                  To setup Koin in your project, we would add the following in your app's build.gradle,
                 </p>
                 <pre><code class="language-java graf graf--code">//koin
implementation "org.koin:koin-android-viewmodel:{latest-version}"
implementation "org.koin:koin-android:{latest-version}"</code></pre>
                 <p class="graf--p">
                  This is the only required setup we need to do to get started with Koin.
                 </p>
                 <p class="graf--p">
                  Now, let's break the further tasks in steps.
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Step 01.
                  </b>
                 </p>
                 <p class="graf--p">
                  We will first create our Application class App like,
                 </p>
                 <pre><code class="language-java graf graf--code">class App : Application()</code></pre>
                 <p class="graf--p">
                  and we will update the Manifest file like,
                 </p>
                 <pre><code class="language-java graf graf--code">android:name=".App"</code></pre>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Step 02.
                  </b>
                 </p>
                 <p class="graf--p">
                  Now, we will add the dependencies for Retrofit and
                  <span class="">
                   <a class="markup--anchor" href="https://amitshekhar.me/blog/kotlin-coroutines" target="_blank">
                    Kotlin-Coroutines
                   </a>
                  </span>
                  in the app's build.gradle like,
                 </p>
                 <pre><code class="language-java graf graf--code">// Networking
implementation "com.squareup.retrofit2:retrofit:{latest-version}"
implementation "com.squareup.retrofit2:converter-moshi:{latest-version}"
implementation "com.squareup.okhttp3:okhttp:{latest-version}"
implementation "com.squareup.okhttp3:logging-interceptor:{latest-version}"

// Coroutine
implementation "org.jetbrains.kotlinx:kotlinx-coroutines-android:{latest-version}"
implementation "org.jetbrains.kotlinx:kotlinx-coroutines-core:{latest-version}"</code></pre>
                 <p class="graf--p">
                  Now, in the project what we will do is, we will do an API call and show a list of users.
                 </p>
                 <p class="graf--p">
                  We will also use Kotlin-Coroutine for multithreading. Now, we will create
                  <b class="graf--bold">
                   api
                  </b>
                  ,
                  <b class="graf--bold">
                   model
                  </b>
                  ,
                  <b class="graf--bold">
                   repository
                  </b>
                  packages inside the data layer. It will have files like,
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Kotlin Koin - Android Tutorial for Beginners - Step By Step Guide" class="graf-image" src="/images/sameple-ping-fb7ae59f52e75f47.png"/>
                 </div>
                 <p class="graf--p">
                  Then, ApiService looks like,
                 </p>
                 <pre><code class="language-java graf graf--code">interface ApiService {

    @GET("users")
    suspend fun getUsers(): Response&lt;List&lt;User&gt;&gt;

}</code></pre>
                 <p class="graf--p">
                  ApiHelper looks like,
                 </p>
                 <pre><code class="language-java graf graf--code">interface ApiHelper {

    suspend fun getUsers(): Response&lt;List&lt;User&gt;&gt;
}</code></pre>
                 <p class="graf--p">
                  And finally, the ApiHelperImpl looks like,
                 </p>
                 <pre><code class="language-java graf graf--code">class ApiHelperImpl(private val apiService: ApiService) : ApiHelper {

    override suspend fun getUsers(): Response&lt;List&lt;User&gt;&gt; = apiService.getUsers()

}</code></pre>
                 <p class="graf--p">
                  Also, for
                  <b class="graf--bold">
                   BASE_URL
                  </b>
                  , we will add the following in the
                  <code class="graf--code-inline">
                   defaultConfig
                  </code>
                  block in the app's build.gradle file,
                 </p>
                 <pre><code class="language-java graf graf--code">buildConfigField 'String', 'BASE_URL', "\"https://5e510330f2c0d300147c034c.mockapi.io/\""</code></pre>
                 <p class="graf--p">
                  The User data class looks like,
                 </p>
                 <pre><code class="language-java graf graf--code">data class User(
    @Json(name = "id")
    val id: Int = 0,
    @Json(name = "name")
    val name: String = "",
    @Json(name = "email")
    val email: String = "",
    @Json(name = "avatar")
    val avatar: String = ""
)</code></pre>
                 <p class="graf--p">
                  Now, inside the MainRepository, we will update the code like,
                 </p>
                 <pre><code class="language-java graf graf--code">class MainRepository (private val apiHelper: ApiHelper) {

    suspend fun getUsers() =  apiHelper.getUsers()

}</code></pre>
                 <p class="graf--p">
                  Now, we are done setting up the data layer, and let's move to the DI part of the project.
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Step 03.
                  </b>
                 </p>
                 <p class="graf--p">
                  Now, we will create a package
                  <b class="graf--bold">
                   di -&gt; module
                  </b>
                  and inside it, we will create AppModule, ViewModelModule, and RepositoryModule.
                 </p>
                 <p class="graf--p">
                  Inside AppModule first, we will create the functions we want to provide as dependencies. We will update the file like,
                 </p>
                 <pre><code class="language-java graf graf--code">private fun provideNetworkHelper(context: Context) = NetworkHelper(context)

private fun provideOkHttpClient() = if (BuildConfig.DEBUG) {
    val loggingInterceptor = HttpLoggingInterceptor()
    loggingInterceptor.setLevel(HttpLoggingInterceptor.Level.BODY)
    OkHttpClient.Builder()
        .addInterceptor(loggingInterceptor)
        .build()
} else OkHttpClient
    .Builder()
    .build()

private fun provideRetrofit(
    okHttpClient: OkHttpClient,
    BASE_URL: String
): Retrofit =
    Retrofit.Builder()
        .addConverterFactory(MoshiConverterFactory.create())
        .baseUrl(BASE_URL)
        .client(okHttpClient)
        .build()

private fun provideApiService(retrofit: Retrofit): ApiService = retrofit.create(ApiService::class.java)

private fun provideApiHelper(apiHelper: ApiHelperImpl): ApiHelper = apiHelper</code></pre>
                 <p class="graf--p">
                  Now, to create the file as a supported module for Koin, we will pass the functions as singleton instance to the module. The module is a collection of dependencies we are going to provide to the application. We will create a variable like,
                 </p>
                 <pre><code class="language-java graf graf--code">val appModule = module {
   
}</code></pre>
                 <p class="graf--p">
                  and inside the module, we will pass the single instance of all the functions we created like,
                 </p>
                 <pre><code class="language-java graf graf--code">val appModule = module {
    single { provideOkHttpClient() }
    single { provideRetrofit(get(), BuildConfig.BASE_URL) }
    single { provideApiService(get()) }
    single { provideNetworkHelper(androidContext()) }
}</code></pre>
                 <p class="graf--p">
                  Here, to provide the dependency as a singleton instance we use
                  <b class="graf--bold">
                   single{}
                  </b>
                  and inside it, we will pass the function which will return the dependency as an instance to be used across the app.
                 </p>
                 <p class="graf--p">
                  We are using
                  <b class="graf--bold">
                   get()
                  </b>
                  here to pass the dependency to the constructor. Using get it will only provide the constructor whose instance is already been provided by Koin.
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Step 04.
                  </b>
                 </p>
                 <p class="graf--p">
                  Now, let's update the RepositoryModule. Here, we will provide the MainRepository instance by,
                 </p>
                 <pre><code class="language-java graf graf--code">val repoModule = module {
    single {
        MainRepository(get())
    }
}</code></pre>
                 <p class="graf--p">
                  Here, MainRepository requires ApiHelper in the constructor which will be provided by the Koin here.
                 </p>
                 <p class="graf--p">
                  And for ApiHelper, we would need the ApiHelperImpl part to be provided which is the extension for ApiHelper. Now, to pass the ApiHelper as a param, we need to provide it as well from the module.
                 </p>
                 <p class="graf--p">
                  To provide the ApiHelperImpl in the module, we will update the code and create a single instance like,
                 </p>
                 <pre><code class="language-java graf graf--code">single&lt;ApiHelper&gt; {
    return@single ApiHelperImpl(get())
}</code></pre>
                 <p class="graf--p">
                  Here, we are providing a type if ApiHelper, and returning ApiHelperImpl and in ApiHelperImpl it takes ApiService as a constructor parameter which we are already providing from provideApiService function.
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Step 05.
                  </b>
                 </p>
                 <p class="graf--p">
                  Now, we are going to use a MainViewModel for updating the UI. To provide dependencies in ViewModel we will update the ViewModelModule like,
                 </p>
                 <pre><code class="language-java graf graf--code">val viewModelModule = module {
    viewModel {
        MainViewModel(get(),get())
    }
}</code></pre>
                 <p class="graf--p">
                  Here, you can see we are not using single, and in place of that we are using viewModel and inside it, we resolve the dependencies which we are providing from appModule.
                 </p>
                 <p class="graf--p">
                  Now, we are done providing the dependencies. Let us start now by injecting the dependencies.
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Step 06.
                  </b>
                 </p>
                 <p class="graf--p">
                  Now, let's start designing our ViewModel. We will update the ViewModel like,
                 </p>
                 <pre><code class="language-java graf graf--code">class MainViewModel(
    private val mainRepository: MainRepository,
    private val networkHelper: NetworkHelper
) : ViewModel() {

    private val _users = MutableLiveData&lt;Resource&lt;List&lt;User&gt;&gt;&gt;()
    val users: LiveData&lt;Resource&lt;List&lt;User&gt;&gt;&gt;
        get() = _users

    init {
        fetchUsers()
    }

    private fun fetchUsers() {
        viewModelScope.launch {
            _users.postValue(Resource.loading(null))
            if (networkHelper.isNetworkConnected()) {
                mainRepository.getUsers().let {
                    if (it.isSuccessful) {
                        _users.postValue(Resource.success(it.body()))
                    } else _users.postValue(Resource.error(it.errorBody().toString(), null))
                }
            } else _users.postValue(Resource.error("No internet connection", null))
        }
    }
}</code></pre>
                 <p class="graf--p">
                  Here, we are passing MainRepository and NetworkHelper in the constructor of the ViewModel.
                 </p>
                 <p class="graf--p">
                  Here, we are fetching the users in the init block and inside the viewModelScope, we will check for internet connectivity and if the connectivity is ok then we go through the API call or else we set the value to LiveData with an error. This user LiveData is then observed in the MainActivity to display the items in the recyclerView.
                 </p>
                 <p class="graf--p">
                  NetworkHelper looks like,
                 </p>
                 <pre><code class="language-java graf graf--code">class NetworkHelper constructor(private val context: Context) {

    fun isNetworkConnected(): Boolean {
        var result = false
        val connectivityManager =
            context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager
        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {
            val networkCapabilities = connectivityManager.activeNetwork ?: return false
            val activeNetwork =
                connectivityManager.getNetworkCapabilities(networkCapabilities) ?: return false
            result = when {
                activeNetwork.hasTransport(NetworkCapabilities.TRANSPORT_WIFI) -&gt; true
                activeNetwork.hasTransport(NetworkCapabilities.TRANSPORT_CELLULAR) -&gt; true
                activeNetwork.hasTransport(NetworkCapabilities.TRANSPORT_ETHERNET) -&gt; true
                else -&gt; false
            }
        } else {
            connectivityManager.run {
                connectivityManager.activeNetworkInfo?.run {
                    result = when (type) {
                        ConnectivityManager.TYPE_WIFI -&gt; true
                        ConnectivityManager.TYPE_MOBILE -&gt; true
                        ConnectivityManager.TYPE_ETHERNET -&gt; true
                        else -&gt; false
                    }

                }
            }
        }

        return result
    }
}</code></pre>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Step 07.
                  </b>
                 </p>
                 <p class="graf--p">
                  Now, we need to create the instance of ViewModel in the MainActivity so the values passed in the constructor of the ViewModel are passed to it.
                 </p>
                 <p class="graf--p">
                  To pass the instance of ViewModel we will create a variable called mainViewModel like,
                 </p>
                 <pre><code class="language-java graf graf--code">private val mainViewModel : MainViewModel by viewModel()</code></pre>
                 <p class="graf--p">
                  Here,
                  <b class="graf--bold">
                   by viewModel()
                  </b>
                  creates the instance for the ViewModel and it will also resolve the dependency required by it.
                 </p>
                 <blockquote class="graf--blockquote">
                  If we want to pass any dependency required by any class like Activity we use
                  <b class="graf--bold">
                   by inject()
                  </b>
                  also known as field injection.
                 </blockquote>
                 <p class="graf--p">
                  Now, the MainActivity looks like,
                 </p>
                 <pre><code class="language-java graf graf--code">class MainActivity : AppCompatActivity() {

    private val mainViewModel : MainViewModel by viewModel()
    private lateinit var adapter: MainAdapter

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        setupUI()
        setupObserver()

    }

    private fun setupUI() {
        recyclerView.layoutManager = LinearLayoutManager(this)
        adapter = MainAdapter(arrayListOf())
        recyclerView.addItemDecoration(
            DividerItemDecoration(
                recyclerView.context,
                (recyclerView.layoutManager as LinearLayoutManager).orientation
            )
        )
        recyclerView.adapter = adapter
    }

    private fun setupObserver() {
        mainViewModel.users.observe(this, Observer {
            when (it.status) {
                Status.SUCCESS -&gt; {
                    progressBar.visibility = View.GONE
                    it.data?.let { users -&gt; renderList(users) }
                    recyclerView.visibility = View.VISIBLE
                }
                Status.LOADING -&gt; {
                    progressBar.visibility = View.VISIBLE
                    recyclerView.visibility = View.GONE
                }
                Status.ERROR -&gt; {
                    //Handle Error
                    progressBar.visibility = View.GONE
                    Toast.makeText(this, it.message, Toast.LENGTH_LONG).show()
                }
            }
        })
    }

    private fun renderList(users: List&lt;User&gt;) {
        adapter.addData(users)
        adapter.notifyDataSetChanged()
    }
}</code></pre>
                 <p class="graf--p">
                  and the MainAdapter looks like,
                 </p>
                 <pre><code class="language-java graf graf--code">class MainAdapter(
    private val users: ArrayList&lt;User&gt;
) : RecyclerView.Adapter&lt;MainAdapter.DataViewHolder&gt;() {

    class DataViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) {
        fun bind(user: User) {
            itemView.textViewUserName.text = user.name
            itemView.textViewUserEmail.text = user.email
            Glide.with(itemView.imageViewAvatar.context)
                .load(user.avatar)
                .into(itemView.imageViewAvatar)
        }
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int) =
        DataViewHolder(
            LayoutInflater.from(parent.context).inflate(
                R.layout.item_layout, parent,
                false
            )
        )

    override fun getItemCount(): Int = users.size

    override fun onBindViewHolder(holder: DataViewHolder, position: Int) =
        holder.bind(users[position])

    fun addData(list: List&lt;User&gt;) {
        users.addAll(list)
    }
}</code></pre>
                 <p class="graf--p">
                  Now, we are almost done with setting up the project.
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Step 08.
                  </b>
                 </p>
                 <p class="graf--p">
                  To run the app successfully, we will add the required permissions like,
                 </p>
                 <pre><code class="language-java graf graf--code">&lt;uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /&gt;
&lt;uses-permission android:name="android.permission.INTERNET" /&gt;</code></pre>
                 <p class="graf--p">
                  and to initialize Koin in the project we will update the onCreate() of the application like,
                 </p>
                 <pre><code class="language-java graf graf--code">override fun onCreate() {
    super.onCreate()
    startKoin {
        androidContext(this@App)
        modules(listOf(appModule, repoModule, viewModelModule))
    }
}</code></pre>
                 <p class="graf--p">
                  Here, we are passing the androidContext to the Koin container which you can see we are using it in the appModule while providing the NetworkHelper class.
                 </p>
                 <p class="graf--p">
                  We are also passing all the modules which we created in the di/modules package.
                 </p>
                 <p class="graf--p">
                  Now, we are done with the project and if you run the project, you would see the list of users being populated in the recyclerView.
                 </p>
                 <p class="graf--p">
                  <a class="markup--anchor" href="https://github.com/MindorksOpenSource/Koin-Tutorial" target="_blank">
                   You can find the complete project here.
                  </a>
                 </p>
                 <p class="graf--p">
                  That's all about the implementation of Koin in the Android Project.
                 </p>
                 <p class="graf--p">
                  Happy learning.
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Team MindOrks :)
                  </b>
                 </p>
                </div>
               </div>
              </div>
             </section>
            </div>
           </div>
          </div>
         </article>
        </div>
       </div>
       <div class="ui divider">
       </div>
      </div>
      <div class="stretched fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui large center aligned header" style="padding-top:20px">
        Recommended for You
       </div>
      </div>
      <div class="fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui centered grid">
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/java-tutorial-for-beginners-learn-java-from-basics/">
          <img alt="Java Tutorial For Beginners - Learn Java From Basics" class="ui centered image" src="/images/java-basics.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Java Tutorial For Beginners - Learn Java From Basics
           </div>
           <div class="meta">
            8th October 2019
           </div>
           <div class="description">
            In this blog, we will learn how to get started with Java from basics.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/using-webviews-in-flutter-tutorial/">
          <img alt="Using WebViews in Flutter: Tutorial" class="ui centered image" src="/images/using-webviews-in-flutter-tutorial-banner.jpg" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Using WebViews in Flutter: Tutorial
           </div>
           <div class="meta">
            20th April 2020
           </div>
           <div class="description">
            In this blog, we will learn how to use WebViews in Flutter. WebViews are very important to open some web pages inside your application.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/learn-kotlin-apply-vs-with/">
          <img alt="Learn Kotlin —  apply vs with
" class="ui centered image" src="https://s3.ap-south-1.amazonaws.com/mindorks/blogs/learn-kotlin%E2%80%8A%E2%80%94%E2%80%8Aapply-vs-with.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Learn Kotlin —  apply vs with
           </div>
           <div class="meta">
            22nd May 2017
           </div>
           <div class="description">
            There are many great features available in Kotlin, we can take advantage of all these features to write the better application in Kotlin. Among all those features, apply and with are important feature. We must know when to use which one.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/learn-kotlin-data-class/">
          <img alt="Learn Kotlin - Data Class" class="ui centered image" src="https://s3.ap-south-1.amazonaws.com/mindorks/blogs/learn-kotlin-data-class.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Learn Kotlin - Data Class
           </div>
           <div class="meta">
            22nd May 2017
           </div>
           <div class="description">
            We frequently create a class to do nothing but hold data. In such a class some standard functionality is often mechanically derivable from the data. In Kotlin, this is called a data class and is marked as data.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/learn-kotlin-destructuring-declarations/">
          <img alt="Learn Kotlin- Destructuring Declarations" class="ui centered image" src="https://s3.ap-south-1.amazonaws.com/mindorks/blogs/learn-kotlin-destructuring-declarations.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Learn Kotlin- Destructuring Declarations
           </div>
           <div class="meta">
            22nd May 2017
           </div>
           <div class="description">
            Destructuring is a convenient way of extracting multiple values from data stored in (possibly nested) objects and Arrays. It can be used in locations that receive data (such as the left-hand side of an assignment).
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/learn-kotlin-extension-functions/">
          <img alt="Learn Kotlin — Extension Functions" class="ui centered image" src="https://s3.ap-south-1.amazonaws.com/mindorks/blogs/learn-kotlin%E2%80%8A-extension-functions.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Learn Kotlin — Extension Functions
           </div>
           <div class="meta">
            30th May 2017
           </div>
           <div class="description">
            As the name implies, the extension functions are the functions that help us to extend the functionality of classes without having to touch their code.
           </div>
          </div>
         </a>
        </div>
       </div>
      </div>
     </div>
    </div>
    <div style="background:#fff">
     <footer class="content-container">
      <div class="ui centered padded grid" style="padding-top:40px;background:linear-gradient(to right,#c4e0e0,#e5f1f1)">
       <h2 class="ui huge icon center aligned header">
        <div class="content">
         Connect With Your Mentors
        </div>
       </h2>
       <div class="centered row">
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Janishar Ali" class="ui medium circular image" src="/assets/ali.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://janisharali.com" target="_blank">
             Janishar Ali
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://janisharali.com" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/janisharali" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Amit Shekhar" class="ui medium circular image" src="/assets/amit.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://amitshekhar.me" target="_blank">
             Amit Shekhar
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://amitshekhar.me" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/amitiitbhu" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
      <div class="ui divider" style="margin:unset">
      </div>
      <h5 class="ui header" style="padding:16px;margin:unset;color:#555">
       <i aria-hidden="true" class="copyright icon">
       </i>
       <div class="content">
        Copyright 2022, MindOrks Nextgen Private Limited
       </div>
      </h5>
     </footer>
    </div>
   </div>
  </div>
  <script type="text/javascript">
   window.hljs.initHighlightingOnLoad()
  </script>
 </body>
</html>