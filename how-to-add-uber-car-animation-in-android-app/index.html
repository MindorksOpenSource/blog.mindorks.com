<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>
   How to Add Uber Car Animation in Android App?
  </title>
  <meta charset="utf-8"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="minimum-scale=1,initial-scale=1,width=device-width,shrink-to-fit=no" name="viewport"/>
  <link href="https://blog.mindorks.com/how-to-add-uber-car-animation-in-android-app" rel="canonical"/>
  <meta content="986249072156-dabps0lf90smluddrk5rkqsdjghk3hd3.apps.googleusercontent.com" name="google-signin-client_id"/>
  <meta content="android, learn android app development, android app development courses, android blogs, android tutorial" name="keywords"/>
  <meta content="How to Add Uber Car Animation in Android App?" property="og:title"/>
  <meta content="website" property="og:type"/>
  <meta content="https://blog.mindorks.com/how-to-add-uber-car-animation-in-android-app" property="og:url"/>
  <meta content="/images/how-to-add-uber-car-animation-in-android-app-banner.jpg" property="og:image"/>
  <meta content="In this tutorial, we will learn how to add Uber-like Car Animation in Android App. We will be using Google Map for showing the Car moving from Origin to Destination." property="og:description"/>
  <meta content="How to Add Uber Car Animation in Android App?" property="twitter:title"/>
  <meta content="In this tutorial, we will learn how to add Uber-like Car Animation in Android App. We will be using Google Map for showing the Car moving from Origin to Destination." name="twitter:description"/>
  <meta content="/images/how-to-add-uber-car-animation-in-android-app-banner.jpg" name="twitter:image:src"/>
  <meta content="summary_large_image" name="twitter:card"/>
  <meta content="@MindorksNextGen" name="twitter:site"/>
  <meta content="In this tutorial, we will learn how to add Uber-like Car Animation in Android App. We will be using Google Map for showing the Car moving from Origin to Destination." name="description"/>
  <meta content="1620001391374687" property="fb:app_id"/>
  <link href="/styles/vendor-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link href="/styles/app-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link as="style" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" onload='this.onload=null,this.rel="stylesheet"' rel="preload"/>
  <noscript>
   <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
  </noscript>
  <script type="text/javascript">
   window.__PRELOADED_STATE__={toastr:{toastrs:[],confirm:null},blogData:{data:{},latestBlogs:null,isFetching:!0,isFetchingLatestBlogs:!1,currentCategory:"",categories:[]},contactData:{formData:{email:"",name:"",phone:"",message:"",isWriting:!1,isNameError:!1,isEmailError:!1,isPhoneError:!1,isMessageError:!1,dismissMsg:!1},successMessage:null,errorMessage:null,isSending:!1},communityData:{formData:{email:"",isEmailError:!1,isWriting:!1,isSending:!1,dismissMsg:!1},successMessage:null,errorMessage:null},blogPageData:{blogId:410,data:{id:410,title:"How to Add Uber Car Animation in Android App?",description:"In this tutorial, we will learn how to add Uber-like Car Animation in Android App. We will be using Google Map for showing the Car moving from Origin to Destination.",text:'<h1 class="graf--h1">How to Add Uber Car Animation in Android App?</h1> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/how-to-add-uber-car-animation-in-android-app-banner.jpg class=\'graf-image\' alt=\'How to Add Uber Car Animation in Android App?\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">We all must have used the Uber or Lyft or some other cab sharing applications. Apart from picking and dropping you from your source to destination, the best part that I like the most about the Uber app is the movement of the car when it comes to our source or when it goes to our destination and I know, most of you also like the same animation. So, in this tutorial, we are going to build a project that will show how to add Uber car animation in the Android app.</p><p class="graf--p">We will discuss the below in this blog:</p><ul><li>Project Setup</li><li>Setting up Google Map</li><li>Setting Project Structure</li><li>Adding the Origin and Destination marker and drawing a path between the Origin and Destination on the map</li><li>Moving the car icon from Origin to Destination</li><li>Project Source Code and What next?</li></ul><p class="graf--p">So, let&#x27;s get started.</p><h4 class="graf--h3">Project Setup</h4><p class="graf--p">Here, we are going to set up the Android Project:</p><ul><li>Start a new Android Studio Project</li><li>Select Empty Activity and Next</li><li>Name: Uber-Car-Animation-Android</li><li>Package name: com.mindorks.example.ubercaranimation</li><li>Language: Kotlin</li><li>Finish</li><li>Your starting project is ready now</li></ul><h4 class="graf--h3">Setting up Google Map</h4><p class="graf--p">In this project, we are going to show the car animation on the Google Map and in order to use the Google Map in our application, we need an API key with Map feature enabled.</p><p class="graf--p"><b class="graf--bold">Getting an API key and enabling :</b></p><ol><li>Visit the <a class="markup--anchor" target="_blank" href="https://cloud.google.com/console/google/maps-apis/overview">Google Cloud Platform Console</a>.</li><li>Click the project drop-down and select or create the project for which you want to add an API key.</li><li>Click the menu button and select <b class="graf--bold">APIs &amp; Services &gt; Credentials</b>.</li><li>On the <b class="graf--bold">Credentials</b> page, click <b class="graf--bold">Create credentials &gt; API key</b>.<br/>The <b class="graf--bold">API key created</b> dialog displays your newly created API key.</li><li>Copy the API key and keep it somewhere.</li><li>Again, click the menu button and select <b class="graf--bold">APIs &amp; Services &gt; Library</b>.</li><li>Search for &quot;<b class="graf--bold">Map SDK for Android</b>&quot; and enable it.</li><li>Click <b class="graf--bold">Close.</b><br/>The new API key is listed on the <b class="graf--bold">Credentials</b> page under <b class="graf--bold">API keys</b>.<br/>(Remember to <a class="markup--anchor" target="_blank" href="https://developers.google.com/maps/documentation/directions/get-api-key#restrict_key">restrict the API key</a> before using it in production.) </li></ol><p class="graf--p"><b class="graf--bold">Adding API key in the AndroidManifest file:</b></p><p class="graf--p">Open the <code class="graf--code-inline">AndroidManifest.xml</code> file of your Android project and add your API key in the <code class="graf--code-inline">meta-data</code> tag under <code class="graf--code-inline">application</code> tag;</p><pre><code class="language-java graf graf--code">&lt;application&gt;\n    &lt;meta-data\n        android:name="com.google.android.geo.API_KEY"\n        android:value="PASTE_YOUR_API_KEY_HERE" /&gt;\n    ...\n&lt;/application&gt;</code></pre><p class="graf--p"><b class="graf--bold">Adding Google Map fragment in the <code class="graf--code-inline">activity_main.xml</code> file:</b></p><p class="graf--p">Open the <code class="graf--code-inline">activity_main.xml</code> file and add the Google Map fragment in it:</p><pre><code class="language-java graf graf--code">&lt;?xml version="1.0" encoding="utf-8"?&gt;\n&lt;fragment xmlns:android="http://schemas.android.com/apk/res/android"\n    xmlns:tools="http://schemas.android.com/tools"\n    android:id="@+id/map"\n    android:name="com.google.android.gms.maps.SupportMapFragment"\n    android:layout_width="match_parent"\n    android:layout_height="match_parent"\n    tools:context=".MainActivity" /&gt;</code></pre><p class="graf--p"><b class="graf--bold">Setting up the Google Map in <code class="graf--code-inline">MainActivity.kt</code>:</b></p><p class="graf--p">Now, we need to add the map fragment. Also, to use Google Map in your application, you need to implement the <code class="graf--code-inline">OnMapReadyCallback</code> interface and this interface contains <code class="graf--code-inline">onMapReady()</code> method, which is called when the map is loaded. So, the code for the <code class="graf--code-inline">MainActivity.kt</code> file will be:</p><pre><code class="language-java graf graf--code">class MainActivity : AppCompatActivity(), OnMapReadyCallback {\n\n    private lateinit var googleMap: GoogleMap\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        val mapFragment = supportFragmentManager\n            .findFragmentById(R.id.map) as SupportMapFragment\n        mapFragment.getMapAsync(this)\n    }\n\n    override fun onMapReady(googleMap: GoogleMap) {\n        this.googleMap = googleMap\n    }\n\n}</code></pre><p class="graf--p">Run the application and see if Google Map is visible in the App or not.</p><p class="graf--p"><b class="graf--bold">Showing some default location on the Google Map:</b></p><p class="graf--p">By default, some random positions will be visible in the Google Map, but we can set our location on the map or some other location when the map gets loaded.</p><p class="graf--p">In this example, we will be using <code class="graf--code-inline">LatLng(28.435350000000003, 77.11368)</code> location as the default location, when the app starts. So, we need to make two functions <code class="graf--code-inline">moveCamera()</code> and <code class="graf--code-inline">animateCamera()</code>. The <code class="graf--code-inline">moveCamera()</code> method, we will be used to reposition the camera to some latitude and longitude. While the <code class="graf--code-inline">animateCamera()</code> method will be used to animate the movement of the camera from the current position to some new position. So, add the below two methods:</p><pre><code class="language-java graf graf--code">private fun moveCamera(latLng: LatLng) {\n    googleMap.moveCamera(CameraUpdateFactory.newLatLng(latLng))\n}\n\nprivate fun animateCamera(latLng: LatLng) {\n    val cameraPosition = CameraPosition.Builder().target(latLng).zoom(15.5f).build()\n    googleMap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition))\n}</code></pre><p class="graf--p">Make another function <code class="graf--code-inline">showDefaultLocaitonOnMap()</code> which will take one LatLng and show that location on the map by calling the <code class="graf--code-inline">moveCamera</code> and <code class="graf--code-inline">animateCamera</code> function:</p><pre><code class="language-java graf graf--code">private fun showDefaultLocationOnMap(latLng: LatLng) {\n    moveCamera(latLng)\n    animateCamera(latLng)\n}</code></pre><p class="graf--p">Now, call the above function from the <code class="graf--code-inline">onMapReady()</code> method and pass some <code class="graf--code-inline">LatLng</code> to it:</p><pre><code class="language-java graf graf--code">private lateinit var defaultLocation: LatLng\n\noverride fun onMapReady(googleMap: GoogleMap) {\n    this.googleMap = googleMap\n    defaultLocation = LatLng(28.435350000000003, 77.11368)\n    showDefaultLocationOnMap(defaultLocation)\n\n}</code></pre><p class="graf--p">Run the application and see if the <code class="graf--code-inline">LatLng(28.435350000000003, 77.11368)</code> is displayed or not.</p><h4 class="graf--h3">Setting Project Structure</h4><p class="graf--p">In this part, we will structure our project to enhance the readability of the project.</p><ul><li>In the <code class="graf--code-inline">com.minidorks.example.ubercaranimation</code> package, add one <code class="graf--code-inline">util</code> package(right-click on com.mindorks.example.ubercaranimation &gt; new &gt; package). The utils package will contain all the utility classes used in the project.</li><li>In the <code class="graf--code-inline">util</code> package, add one Object class named <code class="graf--code-inline">AnimationUtils</code>(right-click on utils &gt; new &gt; Kotlin file/class &gt; select object). The <code class="graf--code-inline">AnimationUtils</code> will contain all the Animation related functions.</li><li>Again in the <code class="graf--code-inline">util</code> package, add one Object class named <code class="graf--code-inline">MapUtils</code>. This will contain all the functions related to Map.</li></ul><p class="graf--p">The following is our project structure:</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/how-to-add-uber-car-animation-in-android-app-project-structure.png class=\'graf-image\' alt=\'How to Add Uber Car Animation in Android App?\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">Now, we are done with all the setup part. Let&#x27;s move on to the functionality part of the application.</p><h4 class="graf--h3">Adding the Origin and Destination marker and drawing a path between the Origin and Destination on the map</h4><p class="graf--p">In a real project, you will get a list of locations from the server. These locations are nothing but <code class="graf--code-inline">LatLng</code> of various points present in between the source and destination. These locations are used to draw a path between the source and the destination.</p><p class="graf--p">In our project, we will be using some hard-coded values of <code class="graf--code-inline">LatLng</code>. So, in the <code class="graf--code-inline">MapUtils</code> class, create a function <code class="graf--code-inline">getListOfLocations()</code> that will return a list of <code class="graf--code-inline">LatLng</code> that corresponds to a path.</p><pre><code class="language-java graf graf--code">fun getListOfLocations(): ArrayList&lt;LatLng&gt; {\n    val locationList = ArrayList&lt;LatLng&gt;()\n    locationList.add(LatLng(28.436970000000002, 77.11272000000001))\n    locationList.add(LatLng(28.43635, 77.11289000000001))\n    locationList.add(LatLng(28.4353, 77.11317000000001))\n    locationList.add(LatLng(28.435280000000002, 77.11332))\n    locationList.add(LatLng(28.435350000000003, 77.11368))\n    locationList.add(LatLng(28.4356, 77.11498))\n    locationList.add(LatLng(28.435660000000002, 77.11519000000001))\n    locationList.add(LatLng(28.43568, 77.11521))\n    locationList.add(LatLng(28.436580000000003, 77.11499))\n    locationList.add(LatLng(28.436590000000002, 77.11507))\n    return locationList\n}</code></pre><p class="graf--p">Now, we have a list of LatLng and with the help of these LatLng, we can draw a path between the Origin and the Destination. We will use <a class="markup--anchor" target="_blank" href="https://developers.google.com/android/reference/com/google/android/gms/maps/model/Polyline">Polyline</a>, which is a list of points, where line segments are drawn between consecutive points.</p><p class="graf--p">Also, we will be drawing two polylines, one of grey color and another black color. The basic idea is to draw the grey line first and then draw the black line by sowing some animation.</p><p class="graf--p">So, create a function named <code class="graf--code-inline">showPath()</code> that will take a list of <code class="graf--code-inline">LatLng</code> and this function will be used to draw a path between origin and destination by using the <code class="graf--code-inline">addPolyline()</code> method.</p><pre><code class="language-java graf graf--code">private var grayPolyline: Polyline? = null\nprivate var blackPolyline: Polyline? = null\n\n\nprivate fun showPath(latLngList: ArrayList&lt;LatLng&gt;) {\n    val builder = LatLngBounds.Builder()\n    for (latLng in latLngList) {\n        builder.include(latLng)\n    }\n    // this is used to set the bound of the Map\n    val bounds = builder.build()\n    googleMap.animateCamera(CameraUpdateFactory.newLatLngBounds(bounds, 2))\n\n    val polylineOptions = PolylineOptions()\n    polylineOptions.color(Color.GRAY)\n    polylineOptions.width(5f)\n    polylineOptions.addAll(latLngList)\n    grayPolyline = googleMap.addPolyline(polylineOptions)\n\n    val blackPolylineOptions = PolylineOptions()\n    blackPolylineOptions.color(Color.BLACK)\n    blackPolylineOptions.width(5f)\n    blackPolyline = googleMap.addPolyline(blackPolylineOptions)\n\n}</code></pre><p class="graf--p">In the above code, we have used bound in the Google Map. It is an area that is created by using the <code class="graf--code-inline">LatLng</code> we have.</p><p class="graf--p">The path is ready. Now, we need to add the origin and destination marker at the starting and the endpoint of the path. For this, we will draw a rectangle black marker as used in the Uber app for Origin and Destination marker. We will draw this marker with the help of <code class="graf--code-inline">Canvas</code>.</p><p class="graf--p">So, in the <code class="graf--code-inline">MapUtils</code> class, add one method named <code class="graf--code-inline">getOriginDestinationMarkerBitmap()</code> which will return a <code class="graf--code-inline">Bitmap</code>.</p><pre><code class="language-java graf graf--code">fun getOriginDestinationMarkerBitmap(): Bitmap {\n    val height = 20\n    val width = 20\n    val bitmap = Bitmap.createBitmap(height, width, Bitmap.Config.RGB_565)\n    val canvas = Canvas(bitmap)\n    val paint = Paint()\n    paint.color = Color.BLACK\n    paint.style = Paint.Style.FILL\n    paint.isAntiAlias = true\n    canvas.drawRect(0F, 0F, width.toFloat(), height.toFloat(), paint)\n    return bitmap\n}</code></pre><p class="graf--p">The Bitmap for the marker is ready. Now, we can add the marker on the map by using the <code class="graf--code-inline">addMarker()</code> method of Google Map. In the <code class="graf--code-inline">MainActivity.kt</code> file, add one function named <code class="graf--code-inline">addOriginDestinationMarkerAndGet()</code> which will take a <code class="graf--code-inline">LatLng</code> as input and return a <code class="graf--code-inline">Marker</code>:</p><pre><code class="language-java graf graf--code">private fun addOriginDestinationMarkerAndGet(latLng: LatLng): Marker {\n    val bitmapDescriptor =\n        BitmapDescriptorFactory.fromBitmap(MapUtils.getOriginDestinationMarkerBitmap())\n    return googleMap.addMarker(\n        MarkerOptions().position(latLng).flat(true).icon(bitmapDescriptor)\n    )\n}</code></pre><p class="graf--p">Now, we need to call the above method from the <code class="graf--code-inline">showPath()</code> method to draw the origin and destination marker. For the origin marker, the <code class="graf--code-inline">LatLng</code> will be the first value of the <code class="graf--code-inline">latLngList</code> and for the destination marker, the <code class="graf--code-inline">LatLng</code> will be the last value of the <code class="graf--code-inline">latLngList</code>.</p><pre><code class="language-java graf graf--code">private var originMarker: Marker? = null\nprivate var destinationMarker: Marker? = null\n\nprivate fun showPath(latLngList: ArrayList&lt;LatLng&gt;) {\n    ...\n\n    originMarker = addOriginDestinationMarkerAndGet(latLngList[0])\n    originMarker?.setAnchor(0.5f, 0.5f)\n    destinationMarker = addOriginDestinationMarkerAndGet(latLngList[latLngList.size - 1])\n    destinationMarker?.setAnchor(0.5f, 0.5f)\n\n}</code></pre><p class="graf--p">In the above code, we are using the <code class="graf--code-inline">setAnchor()</code> function which is used to place the marker at the correct position. The following image describes the usage of Anchor:</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/how-to-add-uber-car-animation-in-android-app-anchor.jpg class=\'graf-image\' alt=\'How to Add Uber Car Animation in Android App?\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">So, are we done with the path of the car? No, one thing is missing i.e. the Animation is missing. </p><p class="graf--p">Here, we will draw the grey line first and then draw the black line in a duration of 4000ms i.e. 4 seconds. When we draw the grey line then we have a list of points also because a line is a combination of points. After that, we will use <code class="graf--code-inline">LinearInterpolator</code> that will give some percentage between (0, 100) every 4 seconds. So, after every 4 sec, we will draw some part of the line with the help of the interpolator value and some index from the points of the grey line and this seems like we are animating the black line over the grey line.</p><p class="graf--p">In the <code class="graf--code-inline">AnimationUtils</code> class, add one function named <code class="graf--code-inline">polylineAnimator</code> that will return an interpolator value:</p><pre><code class="language-java graf graf--code">fun polylineAnimator(): ValueAnimator {\n    val valueAnimator = ValueAnimator.ofInt(0, 100)\n    valueAnimator.interpolator = LinearInterpolator()\n    valueAnimator.duration = 4000\n    return valueAnimator\n}</code></pre><p class="graf--p">Now, we will use the above function in the <code class="graf--code-inline">showPath</code> method to show the animation of the black path over the grey path:</p><pre><code class="language-java graf graf--code">private fun showPath(latLngList: ArrayList&lt;LatLng&gt;) {\n    ...\n\n    val polylineAnimator = AnimationUtils.polylineAnimator()\n    polylineAnimator.addUpdateListener { valueAnimator -&gt;\n        val percentValue = (valueAnimator.animatedValue as Int)\n        val index = (grayPolyline?.points!!.size) * (percentValue / 100.0f).toInt()\n        blackPolyline?.points = grayPolyline?.points!!.subList(0, index)\n    }\n    polylineAnimator.start()\n}</code></pre><p class="graf--p">That&#x27;s it, we are done with the animation of the black path and addition of marker on the path. Now, let&#x27;s see how to show the movement of the car from source to destination.</p><h4 class="graf--h3">Moving the car icon from Origin to Destination</h4><p class="graf--p">In a real project, the server will be continuously sending the current location of the car and this location is updated on the path that is already there on the map.</p><p class="graf--p">In our example, we will be using the locations returned by the <code class="graf--code-inline">getListOfLocations()</code> function of the <code class="graf--code-inline">MapUtils</code> class. We will take one location at a time and then update the location of the car on the map.</p><p class="graf--p">So, the first thing that we need is the car icon. I have a car icon in my <code class="graf--code-inline">drawable</code> folder having name <i class="graf--italic">ic_car.png</i>. In the <code class="graf--code-inline">MapUtils</code> class, make a function named <code class="graf--code-inline">getCarBitmap</code> that will return the Bitmap of a car:</p><pre><code class="language-java graf graf--code">fun getCarBitmap(context: Context): Bitmap {\n    val bitmap = BitmapFactory.decodeResource(context.resources, R.drawable.ic_car)\n    return Bitmap.createScaledBitmap(bitmap, 50, 100, false)\n}</code></pre><p class="graf--p">Just like the animation of the black line while drawing the path, here also, we will use the same logic to animate the car icon using the <code class="graf--code-inline">LinearInterpolator</code>. So, in the <code class="graf--code-inline">AnimationUtils</code> class, add a function named <code class="graf--code-inline">carAnimator()</code>:</p><pre><code class="language-java graf graf--code">fun carAnimator(): ValueAnimator {\n    val valueAnimator = ValueAnimator.ofFloat(0f, 1f)\n    valueAnimator.duration = 3000\n    valueAnimator.interpolator = LinearInterpolator()\n    return valueAnimator\n}</code></pre><p class="graf--p">Now, in the <code class="graf--code-inline">MainActivity.kt</code> file, create a function named <code class="graf--code-inline">updateCarLocation()</code> that will update the location of the car on the map. Here, we will set the moving car marker and we will use two variables i.e. <code class="graf--code-inline">previousLatLng</code> and <code class="graf--code-inline">currentLatLng</code>. These variables will be used to aminate the car from the previous location to the current location. Initially, nothing will be there in these two variables, so we need to check for that and update accordingly and then call the <code class="graf--code-inline">carAnimator()</code> to animate the car. So, in the <code class="graf--code-inline">updateCarLocation()</code> function, add the below code:</p><pre><code class="language-java graf graf--code">private var movingCabMarker: Marker? = null\nprivate var previousLatLng: LatLng? = null\nprivate var currentLatLng: LatLng? = null\n\n\nprivate fun updateCarLocation(latLng: LatLng) {\n    if (movingCabMarker == null) {\n        movingCabMarker = addCarMarkerAndGet(latLng)\n    }\n    if (previousLatLng == null) {\n        currentLatLng = latLng\n        previousLatLng = currentLatLng\n        movingCabMarker?.position = currentLatLng\n        movingCabMarker?.setAnchor(0.5f, 0.5f)\n        animateCamera(currentLatLng!!)\n    } else {\n        previousLatLng = currentLatLng\n        currentLatLng = latLng\n        val valueAnimator = AnimationUtils.carAnimator()\n        valueAnimator.addUpdateListener { va -&gt;\n            if (currentLatLng != null && previousLatLng != null) {\n                val multiplier = va.animatedFraction\n                val nextLocation = LatLng(\n                    multiplier * currentLatLng!!.latitude + (1 - multiplier) * previousLatLng!!.latitude,\n                    multiplier * currentLatLng!!.longitude + (1 - multiplier) * previousLatLng!!.longitude\n                )\n                movingCabMarker?.position = nextLocation\n                movingCabMarker?.setAnchor(0.5f, 0.5f)\n                animateCamera(nextLocation)\n            }\n        }\n        valueAnimator.start()\n    }\n}</code></pre><p class="graf--p">Now, you can call the <code class="graf--code-inline">updateCabLocation</code> from the <code class="graf--code-inline">onMapReady</code> method by providing all the locations that you get from the <code class="graf--code-inline">getListOfLocations</code> method. Since we are reading the locations from the array of size 10 and not from the server, the cab position will be updated so fastly that you will never see any animation in between.</p><p class="graf--p">So, in this project, we will use <code class="graf--code-inline">Handler</code> to delay the location feeding by 5 sec. In the <code class="graf--code-inline">MainActivity.kt</code> file, create a function named <code class="graf--code-inline">showMovingCab()</code> and get the location from the array of 10 elements(you can change this with your array size) and then call the <code class="graf--code-inline">updateCabLocation()</code>.</p><pre><code class="language-java graf graf--code">private lateinit var handler: Handler\nprivate lateinit var runnable: Runnable\n\n\nprivate fun showMovingCab(cabLatLngList: ArrayList&lt;LatLng&gt;) {\n    handler = Handler()\n    var index = 0\n    runnable = Runnable {\n        run {\n            if (index &lt; 10) {\n                updateCarLocation(cabLatLngList[index])\n                handler.postDelayed(runnable, 3000)\n                ++index\n            } else {\n                handler.removeCallbacks(runnable)\n                Toast.makeText(this@MainActivity, "Trip Ends", Toast.LENGTH_LONG).show()\n            }\n        }\n    }\n    handler.postDelayed(runnable, 5000)\n}</code></pre><p class="graf--p">From the <code class="graf--code-inline">onMapReady</code> method, call the above method as:</p><pre><code class="language-java graf graf--code">override fun onMapReady(googleMap: GoogleMap) {\n    this.googleMap = googleMap\n    defaultLocation = LatLng(28.435350000000003, 77.11368)\n    showDefaultLocationOnMap(defaultLocation)\n\n    Handler().postDelayed(Runnable {\n        showPath(MapUtils.getListOfLocations())\n        showMovingCab(MapUtils.getListOfLocations())\n    }, 3000)\n}</code></pre><p class="graf--p">But if you run the application, then you will see that the orientation of the cab is always fixed. It is moving, but it is not moving with the correct orientation because the car is not rotating correctly.</p><p class="graf--p">Let&#x27;s first understand the concept of rotation of marker on Google Map:</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/how-to-add-uber-car-animation-in-android-app-car-rotation-example.jpg class=\'graf-image\' alt=\'How to Add Uber Car Animation in Android App?\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">In Google Map, the rotation is done in a clockwise manner. By default, the orientation of the cab will be perfect if it moves on the x or y-axis. But what if there is a change in the angle of the cab? In the above image for the drawn path, the angle will be taken as 0 or 360 and this will result in bad orientation. So, we need to find the angle of the cab.</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/how-to-add-uber-car-animation-in-android-app-car-rotation-mathematics.jpg class=\'graf-image\' alt=\'How to Add Uber Car Animation in Android App?\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">In the above image, we find the angle of the car by applying some mathematics and if the angle is with us, then we can rotate the cab according to our needs.</p><p class="graf--p">So, in the MapUtils class, add a function named <code class="graf--code-inline">getRotation</code> which takes two locations i.e. start and end and then return the angle between them:</p><pre><code class="language-java graf graf--code">fun getRotation(start: LatLng, end: LatLng): Float {\n    val latDifference: Double = abs(start.latitude - end.latitude)\n    val lngDifference: Double = abs(start.longitude - end.longitude)\n    var rotation = -1F\n    when {\n        start.latitude &lt; end.latitude && start.longitude &lt; end.longitude -&gt; {\n            rotation = Math.toDegrees(atan(lngDifference / latDifference)).toFloat()\n        }\n        start.latitude &gt;= end.latitude && start.longitude &lt; end.longitude -&gt; {\n            rotation = (90 - Math.toDegrees(atan(lngDifference / latDifference)) + 90).toFloat()\n        }\n        start.latitude &gt;= end.latitude && start.longitude &gt;= end.longitude -&gt; {\n            rotation = (Math.toDegrees(atan(lngDifference / latDifference)) + 180).toFloat()\n        }\n        start.latitude &lt; end.latitude && start.longitude &gt;= end.longitude -&gt; {\n            rotation =\n                (90 - Math.toDegrees(atan(lngDifference / latDifference)) + 270).toFloat()\n        }\n    }\n    return rotation\n}</code></pre><p class="graf--p">Now, we will call the above function in the <code class="graf--code-inline">updateCarLocation</code> function. So, the final code of the <code class="graf--code-inline">updateCarLocation</code> function will be:</p><pre><code class="language-java graf graf--code">private var movingCabMarker: Marker? = null\nprivate var previousLatLng: LatLng? = null\nprivate var currentLatLng: LatLng? = null\n\n\nprivate fun updateCarLocation(latLng: LatLng) {\n    if (movingCabMarker == null) {\n        movingCabMarker = addCarMarkerAndGet(latLng)\n    }\n    if (previousLatLng == null) {\n        currentLatLng = latLng\n        previousLatLng = currentLatLng\n        movingCabMarker?.position = currentLatLng\n        movingCabMarker?.setAnchor(0.5f, 0.5f)\n        animateCamera(currentLatLng!!)\n    } else {\n        previousLatLng = currentLatLng\n        currentLatLng = latLng\n        val valueAnimator = AnimationUtils.carAnimator()\n        valueAnimator.addUpdateListener { va -&gt;\n            if (currentLatLng != null && previousLatLng != null) {\n                val multiplier = va.animatedFraction\n                val nextLocation = LatLng(\n                    multiplier * currentLatLng!!.latitude + (1 - multiplier) * previousLatLng!!.latitude,\n                    multiplier * currentLatLng!!.longitude + (1 - multiplier) * previousLatLng!!.longitude\n                )\n                movingCabMarker?.position = nextLocation\n                val rotation = MapUtils.getRotation(previousLatLng!!, nextLocation)\n                if (!rotation.isNaN()) {\n                    movingCabMarker?.rotation = rotation\n                }\n                movingCabMarker?.setAnchor(0.5f, 0.5f)\n                animateCamera(nextLocation)\n            }\n        }\n        valueAnimator.start()\n    }\n}</code></pre><p class="graf--p">Now, run the application and you will see the correct orientation of the car as it moves across the path. The animation is also looking perfect.</p><h4 class="graf--h3">Project Source Code and What next?</h4><p class="graf--p"><a class="markup--anchor" target="_blank" href="https://github.com/MindorksOpenSource/Uber-Car-Animation-Android">You can find the complete project from here.</a></p><p class="graf--p">In this tutorial, we have animated the car just like in the Uber app. Up next, you can learn to build a <b class="graf--bold"><a class="markup--anchor" target="_blank" href="https://github.com/MindorksOpenSource/ridesharing-uber-lyft-app">ride-sharing Android Taxi Clone App like Uber, Lyft</a></b> - Open-Source Project By <b class="graf--bold"><a class="markup--anchor" target="_blank" href="https://mindorks.com/">MindOrks</a></b>.</p><p class="graf--p"><a class="markup--anchor" target="_blank" href="https://github.com/MindorksOpenSource">You can find more Open-Source projects by MindOrks from here</a>.</p><p class="graf--p"><span class=""><a class="markup--anchor" target="_blank" href="https://afteracademy.com/tech-interview">Have a look at our Interview Kit for company preparation.</a></span></p><p class="graf--p">Do share this tutorial with your fellow developers to spread the knowledge. You can read more blogs on Android on our <span class=""><a class="markup--anchor" target="_blank" href="https://blog.mindorks.com/">blogging website</a></span>.</p><p class="graf--p"><b class="graf--bold"><span class=""><a class="markup--anchor" target="_blank" href="https://bootcamp.mindorks.com/">Apply Now: MindOrks Android Online Course and Learn Advanced Android</a></span></b></p><p class="graf--p">Happy Learning :)</p><p class="graf--p"><b class="graf--bold">Team MindOrks!</b></p><p class="graf--p"><b class="graf--bold">Also, Let’s connect on</b> <b class="graf--bold"><span class=""><a class="markup--anchor" target="_blank" href="https://twitter.com/hiii_sumit">Twitter</a></span>,</b> <b class="graf--bold"><span class=""><a class="markup--anchor" target="_blank" href="https://www.linkedin.com/in/mishra3452/">Linkedin</a></span>,</b> <b class="graf--bold"><span class=""><a class="markup--anchor" target="_blank" href="https://github.com/mishra3452">Github</a></span>, and</b> <b class="graf--bold"><span class=""><a class="markup--anchor" target="_blank" href="https://www.facebook.com/mishra3452">Facebook</a></span></b></p>',author:17146,img_url:"/images/how-to-add-uber-car-animation-in-android-app-banner.jpg",blog_url:"how-to-add-uber-car-animation-in-android-app",likes:0,rank:0,category:1,published_at:"2nd April 2020"},author:{id:17146,name:"Sumit Mishra",google_profile_pic:"https://lh3.googleusercontent.com/a-/AOh14GiHP4JrkmlLjuz_uG1g4E0MhTUClSNytqB8o-pxCA=s96-c?sz=300",fb_profile_pic:null,profile_tagline:"Software Development Engineer at MindOrks",fb_profile_url:"https://www.facebook.com/mishra3452",google_plus_profile_url:null,twitter_profile_url:"https://twitter.com/hiii_sumit",github_profile_url:"https://github.com/mishra3452",linkedin_profile_url:"https://www.linkedin.com/in/sumit-mishra-a15499135/"},isFetching:!1,similarBlogs:[{id:284,title:"Animation in Android - Android Tutorial",description:"In this blog, we will learn how to use Animation in our Andoird Application. Animations are used to convey the message in a better way. It helps in improving the user experience. So, this blog is all about Animations in Android. So, let's learn about Animation.",author:14897,img_url:"/images/animation-in-android-banner.png",blog_url:"animation-in-android-tutorial",likes:0,rank:0,category:1,published_at:"24th June 2019",score:2.8142664432525635},{id:428,title:"Getting started with Lottie Animation in Android",description:"In this blog, we are going to understand how to get started with the Lottie Animation library in Android. We will learn and build an application using Lottie.",author:3003,img_url:"/images/getting-started-with-lottie-banner.png",blog_url:"getting-started-with-lottie-animation-in-android",likes:0,rank:0,category:1,published_at:"28th April 2020",score:2.805088996887207},{id:297,title:"Integrating Android Google’s reCAPTCHA in Android App",description:"In this blog, we will learn how to implement Google's reCAPTCHA in our Android application. reCAPTCHA is used to verify if the user is a Human Begin or some robot or bot.",author:17146,img_url:"/images/integrating-android-google-re-captcha-in-android-app-banner-d717bffad515418a.png",blog_url:"integrating-android-google-re-captcha-in-android-app",likes:0,rank:0,category:1,published_at:"18th July 2019",score:1.118438482284546},{id:252,title:"Implementing in-app updates on Android",description:"In this blog, we will learn about the in-app update feature in your Android app. In-app update is a feature that is used to download the update of the app without using the play store. We will see how to use the flexible and immediate in-app update in our app.",author:14897,img_url:"/images/in-app-updates-android-banner.png",blog_url:"implementing-in-app-updates-on-android",likes:0,rank:0,category:1,published_at:"25th May 2019",score:1.1092609167099},{id:315,title:"How to build a Modular Android App Architecture?",description:"In this blog, we will learn how can we Build a Modular Android App Architecture. We will learn about dynamic-feature and dynamic delivery. We will also learn how can we use a library module to modularise the app's architecture",author:9959,img_url:"/images/banner-modular-arch.png",blog_url:"how-to-build-a-modular-android-app-architecture",likes:0,rank:0,category:1,published_at:"19th August 2019",score:1.1092609167099},{id:327,title:"Improving Android app performance with Benchmarking",description:"In this blog, we will learn how to improve Android app performance with Benchmarking. Benchmarking is a way to measure the code that you have written for your app. For the process of benchmarking, we have one library called Jetpack Benchmark. So, we will lean each and everything related to benchmarking.",author:14897,img_url:"/images/improving-android-app-performance-with-benchmarking-banner.png",blog_url:"improving-android-app-performance-with-benchmarking",likes:0,rank:0,category:1,published_at:"13th September 2019",score:1.1092609167099}],isSimilarBlogsFetching:!1},loginData:{data:null,isLoggingIn:!1,isLoggingOut:!1,loginState:!1,isForcedLogout:!1,isTokenRefreshed:!1,isRedirectHome:!1,message:""},updatesData:{news:null,inspirations:null,isNewsFetching:!0,isInspirationsFetching:!0},blogEditorData:{blogId:null,blogDetailsFormData:{title:"",description:"",imgUrl:"",blogUrl:"",category:"",categories:[],isWriting:!1,isTitleError:!1,isDescriptionError:!1,isImgUrlError:!1,isBlogUrlError:!1,isCategoryError:!1,isUploadingImage:!1,uploadedImageUrl:null},editorState:null,editorText:null,successMessage:null,errorMessage:null,isSending:!1,isMsgToShow:!1,isPublished:!1,isSubmitted:!1,isDraft:!0,isEditOfExistingBlog:!1,isFetchingBlogCategories:!1,isUploadingImage:!1,uploadedImageUrl:null},myBlogsData:{data:null,isSubmittedBlogsFetching:!0,isDraftBlogsFetching:!0,isPublishedBlogsFetching:!0,successMessage:null,errorMessage:null,isMsgToShow:!1,tabNames:["drafts","submissions","published"],selectedTab:"drafts",isFetchingBlog:!1,isDeletingBlog:!1,openEditorPage:!1},profilePreviewData:{profile:null,blogs:null,isFetchingProfile:!1,isFetchingAuthorBlogs:!1,successMessage:null,errorMessage:null,isMsgToShow:!1,isUserNotRegistered:!1,redirectToMyProfileEdit:!1},profileEditableData:{userId:null,name:null,fbProfilePicUrl:null,googleProfilePicUrl:null,profileFormData:{tagline:"",fbProfileUrl:"",googlePlusProfileUrl:"",twitterProfileUrl:"",githubProfileUrl:"",linkedinProfileUrl:"",isWriting:!1,isTaglineError:!1,isFbProfileUrlError:!1,isGooglePlusProfileUrlError:!1,isTwitterProfileUrlError:!1,isGithubProfileUrlError:!1,isLinkedinProfileUrlError:!1},isSavingProfile:!1,successMessage:null,errorMessage:null,isMsgToShow:!1,redirectToProfilePreview:!1},submitBlogData:{formData:{email:"",name:"",link:"",isWriting:!1,isNameError:!1,isEmailError:!1,isLinkError:!1,dismissMsg:!1},successMessage:null,errorMessage:null,isSubmitting:!1},advertisementsData:{data:{},isLoading:!1},recaptchaData:{verified:!1,successMessage:null,errorMessage:null},blogSearchData:{searches:null,isSearching:!1}}
  </script>
  <script async="" src="https://www.google-analytics.com/analytics.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-91686131-1","auto"),ga("require","cleanUrlTracker"),ga("require","eventTracker"),ga("require","impressionTracker"),ga("require","outboundLinkTracker"),ga("require","urlChangeTracker"),ga("require","maxScrollTracker"),ga("require","mediaQueryTracker"),ga("require","outboundFormTracker"),ga("require","outboundLinkTracker"),ga("require","pageVisibilityTracker"),ga("require","socialWidgetTracker"),ga("require","urlChangeTracker"),ga("send","pageview")
  </script>
  <script defer="defer" src="/assets/autotrack.js" type="text/javascript">
  </script>
  <script src="/assets/highlight.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/vendor-bundle-1.8.6.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/app-bundle-1.8.6.js" type="text/javascript">
  </script>
 </head>
 <body>
  <div id="root">
   <div class="screen app-load-content" data-reactroot="">
    <div class="ui centered grid">
     <div class="row" style="padding:0">
      <div class="ui fixed menu navbar huge borderless grid" style="background-color:#fff;height:60px">
      </div>
     </div>
     <div class="centered computer only row" style="padding:0">
      <div class="ui fixed top menu navbar huge borderless grid header-container" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="right menu">
        <a class="item" href="https://janisharali.com" target="_blank">
         Mentor Ali
        </a>
        <a class="item" href="https://amitshekhar.me" target="_blank">
         Mentor Amit
        </a>
       </div>
      </div>
     </div>
     <div class="tablet only mobile only row" style="padding:0">
      <div class="ui fixed top navbar huge menu borderless" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="item">
       </div>
      </div>
     </div>
    </div>
    <div class="header-height">
    </div>
    <div aria-live="assertive" class="redux-toastr">
     <div>
      <div class="top-left">
      </div>
      <div class="top-right">
      </div>
      <div class="top-center">
      </div>
      <div class="bottom-left">
      </div>
      <div class="bottom-right">
      </div>
      <div class="bottom-center">
      </div>
     </div>
    </div>
    <div class="content-container theme">
     <div class="ui centered one column grid" style="padding-bottom:80px;background-color:#fff">
      <div class="ten wide computer fifteen wide mobile fifteen wide tablet column" style="margin-top:50px">
       <div>
        <div class="blog-page-author">
         <div class="ui small header">
          <img alt="Sumit Mishra" class="ui circular image" src="https://lh3.googleusercontent.com/a-/AOh14GiHP4JrkmlLjuz_uG1g4E0MhTUClSNytqB8o-pxCA=s96-c?sz=300"/>
          <div class="content">
           Sumit Mishra
           <div class="sub header" style="margin-top:5px">
            2nd April 2020
           </div>
          </div>
         </div>
        </div>
        <div id="content">
         <article class="template">
          <div class="postContent">
           <div class="notesSource">
            <div class="postField postField--body" id="editor">
             <section class="section--first section--last">
              <div class="section-divider layoutSingleColumn-template">
               <hr class="section-divider"/>
              </div>
              <div class="section-content">
               <div class="section-inner layoutSingleColumn-template">
                <div>
                 <h1 class="graf--h1">
                  How to Add Uber Car Animation in Android App?
                 </h1>
                 <div class="graf-image graf-caption">
                  <img alt="How to Add Uber Car Animation in Android App?" class="graf-image" src="/images/how-to-add-uber-car-animation-in-android-app-banner.jpg"/>
                 </div>
                 <p class="graf--p">
                  We all must have used the Uber or Lyft or some other cab sharing applications. Apart from picking and dropping you from your source to destination, the best part that I like the most about the Uber app is the movement of the car when it comes to our source or when it goes to our destination and I know, most of you also like the same animation. So, in this tutorial, we are going to build a project that will show how to add Uber car animation in the Android app.
                 </p>
                 <p class="graf--p">
                  We will discuss the below in this blog:
                 </p>
                 <ul>
                  <li>
                   Project Setup
                  </li>
                  <li>
                   Setting up Google Map
                  </li>
                  <li>
                   Setting Project Structure
                  </li>
                  <li>
                   Adding the Origin and Destination marker and drawing a path between the Origin and Destination on the map
                  </li>
                  <li>
                   Moving the car icon from Origin to Destination
                  </li>
                  <li>
                   Project Source Code and What next?
                  </li>
                 </ul>
                 <p class="graf--p">
                  So, let's get started.
                 </p>
                 <h4 class="graf--h3">
                  Project Setup
                 </h4>
                 <p class="graf--p">
                  Here, we are going to set up the Android Project:
                 </p>
                 <ul>
                  <li>
                   Start a new Android Studio Project
                  </li>
                  <li>
                   Select Empty Activity and Next
                  </li>
                  <li>
                   Name: Uber-Car-Animation-Android
                  </li>
                  <li>
                   Package name: com.mindorks.example.ubercaranimation
                  </li>
                  <li>
                   Language: Kotlin
                  </li>
                  <li>
                   Finish
                  </li>
                  <li>
                   Your starting project is ready now
                  </li>
                 </ul>
                 <h4 class="graf--h3">
                  Setting up Google Map
                 </h4>
                 <p class="graf--p">
                  In this project, we are going to show the car animation on the Google Map and in order to use the Google Map in our application, we need an API key with Map feature enabled.
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Getting an API key and enabling :
                  </b>
                 </p>
                 <ol>
                  <li>
                   Visit the
                   <a class="markup--anchor" href="https://cloud.google.com/console/google/maps-apis/overview" target="_blank">
                    Google Cloud Platform Console
                   </a>
                   .
                  </li>
                  <li>
                   Click the project drop-down and select or create the project for which you want to add an API key.
                  </li>
                  <li>
                   Click the menu button and select
                   <b class="graf--bold">
                    APIs &amp; Services &gt; Credentials
                   </b>
                   .
                  </li>
                  <li>
                   On the
                   <b class="graf--bold">
                    Credentials
                   </b>
                   page, click
                   <b class="graf--bold">
                    Create credentials &gt; API key
                   </b>
                   .
                   <br/>
                   The
                   <b class="graf--bold">
                    API key created
                   </b>
                   dialog displays your newly created API key.
                  </li>
                  <li>
                   Copy the API key and keep it somewhere.
                  </li>
                  <li>
                   Again, click the menu button and select
                   <b class="graf--bold">
                    APIs &amp; Services &gt; Library
                   </b>
                   .
                  </li>
                  <li>
                   Search for "
                   <b class="graf--bold">
                    Map SDK for Android
                   </b>
                   " and enable it.
                  </li>
                  <li>
                   Click
                   <b class="graf--bold">
                    Close.
                   </b>
                   <br/>
                   The new API key is listed on the
                   <b class="graf--bold">
                    Credentials
                   </b>
                   page under
                   <b class="graf--bold">
                    API keys
                   </b>
                   .
                   <br/>
                   (Remember to
                   <a class="markup--anchor" href="https://developers.google.com/maps/documentation/directions/get-api-key#restrict_key" target="_blank">
                    restrict the API key
                   </a>
                   before using it in production.)
                  </li>
                 </ol>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Adding API key in the AndroidManifest file:
                  </b>
                 </p>
                 <p class="graf--p">
                  Open the
                  <code class="graf--code-inline">
                   AndroidManifest.xml
                  </code>
                  file of your Android project and add your API key in the
                  <code class="graf--code-inline">
                   meta-data
                  </code>
                  tag under
                  <code class="graf--code-inline">
                   application
                  </code>
                  tag;
                 </p>
                 <pre><code class="language-java graf graf--code">&lt;application&gt;
    &lt;meta-data
        android:name="com.google.android.geo.API_KEY"
        android:value="PASTE_YOUR_API_KEY_HERE" /&gt;
    ...
&lt;/application&gt;</code></pre>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Adding Google Map fragment in the
                   <code class="graf--code-inline">
                    activity_main.xml
                   </code>
                   file:
                  </b>
                 </p>
                 <p class="graf--p">
                  Open the
                  <code class="graf--code-inline">
                   activity_main.xml
                  </code>
                  file and add the Google Map fragment in it:
                 </p>
                 <pre><code class="language-java graf graf--code">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;fragment xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.SupportMapFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" /&gt;</code></pre>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Setting up the Google Map in
                   <code class="graf--code-inline">
                    MainActivity.kt
                   </code>
                   :
                  </b>
                 </p>
                 <p class="graf--p">
                  Now, we need to add the map fragment. Also, to use Google Map in your application, you need to implement the
                  <code class="graf--code-inline">
                   OnMapReadyCallback
                  </code>
                  interface and this interface contains
                  <code class="graf--code-inline">
                   onMapReady()
                  </code>
                  method, which is called when the map is loaded. So, the code for the
                  <code class="graf--code-inline">
                   MainActivity.kt
                  </code>
                  file will be:
                 </p>
                 <pre><code class="language-java graf graf--code">class MainActivity : AppCompatActivity(), OnMapReadyCallback {

    private lateinit var googleMap: GoogleMap

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        val mapFragment = supportFragmentManager
            .findFragmentById(R.id.map) as SupportMapFragment
        mapFragment.getMapAsync(this)
    }

    override fun onMapReady(googleMap: GoogleMap) {
        this.googleMap = googleMap
    }

}</code></pre>
                 <p class="graf--p">
                  Run the application and see if Google Map is visible in the App or not.
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Showing some default location on the Google Map:
                  </b>
                 </p>
                 <p class="graf--p">
                  By default, some random positions will be visible in the Google Map, but we can set our location on the map or some other location when the map gets loaded.
                 </p>
                 <p class="graf--p">
                  In this example, we will be using
                  <code class="graf--code-inline">
                   LatLng(28.435350000000003, 77.11368)
                  </code>
                  location as the default location, when the app starts. So, we need to make two functions
                  <code class="graf--code-inline">
                   moveCamera()
                  </code>
                  and
                  <code class="graf--code-inline">
                   animateCamera()
                  </code>
                  . The
                  <code class="graf--code-inline">
                   moveCamera()
                  </code>
                  method, we will be used to reposition the camera to some latitude and longitude. While the
                  <code class="graf--code-inline">
                   animateCamera()
                  </code>
                  method will be used to animate the movement of the camera from the current position to some new position. So, add the below two methods:
                 </p>
                 <pre><code class="language-java graf graf--code">private fun moveCamera(latLng: LatLng) {
    googleMap.moveCamera(CameraUpdateFactory.newLatLng(latLng))
}

private fun animateCamera(latLng: LatLng) {
    val cameraPosition = CameraPosition.Builder().target(latLng).zoom(15.5f).build()
    googleMap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition))
}</code></pre>
                 <p class="graf--p">
                  Make another function
                  <code class="graf--code-inline">
                   showDefaultLocaitonOnMap()
                  </code>
                  which will take one LatLng and show that location on the map by calling the
                  <code class="graf--code-inline">
                   moveCamera
                  </code>
                  and
                  <code class="graf--code-inline">
                   animateCamera
                  </code>
                  function:
                 </p>
                 <pre><code class="language-java graf graf--code">private fun showDefaultLocationOnMap(latLng: LatLng) {
    moveCamera(latLng)
    animateCamera(latLng)
}</code></pre>
                 <p class="graf--p">
                  Now, call the above function from the
                  <code class="graf--code-inline">
                   onMapReady()
                  </code>
                  method and pass some
                  <code class="graf--code-inline">
                   LatLng
                  </code>
                  to it:
                 </p>
                 <pre><code class="language-java graf graf--code">private lateinit var defaultLocation: LatLng

override fun onMapReady(googleMap: GoogleMap) {
    this.googleMap = googleMap
    defaultLocation = LatLng(28.435350000000003, 77.11368)
    showDefaultLocationOnMap(defaultLocation)

}</code></pre>
                 <p class="graf--p">
                  Run the application and see if the
                  <code class="graf--code-inline">
                   LatLng(28.435350000000003, 77.11368)
                  </code>
                  is displayed or not.
                 </p>
                 <h4 class="graf--h3">
                  Setting Project Structure
                 </h4>
                 <p class="graf--p">
                  In this part, we will structure our project to enhance the readability of the project.
                 </p>
                 <ul>
                  <li>
                   In the
                   <code class="graf--code-inline">
                    com.minidorks.example.ubercaranimation
                   </code>
                   package, add one
                   <code class="graf--code-inline">
                    util
                   </code>
                   package(right-click on com.mindorks.example.ubercaranimation &gt; new &gt; package). The utils package will contain all the utility classes used in the project.
                  </li>
                  <li>
                   In the
                   <code class="graf--code-inline">
                    util
                   </code>
                   package, add one Object class named
                   <code class="graf--code-inline">
                    AnimationUtils
                   </code>
                   (right-click on utils &gt; new &gt; Kotlin file/class &gt; select object). The
                   <code class="graf--code-inline">
                    AnimationUtils
                   </code>
                   will contain all the Animation related functions.
                  </li>
                  <li>
                   Again in the
                   <code class="graf--code-inline">
                    util
                   </code>
                   package, add one Object class named
                   <code class="graf--code-inline">
                    MapUtils
                   </code>
                   . This will contain all the functions related to Map.
                  </li>
                 </ul>
                 <p class="graf--p">
                  The following is our project structure:
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="How to Add Uber Car Animation in Android App?" class="graf-image" src="/images/how-to-add-uber-car-animation-in-android-app-project-structure.png"/>
                 </div>
                 <p class="graf--p">
                  Now, we are done with all the setup part. Let's move on to the functionality part of the application.
                 </p>
                 <h4 class="graf--h3">
                  Adding the Origin and Destination marker and drawing a path between the Origin and Destination on the map
                 </h4>
                 <p class="graf--p">
                  In a real project, you will get a list of locations from the server. These locations are nothing but
                  <code class="graf--code-inline">
                   LatLng
                  </code>
                  of various points present in between the source and destination. These locations are used to draw a path between the source and the destination.
                 </p>
                 <p class="graf--p">
                  In our project, we will be using some hard-coded values of
                  <code class="graf--code-inline">
                   LatLng
                  </code>
                  . So, in the
                  <code class="graf--code-inline">
                   MapUtils
                  </code>
                  class, create a function
                  <code class="graf--code-inline">
                   getListOfLocations()
                  </code>
                  that will return a list of
                  <code class="graf--code-inline">
                   LatLng
                  </code>
                  that corresponds to a path.
                 </p>
                 <pre><code class="language-java graf graf--code">fun getListOfLocations(): ArrayList&lt;LatLng&gt; {
    val locationList = ArrayList&lt;LatLng&gt;()
    locationList.add(LatLng(28.436970000000002, 77.11272000000001))
    locationList.add(LatLng(28.43635, 77.11289000000001))
    locationList.add(LatLng(28.4353, 77.11317000000001))
    locationList.add(LatLng(28.435280000000002, 77.11332))
    locationList.add(LatLng(28.435350000000003, 77.11368))
    locationList.add(LatLng(28.4356, 77.11498))
    locationList.add(LatLng(28.435660000000002, 77.11519000000001))
    locationList.add(LatLng(28.43568, 77.11521))
    locationList.add(LatLng(28.436580000000003, 77.11499))
    locationList.add(LatLng(28.436590000000002, 77.11507))
    return locationList
}</code></pre>
                 <p class="graf--p">
                  Now, we have a list of LatLng and with the help of these LatLng, we can draw a path between the Origin and the Destination. We will use
                  <a class="markup--anchor" href="https://developers.google.com/android/reference/com/google/android/gms/maps/model/Polyline" target="_blank">
                   Polyline
                  </a>
                  , which is a list of points, where line segments are drawn between consecutive points.
                 </p>
                 <p class="graf--p">
                  Also, we will be drawing two polylines, one of grey color and another black color. The basic idea is to draw the grey line first and then draw the black line by sowing some animation.
                 </p>
                 <p class="graf--p">
                  So, create a function named
                  <code class="graf--code-inline">
                   showPath()
                  </code>
                  that will take a list of
                  <code class="graf--code-inline">
                   LatLng
                  </code>
                  and this function will be used to draw a path between origin and destination by using the
                  <code class="graf--code-inline">
                   addPolyline()
                  </code>
                  method.
                 </p>
                 <pre><code class="language-java graf graf--code">private var grayPolyline: Polyline? = null
private var blackPolyline: Polyline? = null


private fun showPath(latLngList: ArrayList&lt;LatLng&gt;) {
    val builder = LatLngBounds.Builder()
    for (latLng in latLngList) {
        builder.include(latLng)
    }
    // this is used to set the bound of the Map
    val bounds = builder.build()
    googleMap.animateCamera(CameraUpdateFactory.newLatLngBounds(bounds, 2))

    val polylineOptions = PolylineOptions()
    polylineOptions.color(Color.GRAY)
    polylineOptions.width(5f)
    polylineOptions.addAll(latLngList)
    grayPolyline = googleMap.addPolyline(polylineOptions)

    val blackPolylineOptions = PolylineOptions()
    blackPolylineOptions.color(Color.BLACK)
    blackPolylineOptions.width(5f)
    blackPolyline = googleMap.addPolyline(blackPolylineOptions)

}</code></pre>
                 <p class="graf--p">
                  In the above code, we have used bound in the Google Map. It is an area that is created by using the
                  <code class="graf--code-inline">
                   LatLng
                  </code>
                  we have.
                 </p>
                 <p class="graf--p">
                  The path is ready. Now, we need to add the origin and destination marker at the starting and the endpoint of the path. For this, we will draw a rectangle black marker as used in the Uber app for Origin and Destination marker. We will draw this marker with the help of
                  <code class="graf--code-inline">
                   Canvas
                  </code>
                  .
                 </p>
                 <p class="graf--p">
                  So, in the
                  <code class="graf--code-inline">
                   MapUtils
                  </code>
                  class, add one method named
                  <code class="graf--code-inline">
                   getOriginDestinationMarkerBitmap()
                  </code>
                  which will return a
                  <code class="graf--code-inline">
                   Bitmap
                  </code>
                  .
                 </p>
                 <pre><code class="language-java graf graf--code">fun getOriginDestinationMarkerBitmap(): Bitmap {
    val height = 20
    val width = 20
    val bitmap = Bitmap.createBitmap(height, width, Bitmap.Config.RGB_565)
    val canvas = Canvas(bitmap)
    val paint = Paint()
    paint.color = Color.BLACK
    paint.style = Paint.Style.FILL
    paint.isAntiAlias = true
    canvas.drawRect(0F, 0F, width.toFloat(), height.toFloat(), paint)
    return bitmap
}</code></pre>
                 <p class="graf--p">
                  The Bitmap for the marker is ready. Now, we can add the marker on the map by using the
                  <code class="graf--code-inline">
                   addMarker()
                  </code>
                  method of Google Map. In the
                  <code class="graf--code-inline">
                   MainActivity.kt
                  </code>
                  file, add one function named
                  <code class="graf--code-inline">
                   addOriginDestinationMarkerAndGet()
                  </code>
                  which will take a
                  <code class="graf--code-inline">
                   LatLng
                  </code>
                  as input and return a
                  <code class="graf--code-inline">
                   Marker
                  </code>
                  :
                 </p>
                 <pre><code class="language-java graf graf--code">private fun addOriginDestinationMarkerAndGet(latLng: LatLng): Marker {
    val bitmapDescriptor =
        BitmapDescriptorFactory.fromBitmap(MapUtils.getOriginDestinationMarkerBitmap())
    return googleMap.addMarker(
        MarkerOptions().position(latLng).flat(true).icon(bitmapDescriptor)
    )
}</code></pre>
                 <p class="graf--p">
                  Now, we need to call the above method from the
                  <code class="graf--code-inline">
                   showPath()
                  </code>
                  method to draw the origin and destination marker. For the origin marker, the
                  <code class="graf--code-inline">
                   LatLng
                  </code>
                  will be the first value of the
                  <code class="graf--code-inline">
                   latLngList
                  </code>
                  and for the destination marker, the
                  <code class="graf--code-inline">
                   LatLng
                  </code>
                  will be the last value of the
                  <code class="graf--code-inline">
                   latLngList
                  </code>
                  .
                 </p>
                 <pre><code class="language-java graf graf--code">private var originMarker: Marker? = null
private var destinationMarker: Marker? = null

private fun showPath(latLngList: ArrayList&lt;LatLng&gt;) {
    ...

    originMarker = addOriginDestinationMarkerAndGet(latLngList[0])
    originMarker?.setAnchor(0.5f, 0.5f)
    destinationMarker = addOriginDestinationMarkerAndGet(latLngList[latLngList.size - 1])
    destinationMarker?.setAnchor(0.5f, 0.5f)

}</code></pre>
                 <p class="graf--p">
                  In the above code, we are using the
                  <code class="graf--code-inline">
                   setAnchor()
                  </code>
                  function which is used to place the marker at the correct position. The following image describes the usage of Anchor:
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="How to Add Uber Car Animation in Android App?" class="graf-image" src="/images/how-to-add-uber-car-animation-in-android-app-anchor.jpg"/>
                 </div>
                 <p class="graf--p">
                  So, are we done with the path of the car? No, one thing is missing i.e. the Animation is missing.
                 </p>
                 <p class="graf--p">
                  Here, we will draw the grey line first and then draw the black line in a duration of 4000ms i.e. 4 seconds. When we draw the grey line then we have a list of points also because a line is a combination of points. After that, we will use
                  <code class="graf--code-inline">
                   LinearInterpolator
                  </code>
                  that will give some percentage between (0, 100) every 4 seconds. So, after every 4 sec, we will draw some part of the line with the help of the interpolator value and some index from the points of the grey line and this seems like we are animating the black line over the grey line.
                 </p>
                 <p class="graf--p">
                  In the
                  <code class="graf--code-inline">
                   AnimationUtils
                  </code>
                  class, add one function named
                  <code class="graf--code-inline">
                   polylineAnimator
                  </code>
                  that will return an interpolator value:
                 </p>
                 <pre><code class="language-java graf graf--code">fun polylineAnimator(): ValueAnimator {
    val valueAnimator = ValueAnimator.ofInt(0, 100)
    valueAnimator.interpolator = LinearInterpolator()
    valueAnimator.duration = 4000
    return valueAnimator
}</code></pre>
                 <p class="graf--p">
                  Now, we will use the above function in the
                  <code class="graf--code-inline">
                   showPath
                  </code>
                  method to show the animation of the black path over the grey path:
                 </p>
                 <pre><code class="language-java graf graf--code">private fun showPath(latLngList: ArrayList&lt;LatLng&gt;) {
    ...

    val polylineAnimator = AnimationUtils.polylineAnimator()
    polylineAnimator.addUpdateListener { valueAnimator -&gt;
        val percentValue = (valueAnimator.animatedValue as Int)
        val index = (grayPolyline?.points!!.size) * (percentValue / 100.0f).toInt()
        blackPolyline?.points = grayPolyline?.points!!.subList(0, index)
    }
    polylineAnimator.start()
}</code></pre>
                 <p class="graf--p">
                  That's it, we are done with the animation of the black path and addition of marker on the path. Now, let's see how to show the movement of the car from source to destination.
                 </p>
                 <h4 class="graf--h3">
                  Moving the car icon from Origin to Destination
                 </h4>
                 <p class="graf--p">
                  In a real project, the server will be continuously sending the current location of the car and this location is updated on the path that is already there on the map.
                 </p>
                 <p class="graf--p">
                  In our example, we will be using the locations returned by the
                  <code class="graf--code-inline">
                   getListOfLocations()
                  </code>
                  function of the
                  <code class="graf--code-inline">
                   MapUtils
                  </code>
                  class. We will take one location at a time and then update the location of the car on the map.
                 </p>
                 <p class="graf--p">
                  So, the first thing that we need is the car icon. I have a car icon in my
                  <code class="graf--code-inline">
                   drawable
                  </code>
                  folder having name
                  <i class="graf--italic">
                   ic_car.png
                  </i>
                  . In the
                  <code class="graf--code-inline">
                   MapUtils
                  </code>
                  class, make a function named
                  <code class="graf--code-inline">
                   getCarBitmap
                  </code>
                  that will return the Bitmap of a car:
                 </p>
                 <pre><code class="language-java graf graf--code">fun getCarBitmap(context: Context): Bitmap {
    val bitmap = BitmapFactory.decodeResource(context.resources, R.drawable.ic_car)
    return Bitmap.createScaledBitmap(bitmap, 50, 100, false)
}</code></pre>
                 <p class="graf--p">
                  Just like the animation of the black line while drawing the path, here also, we will use the same logic to animate the car icon using the
                  <code class="graf--code-inline">
                   LinearInterpolator
                  </code>
                  . So, in the
                  <code class="graf--code-inline">
                   AnimationUtils
                  </code>
                  class, add a function named
                  <code class="graf--code-inline">
                   carAnimator()
                  </code>
                  :
                 </p>
                 <pre><code class="language-java graf graf--code">fun carAnimator(): ValueAnimator {
    val valueAnimator = ValueAnimator.ofFloat(0f, 1f)
    valueAnimator.duration = 3000
    valueAnimator.interpolator = LinearInterpolator()
    return valueAnimator
}</code></pre>
                 <p class="graf--p">
                  Now, in the
                  <code class="graf--code-inline">
                   MainActivity.kt
                  </code>
                  file, create a function named
                  <code class="graf--code-inline">
                   updateCarLocation()
                  </code>
                  that will update the location of the car on the map. Here, we will set the moving car marker and we will use two variables i.e.
                  <code class="graf--code-inline">
                   previousLatLng
                  </code>
                  and
                  <code class="graf--code-inline">
                   currentLatLng
                  </code>
                  . These variables will be used to aminate the car from the previous location to the current location. Initially, nothing will be there in these two variables, so we need to check for that and update accordingly and then call the
                  <code class="graf--code-inline">
                   carAnimator()
                  </code>
                  to animate the car. So, in the
                  <code class="graf--code-inline">
                   updateCarLocation()
                  </code>
                  function, add the below code:
                 </p>
                 <pre><code class="language-java graf graf--code">private var movingCabMarker: Marker? = null
private var previousLatLng: LatLng? = null
private var currentLatLng: LatLng? = null


private fun updateCarLocation(latLng: LatLng) {
    if (movingCabMarker == null) {
        movingCabMarker = addCarMarkerAndGet(latLng)
    }
    if (previousLatLng == null) {
        currentLatLng = latLng
        previousLatLng = currentLatLng
        movingCabMarker?.position = currentLatLng
        movingCabMarker?.setAnchor(0.5f, 0.5f)
        animateCamera(currentLatLng!!)
    } else {
        previousLatLng = currentLatLng
        currentLatLng = latLng
        val valueAnimator = AnimationUtils.carAnimator()
        valueAnimator.addUpdateListener { va -&gt;
            if (currentLatLng != null &amp;&amp; previousLatLng != null) {
                val multiplier = va.animatedFraction
                val nextLocation = LatLng(
                    multiplier * currentLatLng!!.latitude + (1 - multiplier) * previousLatLng!!.latitude,
                    multiplier * currentLatLng!!.longitude + (1 - multiplier) * previousLatLng!!.longitude
                )
                movingCabMarker?.position = nextLocation
                movingCabMarker?.setAnchor(0.5f, 0.5f)
                animateCamera(nextLocation)
            }
        }
        valueAnimator.start()
    }
}</code></pre>
                 <p class="graf--p">
                  Now, you can call the
                  <code class="graf--code-inline">
                   updateCabLocation
                  </code>
                  from the
                  <code class="graf--code-inline">
                   onMapReady
                  </code>
                  method by providing all the locations that you get from the
                  <code class="graf--code-inline">
                   getListOfLocations
                  </code>
                  method. Since we are reading the locations from the array of size 10 and not from the server, the cab position will be updated so fastly that you will never see any animation in between.
                 </p>
                 <p class="graf--p">
                  So, in this project, we will use
                  <code class="graf--code-inline">
                   Handler
                  </code>
                  to delay the location feeding by 5 sec. In the
                  <code class="graf--code-inline">
                   MainActivity.kt
                  </code>
                  file, create a function named
                  <code class="graf--code-inline">
                   showMovingCab()
                  </code>
                  and get the location from the array of 10 elements(you can change this with your array size) and then call the
                  <code class="graf--code-inline">
                   updateCabLocation()
                  </code>
                  .
                 </p>
                 <pre><code class="language-java graf graf--code">private lateinit var handler: Handler
private lateinit var runnable: Runnable


private fun showMovingCab(cabLatLngList: ArrayList&lt;LatLng&gt;) {
    handler = Handler()
    var index = 0
    runnable = Runnable {
        run {
            if (index &lt; 10) {
                updateCarLocation(cabLatLngList[index])
                handler.postDelayed(runnable, 3000)
                ++index
            } else {
                handler.removeCallbacks(runnable)
                Toast.makeText(this@MainActivity, "Trip Ends", Toast.LENGTH_LONG).show()
            }
        }
    }
    handler.postDelayed(runnable, 5000)
}</code></pre>
                 <p class="graf--p">
                  From the
                  <code class="graf--code-inline">
                   onMapReady
                  </code>
                  method, call the above method as:
                 </p>
                 <pre><code class="language-java graf graf--code">override fun onMapReady(googleMap: GoogleMap) {
    this.googleMap = googleMap
    defaultLocation = LatLng(28.435350000000003, 77.11368)
    showDefaultLocationOnMap(defaultLocation)

    Handler().postDelayed(Runnable {
        showPath(MapUtils.getListOfLocations())
        showMovingCab(MapUtils.getListOfLocations())
    }, 3000)
}</code></pre>
                 <p class="graf--p">
                  But if you run the application, then you will see that the orientation of the cab is always fixed. It is moving, but it is not moving with the correct orientation because the car is not rotating correctly.
                 </p>
                 <p class="graf--p">
                  Let's first understand the concept of rotation of marker on Google Map:
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="How to Add Uber Car Animation in Android App?" class="graf-image" src="/images/how-to-add-uber-car-animation-in-android-app-car-rotation-example.jpg"/>
                 </div>
                 <p class="graf--p">
                  In Google Map, the rotation is done in a clockwise manner. By default, the orientation of the cab will be perfect if it moves on the x or y-axis. But what if there is a change in the angle of the cab? In the above image for the drawn path, the angle will be taken as 0 or 360 and this will result in bad orientation. So, we need to find the angle of the cab.
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="How to Add Uber Car Animation in Android App?" class="graf-image" src="/images/how-to-add-uber-car-animation-in-android-app-car-rotation-mathematics.jpg"/>
                 </div>
                 <p class="graf--p">
                  In the above image, we find the angle of the car by applying some mathematics and if the angle is with us, then we can rotate the cab according to our needs.
                 </p>
                 <p class="graf--p">
                  So, in the MapUtils class, add a function named
                  <code class="graf--code-inline">
                   getRotation
                  </code>
                  which takes two locations i.e. start and end and then return the angle between them:
                 </p>
                 <pre><code class="language-java graf graf--code">fun getRotation(start: LatLng, end: LatLng): Float {
    val latDifference: Double = abs(start.latitude - end.latitude)
    val lngDifference: Double = abs(start.longitude - end.longitude)
    var rotation = -1F
    when {
        start.latitude &lt; end.latitude &amp;&amp; start.longitude &lt; end.longitude -&gt; {
            rotation = Math.toDegrees(atan(lngDifference / latDifference)).toFloat()
        }
        start.latitude &gt;= end.latitude &amp;&amp; start.longitude &lt; end.longitude -&gt; {
            rotation = (90 - Math.toDegrees(atan(lngDifference / latDifference)) + 90).toFloat()
        }
        start.latitude &gt;= end.latitude &amp;&amp; start.longitude &gt;= end.longitude -&gt; {
            rotation = (Math.toDegrees(atan(lngDifference / latDifference)) + 180).toFloat()
        }
        start.latitude &lt; end.latitude &amp;&amp; start.longitude &gt;= end.longitude -&gt; {
            rotation =
                (90 - Math.toDegrees(atan(lngDifference / latDifference)) + 270).toFloat()
        }
    }
    return rotation
}</code></pre>
                 <p class="graf--p">
                  Now, we will call the above function in the
                  <code class="graf--code-inline">
                   updateCarLocation
                  </code>
                  function. So, the final code of the
                  <code class="graf--code-inline">
                   updateCarLocation
                  </code>
                  function will be:
                 </p>
                 <pre><code class="language-java graf graf--code">private var movingCabMarker: Marker? = null
private var previousLatLng: LatLng? = null
private var currentLatLng: LatLng? = null


private fun updateCarLocation(latLng: LatLng) {
    if (movingCabMarker == null) {
        movingCabMarker = addCarMarkerAndGet(latLng)
    }
    if (previousLatLng == null) {
        currentLatLng = latLng
        previousLatLng = currentLatLng
        movingCabMarker?.position = currentLatLng
        movingCabMarker?.setAnchor(0.5f, 0.5f)
        animateCamera(currentLatLng!!)
    } else {
        previousLatLng = currentLatLng
        currentLatLng = latLng
        val valueAnimator = AnimationUtils.carAnimator()
        valueAnimator.addUpdateListener { va -&gt;
            if (currentLatLng != null &amp;&amp; previousLatLng != null) {
                val multiplier = va.animatedFraction
                val nextLocation = LatLng(
                    multiplier * currentLatLng!!.latitude + (1 - multiplier) * previousLatLng!!.latitude,
                    multiplier * currentLatLng!!.longitude + (1 - multiplier) * previousLatLng!!.longitude
                )
                movingCabMarker?.position = nextLocation
                val rotation = MapUtils.getRotation(previousLatLng!!, nextLocation)
                if (!rotation.isNaN()) {
                    movingCabMarker?.rotation = rotation
                }
                movingCabMarker?.setAnchor(0.5f, 0.5f)
                animateCamera(nextLocation)
            }
        }
        valueAnimator.start()
    }
}</code></pre>
                 <p class="graf--p">
                  Now, run the application and you will see the correct orientation of the car as it moves across the path. The animation is also looking perfect.
                 </p>
                 <h4 class="graf--h3">
                  Project Source Code and What next?
                 </h4>
                 <p class="graf--p">
                  <a class="markup--anchor" href="https://github.com/MindorksOpenSource/Uber-Car-Animation-Android" target="_blank">
                   You can find the complete project from here.
                  </a>
                 </p>
                 <p class="graf--p">
                  In this tutorial, we have animated the car just like in the Uber app. Up next, you can learn to build a
                  <b class="graf--bold">
                   <a class="markup--anchor" href="https://github.com/MindorksOpenSource/ridesharing-uber-lyft-app" target="_blank">
                    ride-sharing Android Taxi Clone App like Uber, Lyft
                   </a>
                  </b>
                  - Open-Source Project By
                  <b class="graf--bold">
                   <a class="markup--anchor" href="https://mindorks.com/" target="_blank">
                    MindOrks
                   </a>
                  </b>
                  .
                 </p>
                 <p class="graf--p">
                  <a class="markup--anchor" href="https://github.com/MindorksOpenSource" target="_blank">
                   You can find more Open-Source projects by MindOrks from here
                  </a>
                  .
                 </p>
                 <p class="graf--p">
                  <span class="">
                   <a class="markup--anchor" href="https://afteracademy.com/tech-interview" target="_blank">
                    Have a look at our Interview Kit for company preparation.
                   </a>
                  </span>
                 </p>
                 <p class="graf--p">
                  Do share this tutorial with your fellow developers to spread the knowledge. You can read more blogs on Android on our
                  <span class="">
                   <a class="markup--anchor" href="https://blog.mindorks.com/" target="_blank">
                    blogging website
                   </a>
                  </span>
                  .
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   <span class="">
                    <a class="markup--anchor" href="https://bootcamp.mindorks.com/" target="_blank">
                     Apply Now: MindOrks Android Online Course and Learn Advanced Android
                    </a>
                   </span>
                  </b>
                 </p>
                 <p class="graf--p">
                  Happy Learning :)
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Team MindOrks!
                  </b>
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Also, Let’s connect on
                  </b>
                  <b class="graf--bold">
                   <span class="">
                    <a class="markup--anchor" href="https://twitter.com/hiii_sumit" target="_blank">
                     Twitter
                    </a>
                   </span>
                   ,
                  </b>
                  <b class="graf--bold">
                   <span class="">
                    <a class="markup--anchor" href="https://www.linkedin.com/in/mishra3452/" target="_blank">
                     Linkedin
                    </a>
                   </span>
                   ,
                  </b>
                  <b class="graf--bold">
                   <span class="">
                    <a class="markup--anchor" href="https://github.com/mishra3452" target="_blank">
                     Github
                    </a>
                   </span>
                   , and
                  </b>
                  <b class="graf--bold">
                   <span class="">
                    <a class="markup--anchor" href="https://www.facebook.com/mishra3452" target="_blank">
                     Facebook
                    </a>
                   </span>
                  </b>
                 </p>
                </div>
               </div>
              </div>
             </section>
            </div>
           </div>
          </div>
         </article>
        </div>
       </div>
       <div class="ui divider">
       </div>
      </div>
      <div class="stretched fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui large center aligned header" style="padding-top:20px">
        Recommended for You
       </div>
      </div>
      <div class="fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui centered grid">
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/animation-in-android-tutorial/">
          <img alt="Animation in Android - Android Tutorial" class="ui centered image" src="/images/animation-in-android-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Animation in Android - Android Tutorial
           </div>
           <div class="meta">
            24th June 2019
           </div>
           <div class="description">
            In this blog, we will learn how to use Animation in our Andoird Application. Animations are used to convey the message in a better way. It helps in improving the user experience. So, this blog is all about Animations in Android. So, let's learn about Animation.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/getting-started-with-lottie-animation-in-android/">
          <img alt="Getting started with Lottie Animation in Android" class="ui centered image" src="/images/getting-started-with-lottie-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Getting started with Lottie Animation in Android
           </div>
           <div class="meta">
            28th April 2020
           </div>
           <div class="description">
            In this blog, we are going to understand how to get started with the Lottie Animation library in Android. We will learn and build an application using Lottie.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/integrating-android-google-re-captcha-in-android-app/">
          <img alt="Integrating Android Google’s reCAPTCHA in Android App" class="ui centered image" src="/images/integrating-android-google-re-captcha-in-android-app-banner-d717bffad515418a.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Integrating Android Google’s reCAPTCHA in Android App
           </div>
           <div class="meta">
            18th July 2019
           </div>
           <div class="description">
            In this blog, we will learn how to implement Google's reCAPTCHA in our Android application. reCAPTCHA is used to verify if the user is a Human Begin or some robot or bot.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/implementing-in-app-updates-on-android/">
          <img alt="Implementing in-app updates on Android" class="ui centered image" src="/images/in-app-updates-android-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Implementing in-app updates on Android
           </div>
           <div class="meta">
            25th May 2019
           </div>
           <div class="description">
            In this blog, we will learn about the in-app update feature in your Android app. In-app update is a feature that is used to download the update of the app without using the play store. We will see how to use the flexible and immediate in-app update in our app.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/how-to-build-a-modular-android-app-architecture/">
          <img alt="How to build a Modular Android App Architecture?" class="ui centered image" src="/images/banner-modular-arch.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            How to build a Modular Android App Architecture?
           </div>
           <div class="meta">
            19th August 2019
           </div>
           <div class="description">
            In this blog, we will learn how can we Build a Modular Android App Architecture. We will learn about dynamic-feature and dynamic delivery. We will also learn how can we use a library module to modularise the app's architecture
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/improving-android-app-performance-with-benchmarking/">
          <img alt="Improving Android app performance with Benchmarking" class="ui centered image" src="/images/improving-android-app-performance-with-benchmarking-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Improving Android app performance with Benchmarking
           </div>
           <div class="meta">
            13th September 2019
           </div>
           <div class="description">
            In this blog, we will learn how to improve Android app performance with Benchmarking. Benchmarking is a way to measure the code that you have written for your app. For the process of benchmarking, we have one library called Jetpack Benchmark. So, we will lean each and everything related to benchmarking.
           </div>
          </div>
         </a>
        </div>
       </div>
      </div>
     </div>
    </div>
    <div style="background:#fff">
     <footer class="content-container">
      <div class="ui centered padded grid" style="padding-top:40px;background:linear-gradient(to right,#c4e0e0,#e5f1f1)">
       <h2 class="ui huge icon center aligned header">
        <div class="content">
         Connect With Your Mentors
        </div>
       </h2>
       <div class="centered row">
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Janishar Ali" class="ui medium circular image" src="/assets/ali.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://janisharali.com" target="_blank">
             Janishar Ali
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://janisharali.com" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/janisharali" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Amit Shekhar" class="ui medium circular image" src="/assets/amit.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://amitshekhar.me" target="_blank">
             Amit Shekhar
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://amitshekhar.me" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/amitiitbhu" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
      <div class="ui divider" style="margin:unset">
      </div>
      <h5 class="ui header" style="padding:16px;margin:unset;color:#555">
       <i aria-hidden="true" class="copyright icon">
       </i>
       <div class="content">
        Copyright 2022, MindOrks Nextgen Private Limited
       </div>
      </h5>
     </footer>
    </div>
   </div>
  </div>
  <script type="text/javascript">
   window.hljs.initHighlightingOnLoad()
  </script>
 </body>
</html>