<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>
   Understanding ExifInterface
  </title>
  <meta charset="utf-8"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="minimum-scale=1,initial-scale=1,width=device-width,shrink-to-fit=no" name="viewport"/>
  <link href="https://blog.mindorks.com/exifinterface" rel="canonical"/>
  <meta content="986249072156-dabps0lf90smluddrk5rkqsdjghk3hd3.apps.googleusercontent.com" name="google-signin-client_id"/>
  <meta content="android, learn android app development, android app development courses, android blogs, android tutorial" name="keywords"/>
  <meta content="Understanding ExifInterface" property="og:title"/>
  <meta content="website" property="og:type"/>
  <meta content="https://blog.mindorks.com/exifinterface" property="og:url"/>
  <meta content="/images/banner-exifinterface-b0181510d868304d.jpg" property="og:image"/>
  <meta content="In this blog, we are going to learn about ExifInterface and it's usage. We will also learn how to handle image rotation using exifInterface." property="og:description"/>
  <meta content="Understanding ExifInterface" property="twitter:title"/>
  <meta content="In this blog, we are going to learn about ExifInterface and it's usage. We will also learn how to handle image rotation using exifInterface." name="twitter:description"/>
  <meta content="/images/banner-exifinterface-b0181510d868304d.jpg" name="twitter:image:src"/>
  <meta content="summary_large_image" name="twitter:card"/>
  <meta content="@MindorksNextGen" name="twitter:site"/>
  <meta content="In this blog, we are going to learn about ExifInterface and it's usage. We will also learn how to handle image rotation using exifInterface." name="description"/>
  <meta content="1620001391374687" property="fb:app_id"/>
  <link href="/styles/vendor-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link href="/styles/app-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link as="style" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" onload='this.onload=null,this.rel="stylesheet"' rel="preload"/>
  <noscript>
   <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
  </noscript>
  <script type="text/javascript">
     </script>
  <script async="" src="https://www.google-analytics.com/analytics.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-91686131-1","auto"),ga("require","cleanUrlTracker"),ga("require","eventTracker"),ga("require","impressionTracker"),ga("require","outboundLinkTracker"),ga("require","urlChangeTracker"),ga("require","maxScrollTracker"),ga("require","mediaQueryTracker"),ga("require","outboundFormTracker"),ga("require","outboundLinkTracker"),ga("require","pageVisibilityTracker"),ga("require","socialWidgetTracker"),ga("require","urlChangeTracker"),ga("send","pageview")
  </script>
  <script defer="defer" src="/assets/autotrack.js" type="text/javascript">
  </script>
  <script src="/assets/highlight.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/vendor-bundle-1.8.6.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/app-bundle-1.8.6.js" type="text/javascript">
  </script>
 </head>
 <body>
  <div id="root">
   <div class="screen app-load-content" data-reactroot="">
    <div class="ui centered grid">
     <div class="row" style="padding:0">
      <div class="ui fixed menu navbar huge borderless grid" style="background-color:#fff;height:60px">
      </div>
     </div>
     <div class="centered computer only row" style="padding:0">
      <div class="ui fixed top menu navbar huge borderless grid header-container" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="right menu">
        <a class="item" href="https://janisharali.com" target="_blank">
         Mentor Ali
        </a>
        <a class="item" href="https://amitshekhar.me" target="_blank">
         Mentor Amit
        </a>
       </div>
      </div>
     </div>
     <div class="tablet only mobile only row" style="padding:0">
      <div class="ui fixed top navbar huge menu borderless" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="item">
       </div>
      </div>
     </div>
    </div>
    <div class="header-height">
    </div>
    <div aria-live="assertive" class="redux-toastr">
     <div>
      <div class="top-left">
      </div>
      <div class="top-right">
      </div>
      <div class="top-center">
      </div>
      <div class="bottom-left">
      </div>
      <div class="bottom-right">
      </div>
      <div class="bottom-center">
      </div>
     </div>
    </div>
    <div class="content-container theme">
     <div class="ui centered one column grid" style="padding-bottom:80px;background-color:#fff">
      <div class="ten wide computer fifteen wide mobile fifteen wide tablet column" style="margin-top:50px">
       <div>
        <div class="blog-page-author">
         <div class="ui small header">
          <img alt="Shwetha Vasudev" class="ui circular image" src="https://lh3.googleusercontent.com/a-/AOh14GhaMhnt96YUNN_sGizdGjFBXFnoCGRejMHnpG_Id84=s96-c?sz=300"/>
          <div class="content">
           Shwetha Vasudev
           <div class="sub header" style="margin-top:5px">
            3rd November 2020
           </div>
          </div>
         </div>
        </div>
        <div id="content">
         <article class="template">
          <div class="postContent">
           <div class="notesSource">
            <div class="postField postField--body" id="editor">
             <section class="section--first section--last">
              <div class="section-divider layoutSingleColumn-template">
               <hr class="section-divider"/>
              </div>
              <div class="section-content">
               <div class="section-inner layoutSingleColumn-template">
                <div>
                 <h1 class="graf--h1">
                  Understanding ExifInterface
                 </h1>
                 <div class="graf-image graf-caption">
                  <img alt="Banner Exifinterface" class="graf-image" src="/images/banner-exifinterface-b0181510d868304d.jpg"/>
                 </div>
                 <p class="graf--p">
                  We use Images in our apps extensively. For some of the Image Related Applications, all the details of the images are required. But we cannot read the details of the images always directly from the image. There might be needs to know the image details like GPS location, date/time, settings at the time of capture, orientation, etc.
                 </p>
                 <p class="graf--p">
                  Previously we were struggling to get image info, for which we had to separately extract metadata from different methods and read it to understand the Image properties. Even though when we read, the changes to the images like removing GPS tags or changing the orientation would be challenging tasks.
                 </p>
                 <p class="graf--p">
                  The solution for these is Exif files and ExifInterface.
                 </p>
                 <p class="graf--p">
                  Let us understand what EXIF is?
                 </p>
                 <h3 class="graf--h3">
                  What is Exif?
                 </h3>
                 <p class="graf--p">
                  Exif stands for
                  <b class="graf--bold">
                   Exchangeable Image File Format.
                  </b>
                  This is a standard that defines specific information related to an image or other media captured by a camera. It is capable of storing such important data as camera exposure, date/time the image was captured, and even GPS location. The Sample Exif file looks like,
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Exif Data" class="graf-image" src="/images/exif-data-9f886d5105bb4bf7.jpg"/>
                 </div>
                 <p class="graf--p">
                  If you look at the above image, We have attributes like Image length and width, date and time of the image taken, From which device this image was taken, Orientation code, and some of the images attribute like light, white balance, focal length, if the flash was on or not, GPS information of the image i.e lat long of the image where it was taken. By looking at this we can get the complete details of the image. Now you may get a fair idea of EXIF files.
                 </p>
                 <h2 class="graf--h2">
                  ExifInterface in Android
                 </h2>
                 <p class="graf--p">
                  We understood what is Exif and what it contains. Letâ€™s see how can we extract Exif data from images in Android. ExifInterface has been introduced in the android support library since 25.1.0. Even though this has been existing since 7.1, It made sense from android 9+ with all the capabilities provided to the interface. This has been added with 100+ attributes to read the Exif tags of the images including information about the camera itself, the camera settings, orientation, and GPS coordinates. For now, it can only read the Exif of JPEG files or a RAW image file. The supported formats are JPEG, DNG, CR2, NEF, NRW, ARW, RW2, ORF, PEF, SRW, RAF, and HEIF.
                  <br/>
                  If you want to use ExifInterface you need to add the below dependency to your build.gradle.
                 </p>
                 <pre><code class="language-java graf graf--code">  implementation "androidx.exifinterface:exifinterface:1.3.1"</code></pre>
                 <p class="graf--p">
                  One thing that is important to understand with Exif data is that there are no required tags: every tag is optional - some services even specifically strip Exif data. Therefore throughout your code, you should always handle cases where there is no Exif data, either due to no data for a specific attribute or an image format that doesn't support Exif data at all (say, the ubiquitous PNGs or WebP images).
                 </p>
                 <h2 class="graf--h2">
                  How to Read Exif Attributes?
                 </h2>
                 <p class="graf--p">
                  Now let us understand how can we read EXIF attributes for different sources and some of the use cases using ExifInterface. For most attributes, you'd simply use the getAttributeInt(), getAttributeDouble(), or getAttribute() (for Strings) methods as appropriate.
                 </p>
                 <h3 class="graf--h3">
                  <b class="graf--bold">
                   Extracting info from content Uri
                  </b>
                 </h3>
                 <pre><code class="language-java graf graf--code">Uri uri; // the URI you've received from the other app
InputStream in;
try {
    in = getContentResolver().openInputStream(uri);
    ExifInterface exifInterface = new ExifInterface(in);
    // Now you can extract any Exif tag you want
    // Assuming the image is a JPEG or supported raw format
} catch (IOException e) {
    // Handle any errors
} finally {
    if (in != null) {
        try {
            in.close();
        } catch (IOException ignored) {}
    }
}</code></pre>
                 <p class="graf--p">
                  <br/>
                  Note: ExifInterface will not work with remote InputStreams, such as those returned from a HttpURLConnection. It is strongly recommended to only use them with content:// or file:// URIs.
                 </p>
                 <h3 class="graf--h3">
                  For Camera Apps
                 </h3>
                 <p class="graf--p">
                  For Camera apps, after capturing the image writing attributes is more important.  As of now, it's still limited to JPEG images. Using
                  <b class="graf--bold">
                   <i class="graf--italic">
                    ExifInterface
                   </i>
                  </b>
                  we can easily alter the already set JPEG_ORIENTATION, JPEG_GPS_LOCATION, or the equivalent. We can also remove these attributes based on the user's request.
                 </p>
                 <pre><code class="language-java graf graf--code">var  exif  : ExifInterface  = ExifInterface(pictureFile.getAbsolutePath())
exif.setAttribute(ExifInterface.TAG_ORIENTATION, "" + getPhotoOrientation(configurationProvider.getSensorPosition()))
exif.saveAttributes()</code></pre>
                 <h3 class="graf--h3">
                  Handling Orientation
                 </h3>
                 <p class="graf--p">
                  One of the most important attributes when it comes to displaying images is the image orientation, stored in the aptly-named
                  <b class="graf--bold">
                   <i class="graf--italic">
                    TAG_ORIENTATION
                   </i>
                  </b>
                  , which returns one of the
                  <b class="graf--bold">
                   <i class="graf--italic">
                    ORIENTATION_
                   </i>
                  </b>
                  constants. To convert this to a rotation angle, you can post-process the value.
                 </p>
                 <pre><code class="language-java graf graf--code">int rotation = 0;
int orientation = exifInterface.getAttributeInt(
ExifInterface.TAG_ORIENTATION,
ExifInterface.ORIENTATION_UNDEFINED);
switch (orientation) {
    case ExifInterface.ORIENTATION_ROTATE_90:
    rotation = 90;
    break;
    case ExifInterface.ORIENTATION_ROTATE_180:
    rotation = 180;
    break;
    case ExifInterface.ORIENTATION_ROTATE_270:
    rotation = 270;
    break;
}</code></pre>
                 <h3 class="graf--h3">
                  Bitmap rotation using the Exif rotation angle
                 </h3>
                 <p class="graf--p">
                  First, create the ExifInterface:
                 </p>
                 <pre><code class="language-java graf graf--code">ExifInterface exif = new ExifInterface(uri.getPath());</code></pre>
                 <p class="graf--p">
                  Next, find the current rotation:
                 </p>
                 <pre><code class="language-java graf graf--code">int rotation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_UNDEFINED);</code></pre>
                 <p class="graf--p">
                  Convert Exif rotation to degrees:
                 </p>
                 <pre><code class="language-java graf graf--code">int rotationInDegrees = exifToDegrees(rotation);</code></pre>
                 <p class="graf--p">
                  where
                 </p>
                 <pre><code class="language-java graf graf--code">private fun exifToDegrees(exifOrientation: Int): Int {
    if (exifOrientation == ExifInterface.ORIENTATION_ROTATE_90) {
        return 90
    } else if (exifOrientation ==   ExifInterface.ORIENTATION_ROTATE_180) {
        return 180
    } else if (exifOrientation == ExifInterface.ORIENTATION_ROTATE_270) {
        return 270
    }
    return 0
}</code></pre>
                 <p class="graf--p">
                  Then use the image's actual rotation as a reference point to rotate the image using a Matrix.
                 </p>
                 <pre><code class="language-java graf graf--code">Matrix matrix = new Matrix();
if (rotation != 0) {
    matrix.postRotate(rotationInDegrees);
}</code></pre>
                 <p class="graf--p">
                  You create the new rotated image with the Bitmap.createBitmap method that takes a Matrix as a parameter:
                 </p>
                 <pre><code class="language-java graf graf--code">Bitmap.createBitmap(Bitmap source, int x, int y, int width, int height, Matrix m, boolean filter)</code></pre>
                 <p class="graf--p">
                  where
                  <code class="graf--code-inline">
                   matrix
                  </code>
                  holds the new rotation:
                 </p>
                 <pre><code class="language-java graf graf--code">Bitmap adjustedBitmap = Bitmap.createBitmap(sourceBitmap, 0, 0, width, height, matrix, true)</code></pre>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Some of the use cases for how we can use ExifInterface.
                  </b>
                 </p>
                 <ul>
                  <li>
                   ExifInterface is used in writing the image information when the picture is taken. It is also helpful to handle orientation while saving the image to phone storage.
                  </li>
                  <li>
                   We may need to decrease the image size and update the Exif info, for this, we will have to fetch the Exif info and save the updated info back on to the image.
                  </li>
                  <li>
                   ExifInterface is also used to fetch and parse the image headers.
                  </li>
                  <li>
                   Keeping view orientation of the device constant when the device is rotated.
                  </li>
                  <li>
                   Fetching image from the gallery and displaying it with the proper orientation and other attributes with which the image was saved.
                  </li>
                 </ul>
                 <p class="graf--p">
                  This was all about the ExifInterface. We have learned about ExifInterface today.  Hoping to have given some light on the topic.
                 </p>
                 <p class="graf--p">
                  <i class="graf--italic">
                   Keep Learning, Keep Exploring, Keep Growing
                  </i>
                 </p>
                 <p class="graf--p">
                  <i class="graf--italic">
                   Thank you.
                  </i>
                 </p>
                </div>
               </div>
              </div>
             </section>
            </div>
           </div>
          </div>
         </article>
        </div>
       </div>
       <div class="ui divider">
       </div>
      </div>
      <div class="stretched fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui large center aligned header" style="padding-top:20px">
        Recommended for You
       </div>
      </div>
      <div class="fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui centered grid">
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/understanding-density-independent-pixel-sp-dp-dip-in-android/">
          <img alt="Understanding Density Independence Pixel: sp, dp, dip in Android" class="ui centered image" src="/images/understanding_density_independent_pixel.jpg" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Understanding Density Independence Pixel: sp, dp, dip in Android
           </div>
           <div class="meta">
            31st January 2019
           </div>
           <div class="description">
            What is the best measurement unit for designing for Android Screen? Density Independent Pixel, Scaled Independent Pixels, Density Pixels or Pixels.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/location-permissions-in-android-q/">
          <img alt="Understanding and Implementing Permission in Android Q" class="ui centered image" src="/images/location-permission.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Understanding and Implementing Permission in Android Q
           </div>
           <div class="meta">
            11th May 2019
           </div>
           <div class="description">
            In this blog, we will understand the new privacy-based location permission in Android Q and how to implement it in your app.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/understanding-settings-panel-in-android-q/">
          <img alt="Understanding Settings Panels in Android Q" class="ui centered image" src="/images/android-setting.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Understanding Settings Panels in Android Q
           </div>
           <div class="meta">
            14th May 2019
           </div>
           <div class="description">
            In this blog, we will understand the new setting panel which released in Android Q. With Google launching Android Q, Lot of exciting features has also popped up. One amazing feature is Location Service usage and few more.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/understanding-multidex-in-android/">
          <img alt="Understanding Multidex in Android" class="ui centered image" src="/images/understanding-multidex-banner-img.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Understanding Multidex in Android
           </div>
           <div class="meta">
            18th May 2019
           </div>
           <div class="description">
            In this blog, we will learn how to use Multidex in Android. Basically, Multidex is used when we want to add more than 64K methods in our Android project. If we don't use any Multidex for the project having more than 64K methods, then we will encounter DEX error. So, in this blog, we will learn how to use Multidex.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/understanding-the-application-lifecycle-in-android/">
          <img alt="Understanding the Application Lifecycle in Android" class="ui centered image" src="/images/understanding-the-application-lifecycle-in-android-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Understanding the Application Lifecycle in Android
           </div>
           <div class="meta">
            4th June 2019
           </div>
           <div class="description">
            In this blog, we will learn about the Application life cycle in Android. We will learn how to make use of various application states that a particular application has in general.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/understanding-init-block-in-kotlin/">
          <img alt="Understanding Init block in Kotlin" class="ui centered image" src="/images/init-block.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Understanding Init block in Kotlin
           </div>
           <div class="meta">
            6th June 2019
           </div>
           <div class="description">
            In this blog, we will understand about init block and how can we use it.
           </div>
          </div>
         </a>
        </div>
       </div>
      </div>
     </div>
    </div>
    <div style="background:#fff">
     <footer class="content-container">
      <div class="ui centered padded grid" style="padding-top:40px;background:linear-gradient(to right,#c4e0e0,#e5f1f1)">
       <h2 class="ui huge icon center aligned header">
        <div class="content">
         Connect With Your Mentors
        </div>
       </h2>
       <div class="centered row">
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Janishar Ali" class="ui medium circular image" src="/assets/ali.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://janisharali.com" target="_blank">
             Janishar Ali
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://janisharali.com" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/janisharali" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Amit Shekhar" class="ui medium circular image" src="/assets/amit.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://amitshekhar.me" target="_blank">
             Amit Shekhar
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://amitshekhar.me" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/amitiitbhu" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
      <div class="ui divider" style="margin:unset">
      </div>
      <h5 class="ui header" style="padding:16px;margin:unset;color:#555">
       <i aria-hidden="true" class="copyright icon">
       </i>
       <div class="content">
        Copyright 2022, MindOrks Nextgen Private Limited
       </div>
      </h5>
     </footer>
    </div>
   </div>
  </div>
  <script type="text/javascript">
   window.hljs.initHighlightingOnLoad()
  </script>
 </body>
</html>