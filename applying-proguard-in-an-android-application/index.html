<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>
   Mastering ProGuard in Android
  </title>
  <meta charset="utf-8"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="minimum-scale=1,initial-scale=1,width=device-width,shrink-to-fit=no" name="viewport"/>
  <link href="https://blog.mindorks.com/applying-proguard-in-an-android-application" rel="canonical"/>
  <meta content="986249072156-dabps0lf90smluddrk5rkqsdjghk3hd3.apps.googleusercontent.com" name="google-signin-client_id"/>
  <meta content="android, learn android app development, android app development courses, android blogs, android tutorial" name="keywords"/>
  <meta content="Mastering ProGuard in Android" property="og:title"/>
  <meta content="website" property="og:type"/>
  <meta content="https://blog.mindorks.com/applying-proguard-in-an-android-application" property="og:url"/>
  <meta content="/images/proguard-banner-78ab89bdd2cad9b9.png" property="og:image"/>
  <meta content="In this blog, we are going to learn about how to use ProGuard in our project. We will also see real-life examples of how to use Proguard to write better rules." property="og:description"/>
  <meta content="Mastering ProGuard in Android" property="twitter:title"/>
  <meta content="In this blog, we are going to learn about how to use ProGuard in our project. We will also see real-life examples of how to use Proguard to write better rules." name="twitter:description"/>
  <meta content="/images/proguard-banner-78ab89bdd2cad9b9.png" name="twitter:image:src"/>
  <meta content="summary_large_image" name="twitter:card"/>
  <meta content="@MindorksNextGen" name="twitter:site"/>
  <meta content="In this blog, we are going to learn about how to use ProGuard in our project. We will also see real-life examples of how to use Proguard to write better rules." name="description"/>
  <meta content="1620001391374687" property="fb:app_id"/>
  <link href="/styles/vendor-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link href="/styles/app-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link as="style" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" onload='this.onload=null,this.rel="stylesheet"' rel="preload"/>
  <noscript>
   <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
  </noscript>
  <script type="text/javascript">
   window.__PRELOADED_STATE__={toastr:{toastrs:[],confirm:null},blogData:{data:{},latestBlogs:null,isFetching:!0,isFetchingLatestBlogs:!1,currentCategory:"",categories:[]},contactData:{formData:{email:"",name:"",phone:"",message:"",isWriting:!1,isNameError:!1,isEmailError:!1,isPhoneError:!1,isMessageError:!1,dismissMsg:!1},successMessage:null,errorMessage:null,isSending:!1},communityData:{formData:{email:"",isEmailError:!1,isWriting:!1,isSending:!1,dismissMsg:!1},successMessage:null,errorMessage:null},blogPageData:{blogId:467,data:{id:467,title:"Mastering ProGuard in Android",description:"In this blog, we are going to learn about how to use ProGuard in our project. We will also see real-life examples of how to use Proguard to write better rules.",text:'<h1 class="graf--h1">Mastering ProGuard in Android</h1> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/proguard-banner-78ab89bdd2cad9b9.png class=\'graf-image\' alt=\'Mastering ProGuard in Android\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">When building Android applications, we might have used ProGuard in our project. In this blog, we are going to learn about all the features and how to use ProGuard efficiently in Android.</p><p class="graf--p">So, let break it down in the following points,</p><ul><li>What is ProGuard?</li><li>How it is helpful for our application?</li><li>How to use it in our project?</li><li>Important things to Note.</li></ul><h4 class="graf--h3">What is ProGuard?</h4><p class="graf--p">ProGuard is a free java tool in Android, which helps us to do the following,</p><ul><li>Shrink(Minify) the code: Remove unused code in the project.</li><li>Obfuscate the code: Rename the names of class, fields, etc.</li><li>Optimize the code: Do things like inlining the functions.</li></ul><p class="graf--p">In short, ProGuard makes the following impact on our project,</p><ul><li>It reduces the size of the application.</li><li>It removes the unused classes and methods that contribute to the 64K method counts limit of an Android application.</li><li>It makes the application difficult to reverse engineer by obfuscating the code.</li></ul><h4 class="graf--h3">How it is useful for our application?</h4><p class="graf--p">In Android, proguard is very useful for making a production-ready application. It helps us to reduce the code and make apps faster. Proguard comes out of the box by default in Android Studio and it helps in a lot of ways, few of them are mentioned below,</p><ul><li>It obfuscates the code, which means that it changes the names to some smaller names like for <b class="graf--bold">MainViewModel</b> it might change the name to <b class="graf--bold">A</b>. Reverse Engineering of your app becomes a tough task now after obfuscating the app.</li><li>It shrinks the resources i.e. ignorers the resources that are not called by our Class files, not being used in our android app like images from drawables, etc. This will reduce the app size by a lot. You should always shrink your app to keep it light weighted and fast.</li></ul><h4 class="graf--h3">How to use it in our project?</h4><p class="graf--p">To enable Proguard in your project, in the app&#x27;s build.gradle add,</p><pre><code class="language-java graf graf--code">buildTypes {\n    release {\n        minifyEnabled true\n        proguardFiles getDefaultProguardFile(\'proguard-android.txt\'), \'proguard-rules.pro\'\n\n    }\n}</code></pre><p class="graf--p">Here, we have <b class="graf--bold"><code class="graf--code-inline">minfyEnabled</code></b> as true, it activates the proguard which take from the file, </p><pre><code class="language-java graf graf--code">proguard-android.txt</code></pre><p class="graf--p">It is under the release block, which means that it will only be applied to the release of the build we generate.</p><p class="graf--p">But it can be too much sometimes when the proguard removes too much code and it might break your code for the flow. </p><p class="graf--p">So, configuring the code we have to add some custom rules to make sure we remove the set of code from obfuscating. We can fix this by writing out custom rules in our proguard and it will respect while generating the build.</p><p class="graf--p">Now, let us see how we can write custom rules in proguard.</p><h4 class="graf--h3">1. Keeping class files </h4><p class="graf--p">Let say we have a data class, which is needed by some API to perform but which generating a build we obfuscate the class. For example, we have a User data class,</p><pre><code class="language-java graf graf--code">data class User(val id: String = "")</code></pre><p class="graf--p">and we want not to obfuscate the class which generating build then to ignore it from obfuscating we use <b class="graf--bold"><code class="graf--code-inline">@Keep</code></b> annotation and update the code like,</p><pre><code class="language-java graf graf--code">@Keep\ndata class User(val id: String = "")</code></pre><p class="graf--p">This annotation helps the class to be ignored by using proguard while minified. This will preserve the class and its member functions even when they are not in use.</p><p class="graf--p">We can also use,</p><pre><code class="language-java graf graf--code">-keep</code></pre><p class="graf--p">to preserve options of class while generating the build. Using <b class="graf--bold">-keep </b>over <b class="graf--bold">@Keep</b> we get more control over what to preserve and what not to.</p><p class="graf--p">But, we can also preserve the key of the <b class="graf--bold">id</b> field in data model class by using @SerializedName (when using Gson library) like,</p><pre><code class="language-java graf graf--code">\ndata class User(@SerializedName("id")\n                 val id: String = "")</code></pre><p class="graf--p">If you notice here, we are not using @Keep.</p><h4 class="graf--h3">2. Keeping the members for a class</h4><p class="graf--p">Let&#x27;s say we want to preserve only the class members and not the class while shrinking, then we use,</p><pre><code class="language-java graf graf--code">-keepclassmembers</code></pre><p class="graf--p">in the proguard rule file. This will help us to ignore members of a specific class. </p><p class="graf--p">Consider the above User class, and we want to preserve all the public methods inside it. We write the rule like,</p><pre><code class="language-java graf graf--code">-keepclassmembers class com.mindorks.sample.User{\n    public *;\n}</code></pre><p class="graf--p">Here, the class User keeps all the members all which have public modifiers.</p><h4 class="graf--h3">3. Keeping names of the class and members</h4><p class="graf--p">Let&#x27;s say we want to keep all the same names of the class and members of a class if it&#x27;s being used in the code i.e. if the class is not used it would be shrunk by proguard but not obfuscated because it has already been shrunk there is no need of obfuscation.</p><p class="graf--p">To do the above task we use,</p><pre><code class="language-java graf graf--code">-keepnames</code></pre><p class="graf--p">Practical use of it looks like,</p><pre><code class="language-java graf graf--code">-keepnames class com.mindorks.sample.GlideModule</code></pre><p class="graf--p">Here, if the GlideModule would keep all of its names of the class and the member function.</p><h4 class="graf--h3">4. Using any Library in Android</h4><p class="graf--p">When using any library we might want to write some custom rules for proguard. There might a case when the library throws a warning in the logcat or they might not even have their own proguard rules!!!</p><p class="graf--p">To fix that we need to add custom rules at our application side. For example, if we start getting warnings from any library then we add,</p><pre><code class="language-java graf graf--code">-dontwarn com.somelibrary.annotations.*</code></pre><p class="graf--p">in our proguard rules and then we won&#x27;t see any warning coming up in our logs.</p><p class="graf--p">And to write custom rules for the library you can write it like any other rule for your own class.</p><h4 class="graf--h3">5. Only Obfuscate your project  </h4><p class="graf--p">Consider a very rare use case, where you just want to obfuscate the code and not shrink any resource. This is a very rare use case but might be useful for some small libraries, then we write the flags like,</p><pre><code class="language-java graf graf--code">-dontshrink\n-dontoptimize</code></pre><p class="graf--p">This will help us to not shrink and optimize the code and just obfuscate.</p><h4 class="graf--h3">6. Maintaining annotations </h4><p class="graf--p">While building the app, ProGuard removes all the annotation and it might still work fine for some set of codes in your project. But let&#x27;s say if we need the annotations to not be removed then we have the option like,</p><pre><code class="language-java graf graf--code">-keepattributes *Annotation*</code></pre><p class="graf--p">Here, it keeps the attributes for all annotations to be preserved in your app. It is by default present in our rules.</p><h4 class="graf--h3">7. Optimization</h4><p class="graf--p">After writing this amount of rules in ProGuard, we might need to provide an extra layer of optimization for our app. First, we update the <b class="graf--bold">build.gradle</b> file like,</p><pre><code class="language-java graf graf--code">android {\n  buildTypes {\n    release {\n      proguardFiles getDefaultProguardFile(\'proguard-android-optimize.txt\')\n    }\n  }\n}</code></pre><p class="graf--p">Now, generally, we don&#x27;t use this option but the use case here is we have to perform an extra level of optimizations.</p><p class="graf--p">To increase the number of cycles in optimization for example like we want to check if the optimization is done properly or not and if it&#x27;s not done it will optimize it again till a certain number of times we use,</p><pre><code class="language-java graf graf--code">-optimizationpasses 5</code></pre><p class="graf--p">Here, it will run the optimization upto 5 times to make it more optimized.</p><p class="graf--p">Now, consider an example where we want to optimize our final classes more at a granular level compared to what it was before, we use,</p><pre><code class="language-java graf graf--code">-optimizations class/marking/final</code></pre><p class="graf--p">Here, the final classes will be optimized upto 5 times max or it might even end early if the optimization is already done.</p><p class="graf--p">Now, if we want to optimize the private fields now we use,</p><pre><code class="language-java graf graf--code">-optimizations field/marking/private</code></pre><p class="graf--p">The majority of times the optimization is done for the first time.</p><p class="graf--p">If we don&#x27;t want to optimize at all we use,</p><pre><code class="language-java graf graf--code">-dontoptimize</code></pre><p class="graf--p">This is how we can work in different ways to make our app more secure and lighter using proguard.</p><h4 class="graf--h3">Important things to Note:</h4><ul><li>Do not use something like <i class="graf--italic">MainFragment.class.getSimpleName()</i> as a fragment TAG. Proguard may assign the same name (A.class) to two different fragments in different packages while obfuscating. In this case, two fragments will have the same TAG. It will lead to the bug in your application.</li><li>Keep your mapping file of the Proguard to trace back to the original code. You may have to upload it at different places like PlayStore Console for seeing the original stack-trace of the crashes.</li></ul><p class="graf--p"><a class="markup--anchor" target="_blank" href="https://blog.mindorks.com/things-to-care-while-using-proguard-in-android-application">If you want to write better ProGuard rules, checkout for tips to write better rules.</a></p><p class="graf--p">Happy learning.</p><p class="graf--p"><b class="graf--bold">Team MindOrks :)</b></p><h4 class="graf--h3"></h4>',author:9959,img_url:"/images/proguard-banner-78ab89bdd2cad9b9.png",blog_url:"applying-proguard-in-an-android-application",likes:0,rank:0,category:1,published_at:"4th June 2020"},author:{id:9959,name:"Himanshu Singh",google_profile_pic:"https://lh3.googleusercontent.com/a-/AOh14Ghy8H-FJrgWB2TcxHCOKWxWEQB4AiklYADGTydu4nE=s96-c?sz=300",fb_profile_pic:null,profile_tagline:null,fb_profile_url:"https://www.facebook.com/scorpiey",google_plus_profile_url:null,twitter_profile_url:"https://twitter.com/hi_man_shoe",github_profile_url:"https://github.com/hi-manshu",linkedin_profile_url:"https://www.linkedin.com/in/himanshoe-singh/"},isFetching:!1,similarBlogs:[{id:290,title:"Things to care while using Proguard in Android application",description:"In this blog, we will learn about the things that we should know before using Proguard in Android application. Proguard is used to minify, obfuscate and optimize the Android code. So, we created a list of things that you should know before using Proguard.",author:14897,img_url:"/images/things-to-take-care-while-using-proguard-banner.png",blog_url:"things-to-care-while-using-proguard-in-android-application",likes:0,rank:0,category:1,published_at:"2nd July 2019",score:3.138566493988037},{id:490,title:"R8 vs Proguard in Android",description:"In this blog, we are going to learn about R8 vs Proguard in Android. We will also learn how does the R8 shrinking work.",author:9959,img_url:"/images/r8-vs-proguard-banner-a5467e5e304767b2.png",blog_url:"r8-vs-proguard-in-android",likes:0,rank:0,category:1,published_at:"2nd July 2020",score:3.138566493988037},{id:374,title:"Mastering Kotlin DSL In Android - Step By Step Guide",description:"In this blog, we are going to learn how to write Kotlin DSL in your android project. We will also see a few examples of how to write custom DSLs in your project.",author:9959,img_url:"/images/kotlin-dsl-banner.png",blog_url:"mastering-kotlin-dsl-in-android-step-by-step-guide",likes:0,rank:0,category:1,published_at:"14th November 2019",score:2.805088996887207},{id:386,title:"Mastering Design Patterns in Android with Kotlin",description:"In this blog, we will learn about various Design Patterns in Android that will make our code cleaner and easier to understand. We will learn about Creational, Structural, and Behavioural pattern in Android. So, let's master them and write the code in better way.",author:17146,img_url:"/images/design-pattern-in-android-with-kotlin-banner.png",blog_url:"mastering-design-patterns-in-android-with-kotlin",likes:0,rank:0,category:1,published_at:"20th December 2019",score:2.805088996887207},{id:247,title:"Exploring Android ViewPager2 in Android",description:"As Google introduced a new ViewPager called the ViewPager2 with some cool features like vertical orientation, use of Recycler View and many more. So, in this blog, we will explore the new ViewPager2 with its implementation as well . ",author:14897,img_url:"/images/exploring-android-viewpager2-banner.png",blog_url:"exploring-android-view-pager2-in-android",likes:0,rank:0,category:1,published_at:"29th May 2019",score:.01835518702864647},{id:254,title:"Android KTX - Android development with Kotlin",description:"In this blog, we will learn how to implement the Android KTX feature of the Android Jetpack that was announced in the Google I/O 2018. We will learn how Kotlin will help us to write the same code and use the same APIs used in Java in a much easier and faster way.",author:14897,img_url:"/images/android-ktx-android-development-banner.png",blog_url:"android-ktx-android-development-with-kotlin",likes:0,rank:0,category:1,published_at:"27th May 2019",score:.01835518702864647}],isSimilarBlogsFetching:!1},loginData:{data:null,isLoggingIn:!1,isLoggingOut:!1,loginState:!1,isForcedLogout:!1,isTokenRefreshed:!1,isRedirectHome:!1,message:""},updatesData:{news:null,inspirations:null,isNewsFetching:!0,isInspirationsFetching:!0},blogEditorData:{blogId:null,blogDetailsFormData:{title:"",description:"",imgUrl:"",blogUrl:"",category:"",categories:[],isWriting:!1,isTitleError:!1,isDescriptionError:!1,isImgUrlError:!1,isBlogUrlError:!1,isCategoryError:!1,isUploadingImage:!1,uploadedImageUrl:null},editorState:null,editorText:null,successMessage:null,errorMessage:null,isSending:!1,isMsgToShow:!1,isPublished:!1,isSubmitted:!1,isDraft:!0,isEditOfExistingBlog:!1,isFetchingBlogCategories:!1,isUploadingImage:!1,uploadedImageUrl:null},myBlogsData:{data:null,isSubmittedBlogsFetching:!0,isDraftBlogsFetching:!0,isPublishedBlogsFetching:!0,successMessage:null,errorMessage:null,isMsgToShow:!1,tabNames:["drafts","submissions","published"],selectedTab:"drafts",isFetchingBlog:!1,isDeletingBlog:!1,openEditorPage:!1},profilePreviewData:{profile:null,blogs:null,isFetchingProfile:!1,isFetchingAuthorBlogs:!1,successMessage:null,errorMessage:null,isMsgToShow:!1,isUserNotRegistered:!1,redirectToMyProfileEdit:!1},profileEditableData:{userId:null,name:null,fbProfilePicUrl:null,googleProfilePicUrl:null,profileFormData:{tagline:"",fbProfileUrl:"",googlePlusProfileUrl:"",twitterProfileUrl:"",githubProfileUrl:"",linkedinProfileUrl:"",isWriting:!1,isTaglineError:!1,isFbProfileUrlError:!1,isGooglePlusProfileUrlError:!1,isTwitterProfileUrlError:!1,isGithubProfileUrlError:!1,isLinkedinProfileUrlError:!1},isSavingProfile:!1,successMessage:null,errorMessage:null,isMsgToShow:!1,redirectToProfilePreview:!1},submitBlogData:{formData:{email:"",name:"",link:"",isWriting:!1,isNameError:!1,isEmailError:!1,isLinkError:!1,dismissMsg:!1},successMessage:null,errorMessage:null,isSubmitting:!1},advertisementsData:{data:{},isLoading:!1},recaptchaData:{verified:!1,successMessage:null,errorMessage:null},blogSearchData:{searches:null,isSearching:!1}}
  </script>
  <script async="" src="https://www.google-analytics.com/analytics.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-91686131-1","auto"),ga("require","cleanUrlTracker"),ga("require","eventTracker"),ga("require","impressionTracker"),ga("require","outboundLinkTracker"),ga("require","urlChangeTracker"),ga("require","maxScrollTracker"),ga("require","mediaQueryTracker"),ga("require","outboundFormTracker"),ga("require","outboundLinkTracker"),ga("require","pageVisibilityTracker"),ga("require","socialWidgetTracker"),ga("require","urlChangeTracker"),ga("send","pageview")
  </script>
  <script defer="defer" src="/assets/autotrack.js" type="text/javascript">
  </script>
  <script src="/assets/highlight.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/vendor-bundle-1.8.6.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/app-bundle-1.8.6.js" type="text/javascript">
  </script>
 </head>
 <body>
  <div id="root">
   <div class="screen app-load-content" data-reactroot="">
    <div class="ui centered grid">
     <div class="row" style="padding:0">
      <div class="ui fixed menu navbar huge borderless grid" style="background-color:#fff;height:60px">
      </div>
     </div>
     <div class="centered computer only row" style="padding:0">
      <div class="ui fixed top menu navbar huge borderless grid header-container" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="right menu">
        <a class="item" href="https://janisharali.com" target="_blank">
         Mentor Ali
        </a>
        <a class="item" href="https://amitshekhar.me" target="_blank">
         Mentor Amit
        </a>
       </div>
      </div>
     </div>
     <div class="tablet only mobile only row" style="padding:0">
      <div class="ui fixed top navbar huge menu borderless" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="item">
       </div>
      </div>
     </div>
    </div>
    <div class="header-height">
    </div>
    <div aria-live="assertive" class="redux-toastr">
     <div>
      <div class="top-left">
      </div>
      <div class="top-right">
      </div>
      <div class="top-center">
      </div>
      <div class="bottom-left">
      </div>
      <div class="bottom-right">
      </div>
      <div class="bottom-center">
      </div>
     </div>
    </div>
    <div class="content-container theme">
     <div class="ui centered one column grid" style="padding-bottom:80px;background-color:#fff">
      <div class="ten wide computer fifteen wide mobile fifteen wide tablet column" style="margin-top:50px">
       <div>
        <div class="blog-page-author">
         <div class="ui small header">
          <img alt="Himanshu Singh" class="ui circular image" src="https://lh3.googleusercontent.com/a-/AOh14Ghy8H-FJrgWB2TcxHCOKWxWEQB4AiklYADGTydu4nE=s96-c?sz=300"/>
          <div class="content">
           Himanshu Singh
           <div class="sub header" style="margin-top:5px">
            4th June 2020
           </div>
          </div>
         </div>
        </div>
        <div id="content">
         <article class="template">
          <div class="postContent">
           <div class="notesSource">
            <div class="postField postField--body" id="editor">
             <section class="section--first section--last">
              <div class="section-divider layoutSingleColumn-template">
               <hr class="section-divider"/>
              </div>
              <div class="section-content">
               <div class="section-inner layoutSingleColumn-template">
                <div>
                 <h1 class="graf--h1">
                  Mastering ProGuard in Android
                 </h1>
                 <div class="graf-image graf-caption">
                  <img alt="Mastering ProGuard in Android" class="graf-image" src="/images/proguard-banner-78ab89bdd2cad9b9.png"/>
                 </div>
                 <p class="graf--p">
                  When building Android applications, we might have used ProGuard in our project. In this blog, we are going to learn about all the features and how to use ProGuard efficiently in Android.
                 </p>
                 <p class="graf--p">
                  So, let break it down in the following points,
                 </p>
                 <ul>
                  <li>
                   What is ProGuard?
                  </li>
                  <li>
                   How it is helpful for our application?
                  </li>
                  <li>
                   How to use it in our project?
                  </li>
                  <li>
                   Important things to Note.
                  </li>
                 </ul>
                 <h4 class="graf--h3">
                  What is ProGuard?
                 </h4>
                 <p class="graf--p">
                  ProGuard is a free java tool in Android, which helps us to do the following,
                 </p>
                 <ul>
                  <li>
                   Shrink(Minify) the code: Remove unused code in the project.
                  </li>
                  <li>
                   Obfuscate the code: Rename the names of class, fields, etc.
                  </li>
                  <li>
                   Optimize the code: Do things like inlining the functions.
                  </li>
                 </ul>
                 <p class="graf--p">
                  In short, ProGuard makes the following impact on our project,
                 </p>
                 <ul>
                  <li>
                   It reduces the size of the application.
                  </li>
                  <li>
                   It removes the unused classes and methods that contribute to the 64K method counts limit of an Android application.
                  </li>
                  <li>
                   It makes the application difficult to reverse engineer by obfuscating the code.
                  </li>
                 </ul>
                 <h4 class="graf--h3">
                  How it is useful for our application?
                 </h4>
                 <p class="graf--p">
                  In Android, proguard is very useful for making a production-ready application. It helps us to reduce the code and make apps faster. Proguard comes out of the box by default in Android Studio and it helps in a lot of ways, few of them are mentioned below,
                 </p>
                 <ul>
                  <li>
                   It obfuscates the code, which means that it changes the names to some smaller names like for
                   <b class="graf--bold">
                    MainViewModel
                   </b>
                   it might change the name to
                   <b class="graf--bold">
                    A
                   </b>
                   . Reverse Engineering of your app becomes a tough task now after obfuscating the app.
                  </li>
                  <li>
                   It shrinks the resources i.e. ignorers the resources that are not called by our Class files, not being used in our android app like images from drawables, etc. This will reduce the app size by a lot. You should always shrink your app to keep it light weighted and fast.
                  </li>
                 </ul>
                 <h4 class="graf--h3">
                  How to use it in our project?
                 </h4>
                 <p class="graf--p">
                  To enable Proguard in your project, in the app's build.gradle add,
                 </p>
                 <pre><code class="language-java graf graf--code">buildTypes {
    release {
        minifyEnabled true
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'

    }
}</code></pre>
                 <p class="graf--p">
                  Here, we have
                  <b class="graf--bold">
                   <code class="graf--code-inline">
                    minfyEnabled
                   </code>
                  </b>
                  as true, it activates the proguard which take from the file,
                 </p>
                 <pre><code class="language-java graf graf--code">proguard-android.txt</code></pre>
                 <p class="graf--p">
                  It is under the release block, which means that it will only be applied to the release of the build we generate.
                 </p>
                 <p class="graf--p">
                  But it can be too much sometimes when the proguard removes too much code and it might break your code for the flow.
                 </p>
                 <p class="graf--p">
                  So, configuring the code we have to add some custom rules to make sure we remove the set of code from obfuscating. We can fix this by writing out custom rules in our proguard and it will respect while generating the build.
                 </p>
                 <p class="graf--p">
                  Now, let us see how we can write custom rules in proguard.
                 </p>
                 <h4 class="graf--h3">
                  1. Keeping class files
                 </h4>
                 <p class="graf--p">
                  Let say we have a data class, which is needed by some API to perform but which generating a build we obfuscate the class. For example, we have a User data class,
                 </p>
                 <pre><code class="language-java graf graf--code">data class User(val id: String = "")</code></pre>
                 <p class="graf--p">
                  and we want not to obfuscate the class which generating build then to ignore it from obfuscating we use
                  <b class="graf--bold">
                   <code class="graf--code-inline">
                    @Keep
                   </code>
                  </b>
                  annotation and update the code like,
                 </p>
                 <pre><code class="language-java graf graf--code">@Keep
data class User(val id: String = "")</code></pre>
                 <p class="graf--p">
                  This annotation helps the class to be ignored by using proguard while minified. This will preserve the class and its member functions even when they are not in use.
                 </p>
                 <p class="graf--p">
                  We can also use,
                 </p>
                 <pre><code class="language-java graf graf--code">-keep</code></pre>
                 <p class="graf--p">
                  to preserve options of class while generating the build. Using
                  <b class="graf--bold">
                   -keep
                  </b>
                  over
                  <b class="graf--bold">
                   @Keep
                  </b>
                  we get more control over what to preserve and what not to.
                 </p>
                 <p class="graf--p">
                  But, we can also preserve the key of the
                  <b class="graf--bold">
                   id
                  </b>
                  field in data model class by using @SerializedName (when using Gson library) like,
                 </p>
                 <pre><code class="language-java graf graf--code">
data class User(@SerializedName("id")
                 val id: String = "")</code></pre>
                 <p class="graf--p">
                  If you notice here, we are not using @Keep.
                 </p>
                 <h4 class="graf--h3">
                  2. Keeping the members for a class
                 </h4>
                 <p class="graf--p">
                  Let's say we want to preserve only the class members and not the class while shrinking, then we use,
                 </p>
                 <pre><code class="language-java graf graf--code">-keepclassmembers</code></pre>
                 <p class="graf--p">
                  in the proguard rule file. This will help us to ignore members of a specific class.
                 </p>
                 <p class="graf--p">
                  Consider the above User class, and we want to preserve all the public methods inside it. We write the rule like,
                 </p>
                 <pre><code class="language-java graf graf--code">-keepclassmembers class com.mindorks.sample.User{
    public *;
}</code></pre>
                 <p class="graf--p">
                  Here, the class User keeps all the members all which have public modifiers.
                 </p>
                 <h4 class="graf--h3">
                  3. Keeping names of the class and members
                 </h4>
                 <p class="graf--p">
                  Let's say we want to keep all the same names of the class and members of a class if it's being used in the code i.e. if the class is not used it would be shrunk by proguard but not obfuscated because it has already been shrunk there is no need of obfuscation.
                 </p>
                 <p class="graf--p">
                  To do the above task we use,
                 </p>
                 <pre><code class="language-java graf graf--code">-keepnames</code></pre>
                 <p class="graf--p">
                  Practical use of it looks like,
                 </p>
                 <pre><code class="language-java graf graf--code">-keepnames class com.mindorks.sample.GlideModule</code></pre>
                 <p class="graf--p">
                  Here, if the GlideModule would keep all of its names of the class and the member function.
                 </p>
                 <h4 class="graf--h3">
                  4. Using any Library in Android
                 </h4>
                 <p class="graf--p">
                  When using any library we might want to write some custom rules for proguard. There might a case when the library throws a warning in the logcat or they might not even have their own proguard rules!!!
                 </p>
                 <p class="graf--p">
                  To fix that we need to add custom rules at our application side. For example, if we start getting warnings from any library then we add,
                 </p>
                 <pre><code class="language-java graf graf--code">-dontwarn com.somelibrary.annotations.*</code></pre>
                 <p class="graf--p">
                  in our proguard rules and then we won't see any warning coming up in our logs.
                 </p>
                 <p class="graf--p">
                  And to write custom rules for the library you can write it like any other rule for your own class.
                 </p>
                 <h4 class="graf--h3">
                  5. Only Obfuscate your project
                 </h4>
                 <p class="graf--p">
                  Consider a very rare use case, where you just want to obfuscate the code and not shrink any resource. This is a very rare use case but might be useful for some small libraries, then we write the flags like,
                 </p>
                 <pre><code class="language-java graf graf--code">-dontshrink
-dontoptimize</code></pre>
                 <p class="graf--p">
                  This will help us to not shrink and optimize the code and just obfuscate.
                 </p>
                 <h4 class="graf--h3">
                  6. Maintaining annotations
                 </h4>
                 <p class="graf--p">
                  While building the app, ProGuard removes all the annotation and it might still work fine for some set of codes in your project. But let's say if we need the annotations to not be removed then we have the option like,
                 </p>
                 <pre><code class="language-java graf graf--code">-keepattributes *Annotation*</code></pre>
                 <p class="graf--p">
                  Here, it keeps the attributes for all annotations to be preserved in your app. It is by default present in our rules.
                 </p>
                 <h4 class="graf--h3">
                  7. Optimization
                 </h4>
                 <p class="graf--p">
                  After writing this amount of rules in ProGuard, we might need to provide an extra layer of optimization for our app. First, we update the
                  <b class="graf--bold">
                   build.gradle
                  </b>
                  file like,
                 </p>
                 <pre><code class="language-java graf graf--code">android {
  buildTypes {
    release {
      proguardFiles getDefaultProguardFile('proguard-android-optimize.txt')
    }
  }
}</code></pre>
                 <p class="graf--p">
                  Now, generally, we don't use this option but the use case here is we have to perform an extra level of optimizations.
                 </p>
                 <p class="graf--p">
                  To increase the number of cycles in optimization for example like we want to check if the optimization is done properly or not and if it's not done it will optimize it again till a certain number of times we use,
                 </p>
                 <pre><code class="language-java graf graf--code">-optimizationpasses 5</code></pre>
                 <p class="graf--p">
                  Here, it will run the optimization upto 5 times to make it more optimized.
                 </p>
                 <p class="graf--p">
                  Now, consider an example where we want to optimize our final classes more at a granular level compared to what it was before, we use,
                 </p>
                 <pre><code class="language-java graf graf--code">-optimizations class/marking/final</code></pre>
                 <p class="graf--p">
                  Here, the final classes will be optimized upto 5 times max or it might even end early if the optimization is already done.
                 </p>
                 <p class="graf--p">
                  Now, if we want to optimize the private fields now we use,
                 </p>
                 <pre><code class="language-java graf graf--code">-optimizations field/marking/private</code></pre>
                 <p class="graf--p">
                  The majority of times the optimization is done for the first time.
                 </p>
                 <p class="graf--p">
                  If we don't want to optimize at all we use,
                 </p>
                 <pre><code class="language-java graf graf--code">-dontoptimize</code></pre>
                 <p class="graf--p">
                  This is how we can work in different ways to make our app more secure and lighter using proguard.
                 </p>
                 <h4 class="graf--h3">
                  Important things to Note:
                 </h4>
                 <ul>
                  <li>
                   Do not use something like
                   <i class="graf--italic">
                    MainFragment.class.getSimpleName()
                   </i>
                   as a fragment TAG. Proguard may assign the same name (A.class) to two different fragments in different packages while obfuscating. In this case, two fragments will have the same TAG. It will lead to the bug in your application.
                  </li>
                  <li>
                   Keep your mapping file of the Proguard to trace back to the original code. You may have to upload it at different places like PlayStore Console for seeing the original stack-trace of the crashes.
                  </li>
                 </ul>
                 <p class="graf--p">
                  <a class="markup--anchor" href="https://blog.mindorks.com/things-to-care-while-using-proguard-in-android-application" target="_blank">
                   If you want to write better ProGuard rules, checkout for tips to write better rules.
                  </a>
                 </p>
                 <p class="graf--p">
                  Happy learning.
                 </p>
                 <p class="graf--p">
                  <b class="graf--bold">
                   Team MindOrks :)
                  </b>
                 </p>
                 <h4 class="graf--h3">
                 </h4>
                </div>
               </div>
              </div>
             </section>
            </div>
           </div>
          </div>
         </article>
        </div>
       </div>
       <div class="ui divider">
       </div>
      </div>
      <div class="stretched fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui large center aligned header" style="padding-top:20px">
        Recommended for You
       </div>
      </div>
      <div class="fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui centered grid">
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/things-to-care-while-using-proguard-in-android-application/">
          <img alt="Things to care while using Proguard in Android application" class="ui centered image" src="/images/things-to-take-care-while-using-proguard-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Things to care while using Proguard in Android application
           </div>
           <div class="meta">
            2nd July 2019
           </div>
           <div class="description">
            In this blog, we will learn about the things that we should know before using Proguard in Android application. Proguard is used to minify, obfuscate and optimize the Android code. So, we created a list of things that you should know before using Proguard.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/r8-vs-proguard-in-android/">
          <img alt="R8 vs Proguard in Android" class="ui centered image" src="/images/r8-vs-proguard-banner-a5467e5e304767b2.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            R8 vs Proguard in Android
           </div>
           <div class="meta">
            2nd July 2020
           </div>
           <div class="description">
            In this blog, we are going to learn about R8 vs Proguard in Android. We will also learn how does the R8 shrinking work.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/mastering-kotlin-dsl-in-android-step-by-step-guide/">
          <img alt="Mastering Kotlin DSL In Android - Step By Step Guide" class="ui centered image" src="/images/kotlin-dsl-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Mastering Kotlin DSL In Android - Step By Step Guide
           </div>
           <div class="meta">
            14th November 2019
           </div>
           <div class="description">
            In this blog, we are going to learn how to write Kotlin DSL in your android project. We will also see a few examples of how to write custom DSLs in your project.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/mastering-design-patterns-in-android-with-kotlin/">
          <img alt="Mastering Design Patterns in Android with Kotlin" class="ui centered image" src="/images/design-pattern-in-android-with-kotlin-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Mastering Design Patterns in Android with Kotlin
           </div>
           <div class="meta">
            20th December 2019
           </div>
           <div class="description">
            In this blog, we will learn about various Design Patterns in Android that will make our code cleaner and easier to understand. We will learn about Creational, Structural, and Behavioural pattern in Android. So, let's master them and write the code in better way.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/exploring-android-view-pager2-in-android/">
          <img alt="Exploring Android ViewPager2 in Android" class="ui centered image" src="/images/exploring-android-viewpager2-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Exploring Android ViewPager2 in Android
           </div>
           <div class="meta">
            29th May 2019
           </div>
           <div class="description">
            As Google introduced a new ViewPager called the ViewPager2 with some cool features like vertical orientation, use of Recycler View and many more. So, in this blog, we will explore the new ViewPager2 with its implementation as well .
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card" href="/android-ktx-android-development-with-kotlin/">
          <img alt="Android KTX - Android development with Kotlin" class="ui centered image" src="/images/android-ktx-android-development-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Android KTX - Android development with Kotlin
           </div>
           <div class="meta">
            27th May 2019
           </div>
           <div class="description">
            In this blog, we will learn how to implement the Android KTX feature of the Android Jetpack that was announced in the Google I/O 2018. We will learn how Kotlin will help us to write the same code and use the same APIs used in Java in a much easier and faster way.
           </div>
          </div>
         </a>
        </div>
       </div>
      </div>
     </div>
    </div>
    <div style="background:#fff">
     <footer class="content-container">
      <div class="ui centered padded grid" style="padding-top:40px;background:linear-gradient(to right,#c4e0e0,#e5f1f1)">
       <h2 class="ui huge icon center aligned header">
        <div class="content">
         Connect With Your Mentors
        </div>
       </h2>
       <div class="centered row">
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Janishar Ali" class="ui medium circular image" src="/assets/ali.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://janisharali.com" target="_blank">
             Janishar Ali
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://janisharali.com" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/janisharali" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Amit Shekhar" class="ui medium circular image" src="/assets/amit.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://amitshekhar.me" target="_blank">
             Amit Shekhar
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://amitshekhar.me" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/amitiitbhu" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
      <div class="ui divider" style="margin:unset">
      </div>
      <h5 class="ui header" style="padding:16px;margin:unset;color:#555">
       <i aria-hidden="true" class="copyright icon">
       </i>
       <div class="content">
        Copyright 2022, MindOrks Nextgen Private Limited
       </div>
      </h5>
     </footer>
    </div>
   </div>
  </div>
  <script type="text/javascript">
   window.hljs.initHighlightingOnLoad()
  </script>
 </body>
</html>