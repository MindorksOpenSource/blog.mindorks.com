<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns#" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>
   Understanding Multidex in Android
  </title>
  <meta charset="utf-8"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="minimum-scale=1,initial-scale=1,width=device-width,shrink-to-fit=no" name="viewport"/>
  <link href="https://blog.mindorks.com/understanding-multidex-in-android" rel="canonical"/>
  <meta content="986249072156-dabps0lf90smluddrk5rkqsdjghk3hd3.apps.googleusercontent.com" name="google-signin-client_id"/>
  <meta content="android, learn android app development, android app development courses, android blogs, android tutorial" name="keywords"/>
  <meta content="Understanding Multidex in Android" property="og:title"/>
  <meta content="website" property="og:type"/>
  <meta content="https://blog.mindorks.com/understanding-multidex-in-android" property="og:url"/>
  <meta content="/images/understanding-multidex-banner-img.png" property="og:image"/>
  <meta content="In this blog, we will learn how to use Multidex in Android. Basically, Multidex is used when we want to add more than 64K methods in our Android project. If we don't use any Multidex for the project having more than 64K methods, then we will encounter DEX error. So, in this blog, we will learn how to use Multidex." property="og:description"/>
  <meta content="Understanding Multidex in Android" property="twitter:title"/>
  <meta content="In this blog, we will learn how to use Multidex in Android. Basically, Multidex is used when we want to add more than 64K methods in our Android project. If we don't use any Multidex for the project having more than 64K methods, then we will encounter DEX error. So, in this blog, we will learn how to use Multidex." name="twitter:description"/>
  <meta content="/images/understanding-multidex-banner-img.png" name="twitter:image:src"/>
  <meta content="summary_large_image" name="twitter:card"/>
  <meta content="@MindorksNextGen" name="twitter:site"/>
  <meta content="In this blog, we will learn how to use Multidex in Android. Basically, Multidex is used when we want to add more than 64K methods in our Android project. If we don't use any Multidex for the project having more than 64K methods, then we will encounter DEX error. So, in this blog, we will learn how to use Multidex." name="description"/>
  <meta content="1620001391374687" property="fb:app_id"/>
  <link href="/styles/vendor-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link href="/styles/app-1.8.6.css" rel="stylesheet" type="text/css"/>
  <link as="style" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" onload='this.onload=null,this.rel="stylesheet"' rel="preload"/>
  <noscript>
   <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
  </noscript>
  <script type="text/javascript">
   window.__PRELOADED_STATE__={toastr:{toastrs:[],confirm:null},blogData:{data:{},latestBlogs:null,isFetching:!0,isFetchingLatestBlogs:!1,currentCategory:"",categories:[]},contactData:{formData:{email:"",name:"",phone:"",message:"",isWriting:!1,isNameError:!1,isEmailError:!1,isPhoneError:!1,isMessageError:!1,dismissMsg:!1},successMessage:null,errorMessage:null,isSending:!1},communityData:{formData:{email:"",isEmailError:!1,isWriting:!1,isSending:!1,dismissMsg:!1},successMessage:null,errorMessage:null},blogPageData:{blogId:243,data:{id:243,title:"Understanding Multidex in Android",description:"In this blog, we will learn how to use Multidex in Android. Basically, Multidex is used when we want to add more than 64K methods in our Android project. If we don't use any Multidex for the project having more than 64K methods, then we will encounter DEX error. So, in this blog, we will learn how to use Multidex.",text:'<h1 class="graf--h1">Understanding Multidex in Android</h1> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/understanding-multidex-banner-img.png class=\'graf-image\' alt=\'Understanding Multidex in Android\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">In Java, if we compile our code then that code is converted into a <b class="graf--bold"><i class="graf--italic">.class </i></b>file by the compiler because our machine understands that <b class="graf--bold"><i class="graf--italic">.class </i></b>file. The same is the process for the Android Application. In Android, the compiler converts our source code into <b class="graf--bold">DEX</b>(Dalvik Executable) file.</p><p class="graf--p">So, in this blog, we will learn about <b class="graf--bold">Dex</b> and <b class="graf--bold">Multidex</b> in Android. Especially, this blog is for those Android developers who get 64K method limit exceeded error while building APK. This error comes due to DEX. So, in this blog, we will try to gain more knowledge about Dex and Multidex in Android.</p><p class="graf--p">The timeline of this blog is as follows:</p><ul><li>Android build system</li><li>Multidex in Android</li><li>Enabling Multidex support in Project</li><li>Limitations of Multidex support library</li><li>Conclusion</li></ul><h4 class="graf--h3">Android Build System</h4><p class="graf--p">Before moving on to DEX, let&#x27;s revise some concepts of the build system of Android. Android compiles the resources and source code of our app and packages them into APKs. Conversion of our project into an APK requires many tools and involves many processes. You can understand the build process with the help of the below diagram: </p><p class="graf--p">Image Credit: Android Developer website</p> <div class=\'graf-image graf-caption\'>\n\t\t\t\t\t\t\t\t\t<img src=/images/understanding-multidesk-build-process.png class=\'graf-image\' alt=\'Understanding Multidex in Android\' />\n\t\t\t\t\t\t\t\t</div ><p class="graf--p">The build process of a typical Android App can be summarized as below:</p><ol type="1"><li>The compilers convert the source code into DEX (Dalvik Executable) files, which include the bytecode that runs on Android devices.</li><li>After having the DEX files, the APK Packager combines the DEX files and compiled resources into a single APK.   </li><li>After that, the APK Packager signs the APK.   </li><li>Before generating the final APK, various methods are followed to optimize the code so as to avoid the unused code.</li></ol><h4 class="graf--h3">Multidex in Android</h4><p class="graf--p">In Android, the compilers convert your source code into DEX files. This DEX file contains the compiled code used to run the app. But there is a limitation with the DEX file. The DEX file limits the total number of methods that can be referenced within a single DEX file to 64K i.e. 65,536 methods. So, you can&#x27;t use more than 64K methods in a particular DEX file. These 64K methods include Android framework methods, library methods, and methods in our code also. This limit of 64K is referred to as the &quot;<b class="graf--bold">64K reference limit</b>&quot;.</p><p class="graf--p">So, if our app exceeds 65,536 methods, we will encounter a build error that indicates our app has reached the limit of the Android build architecture. The error is as follows:</p><pre><code class="language-java graf graf--code">Too many field references: 131000; max is 65536.\nYou may try using --multi-dex option.</code></pre><p class="graf--p">Older versions of the build system report a different error, which also indicates the same problem: </p><pre><code class="language-java graf graf--code">Conversion to Dalvik format failed:\nUnable to execute dex: method ID not in [0, 0xffff]: 65536</code></pre><p class="graf--p">Both the above error are known as <b class="graf--bold">64K reference limit </b>i.e we are trying to use more than 64K methods in our code. So, here comes the role of Multidex support in our Android Project. Next time if you want to use more than 64K methods in your project then you can use the Multidex to achieve this.</p><p class="graf--p">If you are getting some type of DEX error then before configuring your app for multidex to enable the use of 64K or more reference methods, you should try to reduce the total number of reference methods that are being used by our app. Try the following strategies to avoid using 64K reference methods:</p><ol type="1"><li><b class="graf--bold">Manage dependencies: </b>While importing some dependencies for our project, sometimes we import each and every library and use only a few of them. So, instead of keeping all those dependencies, we can keep only the required one.</li><li><b class="graf--bold">Remove unused code: </b>Enable code shrinking in your project. By doing so, we are not shipping unused code with our APK.</li></ol><p class="graf--p">In the next part of this blog, we will learn how to use the Multidex support for our project that has more than 64K methods.</p><h4 class="graf--h3">Enabling Multidex support in Project</h4><p class="graf--p">Here, we will see how to enable multidex for following:</p><ul><li>API level lower than 21: <b class="graf--bold">That is if your minSdkVersion is set to lower than 21.</b></li><li>API level 21 and higher.</li></ul><p class="graf--p"><span class="graf--text-highlight"><b class="graf--bold">Note:</b> Follow only one of the following based on the minSdkVersion.</span></p><ul><li><b class="graf--bold">Multidex support for API level lower than 21</b></li><li><b class="graf--bold">Multidex support for API level 21 and higher</b></li></ul><h4 class="graf--h3"><b class="graf--bold">Multidex support for API level lower than 21</b></h4><p class="graf--p">For executing app code, versions of Android lower than Android 5.0 (API level 21) use the Dalvik runtime, and the limitation of using Dalvik is that you can&#x27;t use more than one <code class="graf--code-inline">classes.dex</code> bytecode file per APK. To overcome this limitation, you will have to add the Multidex support library.</p><p class="graf--p">To add the multidex support library to your project for API level lower than 21, add the following dependency in your <b class="graf--bold"><i class="graf--italic">build.gradle</i></b> file. </p><pre><code class="language-java graf graf--code">dependencies {\n    implementation \'androidx:multidex:{latest-version}\'\n}</code></pre><p class="graf--p">If you aren&#x27;t using AndroidX, add the following support library       dependency instead:</p><pre><code class="language-java graf graf--code">dependencies {\n  implementation \'com.android.support:multidex:{latest-version}\'\n}</code></pre><p class="graf--p">By adding this library, your app can manage the access of additional DEX files. In other words, if you are having more than 64K methods, then you will be having more than one DEX file and these DEX files will be managed by using this multidex support library.</p><p class="graf--p">Then, modify the module-level <b class="graf--bold"><i class="graf--italic">build.gradle</i></b> file to enable multidex using <code class="graf--code-inline">multiDexEnabled true</code>.</p><pre><code class="language-java graf graf--code">android {\n    defaultConfig {\n ...\n        minSdkVersion 15 \n        targetSdkVersion 28\n        multiDexEnabled true\n }\n ...\n}\n\ndependencies {\n implementation \'androidx:multidex:{latest-version}\'\n}</code></pre><p class="graf--p">Then, depending on whether you override the Application class, perform one of the following:</p><p class="graf--p">1. If you <i class="graf--italic">do not</i> override the Application class, edit your manifest file to set <i class="graf--italic"><b class="graf--bold">android:name</b></i> in the <i class="graf--italic"><b class="graf--bold">&lt;application&gt;</b></i> tag as follows: </p><pre><code class="language-java graf graf--code">&lt;?xml version="1.0" encoding="utf-8"?&gt;\n&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"\n    package="com.example"&gt;\n    &lt;application\n            android:name="android.support.multidex.MultiDexApplication" &gt;\n        ...\n    &lt;/application&gt;\n&lt;/manifest&gt;</code></pre><p class="graf--p">2. If you do override the Application class, change it to extend MultiDexApplication (if possible) as follows:</p><pre><code class="language-java graf graf--code">public class MyApplication extends MultiDexApplication { ... }</code></pre><p class="graf--p">3. Or if you do override the Application class but it&#x27;s not possible to change the base class, then you can instead override the <b class="graf--bold"><i class="graf--italic">attachBaseContext()</i></b> method and call <b class="graf--bold"><i class="graf--italic">MultiDex.install(this)</i></b> to enable multidex:</p><pre><code class="language-java graf graf--code">public class MyApplication extends SomeOtherApplication {\n  @Override\n  protected void attachBaseContext(Context base) {\n     super.attachBaseContext(base);\n     MultiDex.install(this);\n  }\n}</code></pre><p class="graf--p">You are all set now.</p><p class="graf--p">This was all about the API level lower than 21. Now, let&#x27;s move to the next one.</p><h4 class="graf--h3"><b class="graf--bold">Multidex support for API level 21 and higher</b></h4><p class="graf--p">Your task becomes easier if you are making an app for Android version 5.0 (API level 21) or higher. API level 21 uses a runtime called ART which supports loading multiple DEX files from APK files. So, you do <b class="graf--bold">NOT</b> need to add the support library for multidex in Android 5.0 or higher.</p><p class="graf--p">Now, for API level 21 or higher, you need to set <code class="graf--code-inline"><b class="graf--bold"><i class="graf--italic"><code class="graf--code-inline">multiDexEnabled</code></i></b></code> to <code class="graf--code-inline"><code class="graf--code-inline">true</code></code> in your module-level <code class="graf--code-inline"><b class="graf--bold"><i class="graf--italic">build.gradle</i></b></code> file, as shown here:  </p><pre><code class="language-java graf graf--code">android {\n    defaultConfig {\n        ...\n        minSdkVersion 21 \n        targetSdkVersion 28\n        multiDexEnabled true\n    }\n    ...\n}</code></pre><p class="graf--p">Then, depending on whether you override the Application class, perform one of the following:</p><p class="graf--p">1. If you <i class="graf--italic">do not</i> override the Application class, edit your manifest file to set <i class="graf--italic"><code class="graf--code-inline"><b class="graf--bold">android:name</b></code></i> in the <i class="graf--italic"><code class="graf--code-inline"><b class="graf--bold">&lt;application&gt;</b></code></i> tag as follows: </p><pre><code class="language-java graf graf--code">&lt;?xml version="1.0" encoding="utf-8"?&gt;\n&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"\n    package="com.example"&gt;\n    &lt;application\n            android:name="android.support.multidex.MultiDexApplication" &gt;\n        ...\n    &lt;/application&gt;\n&lt;/manifest&gt;</code></pre><p class="graf--p">2. If you do override the Application class, change it to extend MultiDexApplication (if possible) as follows:</p><pre><code class="language-java graf graf--code">public class MyApplication extends MultiDexApplication { ... }</code></pre><p class="graf--p">3. Or if you do override the Application class but it&#x27;s not possible to change the base class, then you can instead override the <b class="graf--bold"><i class="graf--italic"><code class="graf--code-inline">attachBaseContext()</code></i></b> method and call <b class="graf--bold"><i class="graf--italic">MultiDex.install(this)</i></b> to enable multidex:</p><pre><code class="language-java graf graf--code">public class MyApplication extends SomeOtherApplication {\n  @Override\n  protected void attachBaseContext(Context base) {\n     super.attachBaseContext(base);\n     MultiDex.install(this);\n  }\n}</code></pre><p class="graf--p">You are all set now.</p><p class="graf--p">So, now when you build your app, one primary DEX file will be constructed, and supporting DEX files will also be added to it. The primary DEX file is normally marked as <b class="graf--bold"><i class="graf--italic">classes.dex </i></b>and other supporting DEX files as <b class="graf--bold"><i class="graf--italic">classes1.dex, classes2.dex, ... </i></b>and so on.</p><h4 class="graf--h3">Limitations of Multidex support library</h4><blockquote class="graf--blockquote">A good Android Developer know about the benefits of using some library but a professional developer also knows the limitations of using that library</blockquote><p class="graf--p">The multidex support library has some known limitations that we should be aware of before using it in our app. Some of the limitations are:  </p><ul><li>If your secondary DEX file is larger than the primary DEX file, then you may encounter some Application Not Responding (ANR) error. In this case, you should apply code shrinking to minimize the size of DEX files and remove unused portions of code.   </li><li>If you are targeting API levels lower than 21, test thoroughly on those versions of the platform, because your app might have issues at startup or when particular groups of classes are loaded.   </li></ul><p class="graf--p">Code Shrinking can reduce or possibly eliminate these issues. </p><h4 class="graf--h3">Conclusion</h4><p class="graf--p">If you are working on an Android application that includes more than 64K methods then to avoid the <b class="graf--bold">64K reference limit, </b>you can use Multidex in your application. I am sure that after reading this blog, you all are familiar with the Multidex property of Android. So,  implement this in your project, but before doing so, make sure that your code is totally shrunk because code shrinking will help in reducing or possibly eliminating the Dex error.</p><p class="graf--p">Happy learning :)</p><p class="graf--p">Team MindOrks.</p>',author:14897,img_url:"/images/understanding-multidex-banner-img.png",blog_url:"understanding-multidex-in-android",likes:0,rank:0,category:1,published_at:"18th May 2019"},author:{id:14897,name:"Admin MindOrks",google_profile_pic:"https://s3.ap-south-1.amazonaws.com/mindorks/website/mindorks-admin.png",fb_profile_pic:null,profile_tagline:"Mindorks is an online software learning platform. It is a community of great programmers.",fb_profile_url:"https://www.facebook.com/mindorks.nextgen/",google_plus_profile_url:"https://mindorks.com",twitter_profile_url:"https://twitter.com/mindorksnextgen",github_profile_url:"https://github.com/mindorksopensource",linkedin_profile_url:"https://in.linkedin.com/company/mindorks"},isFetching:!1,similarBlogs:[{id:216,title:"Understanding Density Independence Pixel: sp, dp, dip in Android",description:"What is the best measurement unit for designing for Android Screen? Density Independent Pixel, Scaled Independent Pixels, Density Pixels or Pixels.",author:7037,img_url:"/images/understanding_density_independent_pixel.jpg",blog_url:"understanding-density-independent-pixel-sp-dp-dip-in-android",likes:0,rank:0,category:1,published_at:"31st January 2019",score:.5386013984680176},{id:231,title:"Understanding and Implementing Permission in Android Q",description:"In this blog, we will understand the new privacy-based location permission in Android Q and how to implement it in your app.",author:14897,img_url:"/images/location-permission.png",blog_url:"location-permissions-in-android-q",likes:0,rank:0,category:1,published_at:"11th May 2019",score:.5386013984680176},{id:233,title:"Understanding Settings Panels in Android Q",description:"In this blog, we will understand the new setting panel which released in Android Q. With Google launching Android Q, Lot of exciting features has also popped up. One amazing feature is Location Service usage and few more.",author:14897,img_url:"/images/android-setting.png",blog_url:"understanding-settings-panel-in-android-q",likes:0,rank:0,category:1,published_at:"14th May 2019",score:.5386013984680176},{id:263,title:"Understanding the Application Lifecycle in Android",description:"In this blog, we will learn about the Application life cycle in Android. We will learn how to make use of various application states that a particular application has in general. ",author:14897,img_url:"/images/understanding-the-application-lifecycle-in-android-banner.png",blog_url:"understanding-the-application-lifecycle-in-android",likes:0,rank:0,category:1,published_at:"4th June 2019",score:.5386013984680176},{id:277,title:"Understanding Activity Aliases in Android To Preserve Your Launchers",description:"In this blog, we will learn the concept of Activity Aliases in Android. Activity Aliases are used to preserve the Launchers whenever there is a change in the Launcher Activity name. Generally, when we create a shortcut on our home screen and if we change the Launcher Activity, then the shortcut will be removed from the home screen. So, let's find how to deal with this.",author:14897,img_url:"/images/activity-aliases-in-android-banner.png",blog_url:"understanding-activity-aliases-in-android-to-preserve-your-launchers",likes:0,rank:0,category:1,published_at:"17th June 2019",score:.5386013984680176},{id:316,title:"Understanding LiveData in Android",description:"In this blog, we will learn about LiveData which is used to notify the observers associated with it if there is a change in the LiveData. Normally, the UI elements are notified when there is a change in data. Also, only that observers will be notified that are in Live state. So, let's explore this.",author:14897,img_url:"/images/understanding-livedata-in-android-banner-0664fcf3fef607cc.png",blog_url:"understanding-livedata-in-android",likes:0,rank:0,category:1,published_at:"21st August 2019",score:.5386013984680176}],isSimilarBlogsFetching:!1},loginData:{data:null,isLoggingIn:!1,isLoggingOut:!1,loginState:!1,isForcedLogout:!1,isTokenRefreshed:!1,isRedirectHome:!1,message:""},updatesData:{news:null,inspirations:null,isNewsFetching:!0,isInspirationsFetching:!0},blogEditorData:{blogId:null,blogDetailsFormData:{title:"",description:"",imgUrl:"",blogUrl:"",category:"",categories:[],isWriting:!1,isTitleError:!1,isDescriptionError:!1,isImgUrlError:!1,isBlogUrlError:!1,isCategoryError:!1,isUploadingImage:!1,uploadedImageUrl:null},editorState:null,editorText:null,successMessage:null,errorMessage:null,isSending:!1,isMsgToShow:!1,isPublished:!1,isSubmitted:!1,isDraft:!0,isEditOfExistingBlog:!1,isFetchingBlogCategories:!1,isUploadingImage:!1,uploadedImageUrl:null},myBlogsData:{data:null,isSubmittedBlogsFetching:!0,isDraftBlogsFetching:!0,isPublishedBlogsFetching:!0,successMessage:null,errorMessage:null,isMsgToShow:!1,tabNames:["drafts","submissions","published"],selectedTab:"drafts",isFetchingBlog:!1,isDeletingBlog:!1,openEditorPage:!1},profilePreviewData:{profile:null,blogs:null,isFetchingProfile:!1,isFetchingAuthorBlogs:!1,successMessage:null,errorMessage:null,isMsgToShow:!1,isUserNotRegistered:!1,redirectToMyProfileEdit:!1},profileEditableData:{userId:null,name:null,fbProfilePicUrl:null,googleProfilePicUrl:null,profileFormData:{tagline:"",fbProfileUrl:"",googlePlusProfileUrl:"",twitterProfileUrl:"",githubProfileUrl:"",linkedinProfileUrl:"",isWriting:!1,isTaglineError:!1,isFbProfileUrlError:!1,isGooglePlusProfileUrlError:!1,isTwitterProfileUrlError:!1,isGithubProfileUrlError:!1,isLinkedinProfileUrlError:!1},isSavingProfile:!1,successMessage:null,errorMessage:null,isMsgToShow:!1,redirectToProfilePreview:!1},submitBlogData:{formData:{email:"",name:"",link:"",isWriting:!1,isNameError:!1,isEmailError:!1,isLinkError:!1,dismissMsg:!1},successMessage:null,errorMessage:null,isSubmitting:!1},advertisementsData:{data:{},isLoading:!1},recaptchaData:{verified:!1,successMessage:null,errorMessage:null},blogSearchData:{searches:null,isSearching:!1}}
  </script>
  <script async="" src="https://www.google-analytics.com/analytics.js" type="text/javascript">
  </script>
  <script type="text/javascript">
   window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-91686131-1","auto"),ga("require","cleanUrlTracker"),ga("require","eventTracker"),ga("require","impressionTracker"),ga("require","outboundLinkTracker"),ga("require","urlChangeTracker"),ga("require","maxScrollTracker"),ga("require","mediaQueryTracker"),ga("require","outboundFormTracker"),ga("require","outboundLinkTracker"),ga("require","pageVisibilityTracker"),ga("require","socialWidgetTracker"),ga("require","urlChangeTracker"),ga("send","pageview")
  </script>
  <script defer="defer" src="/assets/autotrack.js" type="text/javascript">
  </script>
  <script src="/assets/highlight.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/vendor-bundle-1.8.6.js" type="text/javascript">
  </script>
  <script defer="defer" src="/js/app-bundle-1.8.6.js" type="text/javascript">
  </script>
 </head>
 <body>
  <div id="root">
   <div class="screen app-load-content" data-reactroot="">
    <div class="ui centered grid">
     <div class="row" style="padding:0">
      <div class="ui fixed menu navbar huge borderless grid" style="background-color:#fff;height:60px">
      </div>
     </div>
     <div class="centered computer only row" style="padding:0">
      <div class="ui fixed top menu navbar huge borderless grid header-container" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="right menu">
        <a class="item" href="https://janisharali.com" target="_blank">
         Mentor Ali
        </a>
        <a class="item" href="https://amitshekhar.me" target="_blank">
         Mentor Amit
        </a>
       </div>
      </div>
     </div>
     <div class="tablet only mobile only row" style="padding:0">
      <div class="ui fixed top navbar huge menu borderless" style="background-color:#fff;height:60px">
       <a class="item brand" href="/">
        <img alt="MindOrks" src="/assets/mindorks-logo.svg"/>
        <div class="header item" style="font-size:20px;padding:0;margin-left:10px">
         MindOrks
        </div>
       </a>
       <div class="item">
       </div>
      </div>
     </div>
    </div>
    <div class="header-height">
    </div>
    <div aria-live="assertive" class="redux-toastr">
     <div>
      <div class="top-left">
      </div>
      <div class="top-right">
      </div>
      <div class="top-center">
      </div>
      <div class="bottom-left">
      </div>
      <div class="bottom-right">
      </div>
      <div class="bottom-center">
      </div>
     </div>
    </div>
    <div class="content-container theme">
     <div class="ui centered one column grid" style="padding-bottom:80px;background-color:#fff">
      <div class="ten wide computer fifteen wide mobile fifteen wide tablet column" style="margin-top:50px">
       <div>
        <div class="blog-page-author">
         <div class="ui small header">
          <img alt="Admin MindOrks" class="ui circular image" src="https://s3.ap-south-1.amazonaws.com/mindorks/website/mindorks-admin.png"/>
          <div class="content">
           Admin MindOrks
           <div class="sub header" style="margin-top:5px">
            18th May 2019
           </div>
          </div>
         </div>
        </div>
        <div id="content">
         <article class="template">
          <div class="postContent">
           <div class="notesSource">
            <div class="postField postField--body" id="editor">
             <section class="section--first section--last">
              <div class="section-divider layoutSingleColumn-template">
               <hr class="section-divider"/>
              </div>
              <div class="section-content">
               <div class="section-inner layoutSingleColumn-template">
                <div>
                 <h1 class="graf--h1">
                  Understanding Multidex in Android
                 </h1>
                 <div class="graf-image graf-caption">
                  <img alt="Understanding Multidex in Android" class="graf-image" src="/images/understanding-multidex-banner-img.png"/>
                 </div>
                 <p class="graf--p">
                  In Java, if we compile our code then that code is converted into a
                  <b class="graf--bold">
                   <i class="graf--italic">
                    .class
                   </i>
                  </b>
                  file by the compiler because our machine understands that
                  <b class="graf--bold">
                   <i class="graf--italic">
                    .class
                   </i>
                  </b>
                  file. The same is the process for the Android Application. In Android, the compiler converts our source code into
                  <b class="graf--bold">
                   DEX
                  </b>
                  (Dalvik Executable) file.
                 </p>
                 <p class="graf--p">
                  So, in this blog, we will learn about
                  <b class="graf--bold">
                   Dex
                  </b>
                  and
                  <b class="graf--bold">
                   Multidex
                  </b>
                  in Android. Especially, this blog is for those Android developers who get 64K method limit exceeded error while building APK. This error comes due to DEX. So, in this blog, we will try to gain more knowledge about Dex and Multidex in Android.
                 </p>
                 <p class="graf--p">
                  The timeline of this blog is as follows:
                 </p>
                 <ul>
                  <li>
                   Android build system
                  </li>
                  <li>
                   Multidex in Android
                  </li>
                  <li>
                   Enabling Multidex support in Project
                  </li>
                  <li>
                   Limitations of Multidex support library
                  </li>
                  <li>
                   Conclusion
                  </li>
                 </ul>
                 <h4 class="graf--h3">
                  Android Build System
                 </h4>
                 <p class="graf--p">
                  Before moving on to DEX, let's revise some concepts of the build system of Android. Android compiles the resources and source code of our app and packages them into APKs. Conversion of our project into an APK requires many tools and involves many processes. You can understand the build process with the help of the below diagram:
                 </p>
                 <p class="graf--p">
                  Image Credit: Android Developer website
                 </p>
                 <div class="graf-image graf-caption">
                  <img alt="Understanding Multidex in Android" class="graf-image" src="/images/understanding-multidesk-build-process.png"/>
                 </div>
                 <p class="graf--p">
                  The build process of a typical Android App can be summarized as below:
                 </p>
                 <ol type="1">
                  <li>
                   The compilers convert the source code into DEX (Dalvik Executable) files, which include the bytecode that runs on Android devices.
                  </li>
                  <li>
                   After having the DEX files, the APK Packager combines the DEX files and compiled resources into a single APK.
                  </li>
                  <li>
                   After that, the APK Packager signs the APK.
                  </li>
                  <li>
                   Before generating the final APK, various methods are followed to optimize the code so as to avoid the unused code.
                  </li>
                 </ol>
                 <h4 class="graf--h3">
                  Multidex in Android
                 </h4>
                 <p class="graf--p">
                  In Android, the compilers convert your source code into DEX files. This DEX file contains the compiled code used to run the app. But there is a limitation with the DEX file. The DEX file limits the total number of methods that can be referenced within a single DEX file to 64K i.e. 65,536 methods. So, you can't use more than 64K methods in a particular DEX file. These 64K methods include Android framework methods, library methods, and methods in our code also. This limit of 64K is referred to as the "
                  <b class="graf--bold">
                   64K reference limit
                  </b>
                  ".
                 </p>
                 <p class="graf--p">
                  So, if our app exceeds 65,536 methods, we will encounter a build error that indicates our app has reached the limit of the Android build architecture. The error is as follows:
                 </p>
                 <pre><code class="language-java graf graf--code">Too many field references: 131000; max is 65536.
You may try using --multi-dex option.</code></pre>
                 <p class="graf--p">
                  Older versions of the build system report a different error, which also indicates the same problem:
                 </p>
                 <pre><code class="language-java graf graf--code">Conversion to Dalvik format failed:
Unable to execute dex: method ID not in [0, 0xffff]: 65536</code></pre>
                 <p class="graf--p">
                  Both the above error are known as
                  <b class="graf--bold">
                   64K reference limit
                  </b>
                  i.e we are trying to use more than 64K methods in our code. So, here comes the role of Multidex support in our Android Project. Next time if you want to use more than 64K methods in your project then you can use the Multidex to achieve this.
                 </p>
                 <p class="graf--p">
                  If you are getting some type of DEX error then before configuring your app for multidex to enable the use of 64K or more reference methods, you should try to reduce the total number of reference methods that are being used by our app. Try the following strategies to avoid using 64K reference methods:
                 </p>
                 <ol type="1">
                  <li>
                   <b class="graf--bold">
                    Manage dependencies:
                   </b>
                   While importing some dependencies for our project, sometimes we import each and every library and use only a few of them. So, instead of keeping all those dependencies, we can keep only the required one.
                  </li>
                  <li>
                   <b class="graf--bold">
                    Remove unused code:
                   </b>
                   Enable code shrinking in your project. By doing so, we are not shipping unused code with our APK.
                  </li>
                 </ol>
                 <p class="graf--p">
                  In the next part of this blog, we will learn how to use the Multidex support for our project that has more than 64K methods.
                 </p>
                 <h4 class="graf--h3">
                  Enabling Multidex support in Project
                 </h4>
                 <p class="graf--p">
                  Here, we will see how to enable multidex for following:
                 </p>
                 <ul>
                  <li>
                   API level lower than 21:
                   <b class="graf--bold">
                    That is if your minSdkVersion is set to lower than 21.
                   </b>
                  </li>
                  <li>
                   API level 21 and higher.
                  </li>
                 </ul>
                 <p class="graf--p">
                  <span class="graf--text-highlight">
                   <b class="graf--bold">
                    Note:
                   </b>
                   Follow only one of the following based on the minSdkVersion.
                  </span>
                 </p>
                 <ul>
                  <li>
                   <b class="graf--bold">
                    Multidex support for API level lower than 21
                   </b>
                  </li>
                  <li>
                   <b class="graf--bold">
                    Multidex support for API level 21 and higher
                   </b>
                  </li>
                 </ul>
                 <h4 class="graf--h3">
                  <b class="graf--bold">
                   Multidex support for API level lower than 21
                  </b>
                 </h4>
                 <p class="graf--p">
                  For executing app code, versions of Android lower than Android 5.0 (API level 21) use the Dalvik runtime, and the limitation of using Dalvik is that you can't use more than one
                  <code class="graf--code-inline">
                   classes.dex
                  </code>
                  bytecode file per APK. To overcome this limitation, you will have to add the Multidex support library.
                 </p>
                 <p class="graf--p">
                  To add the multidex support library to your project for API level lower than 21, add the following dependency in your
                  <b class="graf--bold">
                   <i class="graf--italic">
                    build.gradle
                   </i>
                  </b>
                  file.
                 </p>
                 <pre><code class="language-java graf graf--code">dependencies {
    implementation 'androidx:multidex:{latest-version}'
}</code></pre>
                 <p class="graf--p">
                  If you aren't using AndroidX, add the following support library       dependency instead:
                 </p>
                 <pre><code class="language-java graf graf--code">dependencies {
  implementation 'com.android.support:multidex:{latest-version}'
}</code></pre>
                 <p class="graf--p">
                  By adding this library, your app can manage the access of additional DEX files. In other words, if you are having more than 64K methods, then you will be having more than one DEX file and these DEX files will be managed by using this multidex support library.
                 </p>
                 <p class="graf--p">
                  Then, modify the module-level
                  <b class="graf--bold">
                   <i class="graf--italic">
                    build.gradle
                   </i>
                  </b>
                  file to enable multidex using
                  <code class="graf--code-inline">
                   multiDexEnabled true
                  </code>
                  .
                 </p>
                 <pre><code class="language-java graf graf--code">android {
    defaultConfig {
 ...
        minSdkVersion 15 
        targetSdkVersion 28
        multiDexEnabled true
 }
 ...
}

dependencies {
 implementation 'androidx:multidex:{latest-version}'
}</code></pre>
                 <p class="graf--p">
                  Then, depending on whether you override the Application class, perform one of the following:
                 </p>
                 <p class="graf--p">
                  1. If you
                  <i class="graf--italic">
                   do not
                  </i>
                  override the Application class, edit your manifest file to set
                  <i class="graf--italic">
                   <b class="graf--bold">
                    android:name
                   </b>
                  </i>
                  in the
                  <i class="graf--italic">
                   <b class="graf--bold">
                    &lt;application&gt;
                   </b>
                  </i>
                  tag as follows:
                 </p>
                 <pre><code class="language-java graf graf--code">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example"&gt;
    &lt;application
            android:name="android.support.multidex.MultiDexApplication" &gt;
        ...
    &lt;/application&gt;
&lt;/manifest&gt;</code></pre>
                 <p class="graf--p">
                  2. If you do override the Application class, change it to extend MultiDexApplication (if possible) as follows:
                 </p>
                 <pre><code class="language-java graf graf--code">public class MyApplication extends MultiDexApplication { ... }</code></pre>
                 <p class="graf--p">
                  3. Or if you do override the Application class but it's not possible to change the base class, then you can instead override the
                  <b class="graf--bold">
                   <i class="graf--italic">
                    attachBaseContext()
                   </i>
                  </b>
                  method and call
                  <b class="graf--bold">
                   <i class="graf--italic">
                    MultiDex.install(this)
                   </i>
                  </b>
                  to enable multidex:
                 </p>
                 <pre><code class="language-java graf graf--code">public class MyApplication extends SomeOtherApplication {
  @Override
  protected void attachBaseContext(Context base) {
     super.attachBaseContext(base);
     MultiDex.install(this);
  }
}</code></pre>
                 <p class="graf--p">
                  You are all set now.
                 </p>
                 <p class="graf--p">
                  This was all about the API level lower than 21. Now, let's move to the next one.
                 </p>
                 <h4 class="graf--h3">
                  <b class="graf--bold">
                   Multidex support for API level 21 and higher
                  </b>
                 </h4>
                 <p class="graf--p">
                  Your task becomes easier if you are making an app for Android version 5.0 (API level 21) or higher. API level 21 uses a runtime called ART which supports loading multiple DEX files from APK files. So, you do
                  <b class="graf--bold">
                   NOT
                  </b>
                  need to add the support library for multidex in Android 5.0 or higher.
                 </p>
                 <p class="graf--p">
                  Now, for API level 21 or higher, you need to set
                  <code class="graf--code-inline">
                   <b class="graf--bold">
                    <i class="graf--italic">
                     <code class="graf--code-inline">
                      multiDexEnabled
                     </code>
                    </i>
                   </b>
                  </code>
                  to
                  <code class="graf--code-inline">
                   <code class="graf--code-inline">
                    true
                   </code>
                  </code>
                  in your module-level
                  <code class="graf--code-inline">
                   <b class="graf--bold">
                    <i class="graf--italic">
                     build.gradle
                    </i>
                   </b>
                  </code>
                  file, as shown here:
                 </p>
                 <pre><code class="language-java graf graf--code">android {
    defaultConfig {
        ...
        minSdkVersion 21 
        targetSdkVersion 28
        multiDexEnabled true
    }
    ...
}</code></pre>
                 <p class="graf--p">
                  Then, depending on whether you override the Application class, perform one of the following:
                 </p>
                 <p class="graf--p">
                  1. If you
                  <i class="graf--italic">
                   do not
                  </i>
                  override the Application class, edit your manifest file to set
                  <i class="graf--italic">
                   <code class="graf--code-inline">
                    <b class="graf--bold">
                     android:name
                    </b>
                   </code>
                  </i>
                  in the
                  <i class="graf--italic">
                   <code class="graf--code-inline">
                    <b class="graf--bold">
                     &lt;application&gt;
                    </b>
                   </code>
                  </i>
                  tag as follows:
                 </p>
                 <pre><code class="language-java graf graf--code">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example"&gt;
    &lt;application
            android:name="android.support.multidex.MultiDexApplication" &gt;
        ...
    &lt;/application&gt;
&lt;/manifest&gt;</code></pre>
                 <p class="graf--p">
                  2. If you do override the Application class, change it to extend MultiDexApplication (if possible) as follows:
                 </p>
                 <pre><code class="language-java graf graf--code">public class MyApplication extends MultiDexApplication { ... }</code></pre>
                 <p class="graf--p">
                  3. Or if you do override the Application class but it's not possible to change the base class, then you can instead override the
                  <b class="graf--bold">
                   <i class="graf--italic">
                    <code class="graf--code-inline">
                     attachBaseContext()
                    </code>
                   </i>
                  </b>
                  method and call
                  <b class="graf--bold">
                   <i class="graf--italic">
                    MultiDex.install(this)
                   </i>
                  </b>
                  to enable multidex:
                 </p>
                 <pre><code class="language-java graf graf--code">public class MyApplication extends SomeOtherApplication {
  @Override
  protected void attachBaseContext(Context base) {
     super.attachBaseContext(base);
     MultiDex.install(this);
  }
}</code></pre>
                 <p class="graf--p">
                  You are all set now.
                 </p>
                 <p class="graf--p">
                  So, now when you build your app, one primary DEX file will be constructed, and supporting DEX files will also be added to it. The primary DEX file is normally marked as
                  <b class="graf--bold">
                   <i class="graf--italic">
                    classes.dex
                   </i>
                  </b>
                  and other supporting DEX files as
                  <b class="graf--bold">
                   <i class="graf--italic">
                    classes1.dex, classes2.dex, ...
                   </i>
                  </b>
                  and so on.
                 </p>
                 <h4 class="graf--h3">
                  Limitations of Multidex support library
                 </h4>
                 <blockquote class="graf--blockquote">
                  A good Android Developer know about the benefits of using some library but a professional developer also knows the limitations of using that library
                 </blockquote>
                 <p class="graf--p">
                  The multidex support library has some known limitations that we should be aware of before using it in our app. Some of the limitations are:
                 </p>
                 <ul>
                  <li>
                   If your secondary DEX file is larger than the primary DEX file, then you may encounter some Application Not Responding (ANR) error. In this case, you should apply code shrinking to minimize the size of DEX files and remove unused portions of code.
                  </li>
                  <li>
                   If you are targeting API levels lower than 21, test thoroughly on those versions of the platform, because your app might have issues at startup or when particular groups of classes are loaded.
                  </li>
                 </ul>
                 <p class="graf--p">
                  Code Shrinking can reduce or possibly eliminate these issues.
                 </p>
                 <h4 class="graf--h3">
                  Conclusion
                 </h4>
                 <p class="graf--p">
                  If you are working on an Android application that includes more than 64K methods then to avoid the
                  <b class="graf--bold">
                   64K reference limit,
                  </b>
                  you can use Multidex in your application. I am sure that after reading this blog, you all are familiar with the Multidex property of Android. So,  implement this in your project, but before doing so, make sure that your code is totally shrunk because code shrinking will help in reducing or possibly eliminating the Dex error.
                 </p>
                 <p class="graf--p">
                  Happy learning :)
                 </p>
                 <p class="graf--p">
                  Team MindOrks.
                 </p>
                </div>
               </div>
              </div>
             </section>
            </div>
           </div>
          </div>
         </article>
        </div>
       </div>
       <div class="ui divider">
       </div>
      </div>
      <div class="stretched fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui large center aligned header" style="padding-top:20px">
        Recommended for You
       </div>
      </div>
      <div class="fourteen wide computer fifteen wide mobile fifteen wide tablet column">
       <div class="ui centered grid">
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="Understanding Density Independence Pixel: sp, dp, dip in Android" class="ui centered image" src="/images/understanding_density_independent_pixel.jpg" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Understanding Density Independence Pixel: sp, dp, dip in Android
           </div>
           <div class="meta">
            31st January 2019
           </div>
           <div class="description">
            What is the best measurement unit for designing for Android Screen? Density Independent Pixel, Scaled Independent Pixels, Density Pixels or Pixels.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="Understanding and Implementing Permission in Android Q" class="ui centered image" src="/images/location-permission.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Understanding and Implementing Permission in Android Q
           </div>
           <div class="meta">
            11th May 2019
           </div>
           <div class="description">
            In this blog, we will understand the new privacy-based location permission in Android Q and how to implement it in your app.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="Understanding Settings Panels in Android Q" class="ui centered image" src="/images/android-setting.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Understanding Settings Panels in Android Q
           </div>
           <div class="meta">
            14th May 2019
           </div>
           <div class="description">
            In this blog, we will understand the new setting panel which released in Android Q. With Google launching Android Q, Lot of exciting features has also popped up. One amazing feature is Location Service usage and few more.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="Understanding the Application Lifecycle in Android" class="ui centered image" src="/images/understanding-the-application-lifecycle-in-android-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Understanding the Application Lifecycle in Android
           </div>
           <div class="meta">
            4th June 2019
           </div>
           <div class="description">
            In this blog, we will learn about the Application life cycle in Android. We will learn how to make use of various application states that a particular application has in general.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="Understanding Activity Aliases in Android To Preserve Your Launchers" class="ui centered image" src="/images/activity-aliases-in-android-banner.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Understanding Activity Aliases in Android To Preserve Your Launchers
           </div>
           <div class="meta">
            17th June 2019
           </div>
           <div class="description">
            In this blog, we will learn the concept of Activity Aliases in Android. Activity Aliases are used to preserve the Launchers whenever there is a change in the Launcher Activity name. Generally, when we create a shortcut on our home screen and if we change the Launcher Activity, then the shortcut will be removed from the home screen. So, let's find how to deal with this.
           </div>
          </div>
         </a>
        </div>
        <div class="stretched five wide computer sixteen wide mobile eight wide tablet column">
         <a class="ui fluid card">
          <img alt="Understanding LiveData in Android" class="ui centered image" src="/images/understanding-livedata-in-android-banner-0664fcf3fef607cc.png" style="max-height:300px"/>
          <div class="content">
           <div class="header">
            Understanding LiveData in Android
           </div>
           <div class="meta">
            21st August 2019
           </div>
           <div class="description">
            In this blog, we will learn about LiveData which is used to notify the observers associated with it if there is a change in the LiveData. Normally, the UI elements are notified when there is a change in data. Also, only that observers will be notified that are in Live state. So, let's explore this.
           </div>
          </div>
         </a>
        </div>
       </div>
      </div>
     </div>
    </div>
    <div style="background:#fff">
     <footer class="content-container">
      <div class="ui centered padded grid" style="padding-top:40px;background:linear-gradient(to right,#c4e0e0,#e5f1f1)">
       <h2 class="ui huge icon center aligned header">
        <div class="content">
         Connect With Your Mentors
        </div>
       </h2>
       <div class="centered row">
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Janishar Ali" class="ui medium circular image" src="/assets/ali.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://janisharali.com" target="_blank">
             Janishar Ali
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://janisharali.com" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/janisharali" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
        <div class="five wide computer sixteen wide mobile eight wide tablet column">
         <div class="ui centered padded one column grid">
          <div class="ui centered grid">
           <div class="column">
            <div class="ui circular segment" style="width:175px;height:175px;padding:0">
             <img alt="Amit Shekhar" class="ui medium circular image" src="/assets/amit.jpg"/>
            </div>
           </div>
          </div>
          <div class="column">
           <div class="ui large center aligned header">
            <a class="content" href="https://amitshekhar.me" target="_blank">
             Amit Shekhar
             <div class="sub header" style="padding:5px;color:#000">
              Founder | IIT-BHU | 10 Yrs Exp.
             </div>
            </a>
           </div>
          </div>
          <div class="ui centered grid">
           <div class="column">
            <a class="ui black huge circular icon button" href="https://amitshekhar.me" role="button" target="_blank">
             <i aria-hidden="true" class="linkify icon">
             </i>
            </a>
            <a class="ui twitter huge circular icon button" href="https://twitter.com/amitiitbhu" role="button" target="_blank">
             <i aria-hidden="true" class="twitter icon">
             </i>
            </a>
           </div>
          </div>
         </div>
        </div>
       </div>
      </div>
      <div class="ui divider" style="margin:unset">
      </div>
      <h5 class="ui header" style="padding:16px;margin:unset;color:#555">
       <i aria-hidden="true" class="copyright icon">
       </i>
       <div class="content">
        Copyright 2022, MindOrks Nextgen Private Limited
       </div>
      </h5>
     </footer>
    </div>
   </div>
  </div>
  <script type="text/javascript">
   window.hljs.initHighlightingOnLoad()
  </script>
 </body>
</html>